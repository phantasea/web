<!DOCTYPE html>
<html dir="ltr" lang="zh-CN">
<head>
<meta charset="UTF-8" />
<title>SED与AWK学习笔记 - 运维人生</title>
<meta name="description" content=" 
1. 基本概念
Sed是一个“非交互式”的面向字符流的编辑器。

这个面向字符流" />
<meta name="keywords" content=", awk, sed, 手册, " />
<link rel="stylesheet" type="text/css" media="all" href="http://opkeep.com/wp-content/themes/istudio-theme/style.css" />
<link rel="Shortcut Icon" href="http://opkeep.com/wp-content/themes/istudio-theme/resources/favicon.ico" type="image/x-icon" />
<link rel="pingback" href="http://opkeep.com/xmlrpc.php" />
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
<script type="text/javascript" src="http://opkeep.com/wp-content/themes/istudio-theme/resources/scripts/html5.js"></script><![endif]-->   
<link rel="alternate" type="application/rss+xml" title="运维人生 &raquo; feed" href="http://opkeep.com/feed" />
<link rel="alternate" type="application/rss+xml" title="运维人生 &raquo; 评论 feed" href="http://opkeep.com/comments/feed" />
<link rel="alternate" type="application/rss+xml" title="运维人生 &raquo; SED与AWK学习笔记 评论 feed" href="http://opkeep.com/system/linux/sed_and-awk.html/feed" />
<link rel='stylesheet' id='NextGEN-css'  href='http://opkeep.com/wp-content/plugins/nextgen-gallery/css/nggallery.css?ver=1.0.0' type='text/css' media='screen' />
<link rel='stylesheet' id='shutter-css'  href='http://opkeep.com/wp-content/plugins/nextgen-gallery/shutter/shutter-reloaded.css?ver=1.3.0' type='text/css' media='screen' />
<link rel='stylesheet' id='wp-syntax-css-css'  href='http://opkeep.com/wp-content/plugins/wp-syntax/css/wp-syntax.css?ver=1.0' type='text/css' media='all' />
<script type='text/javascript'>
/* <![CDATA[ */
var shutterSettings = {
	msgLoading: "L O A D I N G",
	msgClose: "Click to Close",
	imageCount: "1"
};
/* ]]> */
</script>
<script type='text/javascript' src='http://opkeep.com/wp-content/plugins/nextgen-gallery/shutter/shutter-reloaded.js?ver=1.3.0'></script>
<script type='text/javascript' src='http://opkeep.com/wp-includes/js/jquery/jquery.js?ver=1.4.2'></script>
<script type='text/javascript' src='http://opkeep.com/wp-content/plugins/nextgen-gallery/js/jquery.cycle.all.min.js?ver=2.88'></script>
<script type='text/javascript' src='http://opkeep.com/wp-content/plugins/nextgen-gallery/js/ngg.slideshow.min.js?ver=1.05'></script>
<script type='text/javascript' src='http://opkeep.com/wp-content/themes/istudio-theme/resources/scripts/scripts.js?ver=3.0.1'></script>
<script type='text/javascript' src='http://opkeep.com/wp-content/themes/istudio-theme/resources/scripts/jqmenus.js?ver=3.0.1'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://opkeep.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://opkeep.com/wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='运维人生' href='http://opkeep.com' />
<link rel='start' title='运维管理-流程规范' href='http://opkeep.com/management/operation_management_process.html' />
<link rel='prev' title='Tomcat性能调整' href='http://opkeep.com/system/linux/tomcat_performance.html' />
<link rel='next' title='wget中文使用手册' href='http://opkeep.com/system/linux/wget_man.html' />
<link rel='canonical' href='http://opkeep.com/system/linux/sed_and-awk.html' />
<link rel='shortlink' href='http://opkeep.com/?p=506' />

<!-- START of script generated by WP-MulticolLinks -->
<link rel="stylesheet" href="http://opkeep.com/wp-content/plugins/wp-multicollinks/wp-multicollinks.css" type="text/css" media="screen" />
<script type="text/javascript" src="http://opkeep.com/wp-content/plugins/wp-multicollinks/wp-multicollinks.js"></script>
<!-- END of script generated by WP-MulticolLinks -->
<link rel="stylesheet" href="http://opkeep.com/wp-content/plugins/wp-page-numbers/classic/wp-page-numbers.css" type="text/css" media="screen" /><link id='MediaRSS' rel='alternate' type='application/rss+xml' title='NextGEN Gallery RSS Feed' href='http://opkeep.com/wp-content/plugins/nextgen-gallery/xml/media-rss.php' />

<!-- NextGeEN Gallery CoolIris/PicLens support -->
<script type="text/javascript" src="http://lite.piclens.com/current/piclens_optimized.js"></script>
<!-- /NextGEN Gallery CoolIris/PicLens support -->
<meta name='NextGEN' content='1.7.4' />
<!--[if IE 6]>
<script type="text/javascript">
/*Load jQuery if not already loaded*/if(typeof jQuery=='undefined'){document.write("<script type=\"text/javascript\" src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js\"></"+"script>");var __noconflict=true;}
var IE6UPDATE_OPTIONS={icons_path:"http://opkeep.com/wp-content/themes/istudio-theme/resources/scripts/ie6upimg/"}
</script>
<script type="text/javascript" src="http://opkeep.com/wp-content/themes/istudio-theme/resources/scripts/ie6update.js"></script>
<![endif]-->
</head>
<body class="single single-post postid-506">
<section id="wrapper">
<header>
  <section class="hgroup">  <h1><a href="http://opkeep.com">运维人生</a></h1>
  <div class="description">关注每个细节</div>
    </section>
  <nav>
  	<a class="feedrss" href="http://opkeep.com/feed" title="运维人生 RSS Feed">Feed Rss</a>
    		<ul id="navmenus" class="menu">
      <li class="current_page_item"><a href="http://opkeep.com/" title="单击返回首页">Blog Archive</a></li>	<li class="cat-item cat-item-10"><a href="http://opkeep.com/category/system" title="查看 SYSTEM 下的所有文章">SYSTEM</a>
<ul class='children'>
	<li class="cat-item cat-item-12"><a href="http://opkeep.com/category/system/linux" title="查看 Linux 下的所有文章">Linux</a>
</li>
	<li class="cat-item cat-item-11"><a href="http://opkeep.com/category/system/windows" title="查看 Windows 下的所有文章">Windows</a>
</li>
	<li class="cat-item cat-item-13"><a href="http://opkeep.com/category/system/unix" title="查看 Unix 下的所有文章">Unix</a>
</li>
</ul>
</li>
	<li class="cat-item cat-item-5"><a href="http://opkeep.com/category/database" title="查看 DATABASE 下的所有文章">DATABASE</a>
<ul class='children'>
	<li class="cat-item cat-item-6"><a href="http://opkeep.com/category/database/mysql" title="查看 Mysql 下的所有文章">Mysql</a>
</li>
	<li class="cat-item cat-item-15"><a href="http://opkeep.com/category/database/oracle" title="查看 Oracle 下的所有文章">Oracle</a>
</li>
</ul>
</li>
	<li class="cat-item cat-item-17"><a href="http://opkeep.com/category/program" title="查看 PROGRAM 下的所有文章">PROGRAM</a>
<ul class='children'>
	<li class="cat-item cat-item-18"><a href="http://opkeep.com/category/program/shell" title="查看 Shell 下的所有文章">Shell</a>
</li>
	<li class="cat-item cat-item-19"><a href="http://opkeep.com/category/program/perl" title="查看 Perl 下的所有文章">Perl</a>
</li>
	<li class="cat-item cat-item-42"><a href="http://opkeep.com/category/program/nsis" title="查看 NSIS 下的所有文章">NSIS</a>
</li>
	<li class="cat-item cat-item-41"><a href="http://opkeep.com/category/program/inno" title="查看 Inno 下的所有文章">Inno</a>
</li>
	<li class="cat-item cat-item-495"><a href="http://opkeep.com/category/program/python-program" title="查看 Python 下的所有文章">Python</a>
</li>
</ul>
</li>
	<li class="cat-item cat-item-16"><a href="http://opkeep.com/category/network" title="查看 NETWORK 下的所有文章">NETWORK</a>
<ul class='children'>
	<li class="cat-item cat-item-98"><a href="http://opkeep.com/category/network/hacker" title="查看 Hacker 下的所有文章">Hacker</a>
</li>
	<li class="cat-item cat-item-99"><a href="http://opkeep.com/category/network/theory" title="查看 Theory 下的所有文章">Theory</a>
</li>
</ul>
</li>
	<li class="cat-item cat-item-4"><a href="http://opkeep.com/category/management" title="查看 MANAGEMENT 下的所有文章">MANAGEMENT</a>
<ul class='children'>
	<li class="cat-item cat-item-103"><a href="http://opkeep.com/category/management/gameoperation" title="查看 GameOperation 下的所有文章">GameOperation</a>
</li>
	<li class="cat-item cat-item-100"><a href="http://opkeep.com/category/management/operation" title="查看 Operation 下的所有文章">Operation</a>
</li>
</ul>
</li>
	<li class="cat-item cat-item-40"><a href="http://opkeep.com/category/interest" title="查看 INTEREST 下的所有文章">INTEREST</a>
<ul class='children'>
	<li class="cat-item cat-item-344"><a href="http://opkeep.com/category/interest/applications" title="查看 Applications 下的所有文章">Applications</a>
</li>
	<li class="cat-item cat-item-35"><a href="http://opkeep.com/category/interest/wordpress" title="查看 Wordpress 下的所有文章">Wordpress</a>
</li>
	<li class="cat-item cat-item-102"><a href="http://opkeep.com/category/interest/education" title="查看 Education 下的所有文章">Education</a>
</li>
	<li class="cat-item cat-item-101"><a href="http://opkeep.com/category/interest/home" title="查看 Home 下的所有文章">Home</a>
</li>
	<li class="cat-item cat-item-150"><a href="http://opkeep.com/category/interest/diary" title="查看 Diary 下的所有文章">Diary</a>
</li>
	<li class="cat-item cat-item-133"><a href="http://opkeep.com/category/interest/about" title="查看 About 下的所有文章">About</a>
</li>
	<li class="cat-item cat-item-237"><a href="http://opkeep.com/category/interest/movie" title="查看 Movie 下的所有文章">Movie</a>
</li>
	<li class="cat-item cat-item-190"><a href="http://opkeep.com/category/interest/video" title="查看 Video 下的所有文章">Video</a>
</li>
</ul>
</li>
    </ul>
		  </nav>
  </header>
<hr /><section id="content">
<section id="RandomShow">
<img src="http://opkeep.com/wp-content/themes/istudio-theme/showpic/stushow1.jpg" alt="" />
</section>
<section class="postlist">
  <article id="post-506" class="post-506 post type-post hentry category-linux tag-awk tag-sed tag-21">
    <section class="title">
      <h3>七月 2nd, 2010 <!-- by 木木 --></h3>
      <h2>SED与AWK学习笔记</h2>
      <small>31,281 views, <a href="http://opkeep.com/category/system/linux" title="查看 Linux 的全部文章" rel="category tag">Linux</a>, by 木木.</small>
    </section>
    <section class="entry">
      <p><strong></strong> </p>
<h3>1. 基本概念</h3>
<p>Sed是一个“非交互式”的<strong>面向字符流的编辑器</strong>。</p>
<p>这个面向字符流就像是我去餐厅点了一道菜让厨师做，菜都是字符，厨师做好后直接送到我面前。所以我只要下达命令就好。</p>
<p><strong>Sed</strong><strong>的优点</strong>是可以<span id="more-506"></span>在一个地方指定所有的编辑指令，然后通过文件传递一次来执行他们。但是它在每次多于一行的处理能力方面有限制。</p>
<p><strong>Awk</strong>的典型应用是将数据转换成格式化的报表。增强可读性。因此当数据有某种结构时就能最好的体现awk的好处。Awk的功能是非常强大的，甚至可以说成是程序设计语言。</p>
<h1>2. 基本操作</h1>
<p><strong>框架</strong>：<strong><em>命令 选项工作内容 文件名</em></strong><strong><em></em></strong></p>
<p><em> </em></p>
<p>Sed和awk的输出都不允许送到向程序提供输入的同一个文件，否则会使它变成乱码。如果工作内容中包含shell可执行的字符如“$和*”，那么必须用<strong>单引号</strong>引起。</p>
<p>Sed和awk都可以用-f来指定工作内容，这通常就是脚本存放的位置。</p>
<p>使用过程中，短的脚本可以在命令行上指定，长的脚本通常放在容易被修改和测试的文件中。</p>
<p>在sed和awk中，每个指令都包含两个部分，<strong>模式和语句。模式是由</strong><strong>/分隔的正则表达式</strong>。语句指定一个或多个将被执行的动作。</p>
<p>Awk<strong>不自动输出</strong>行，脚本中的指令控制awk最终所做的事情。</p>
<p>Sed的语句由类似于行编辑器中使用的那些编辑命令组成。大部分命令由单个字母组成。</p>
<p>Awk的语句由程序设计语句和函数组成，<strong>语句必须用大括号括起</strong>。</p>
<h1>3. 初识sed</h1>
<h2>3.1 替换字符串</h2>
<p><strong>$ sed &#8216;s/MA/Massachusetts/&#8217; list</strong><strong> #</strong>找出MA并替换成Massachusetts</p>
<p>John Daggett, 341 King Road, Plymouth Massachusetts</p>
<p>Alice Ford, 22 East Broadway, Richmond VA</p>
<p>Orville Thomas, 11345 Oak Bridge Road, Tulsa OK</p>
<p>Terry Kalkas, 402 Lans Road, Beaver Falls PA</p>
<p>Eric Adams, 20 Post Road, Sudbury Massachusetts</p>
<p>Hubert Sims, 328A Brook Road, Roanoke VA</p>
<p>Amy Wilde, 334 Bayshore Pkwy, Mountain View CA</p>
<p>Sal Carpenter, 73 6th Street, Boston Massachusetts</p>
<p>并不是在任何情况下都要将指令用单引号包围起来，但你应该养成这个习惯。</p>
<p>在城市和州之间放置逗号，这时候就需要单引号。</p>
<p><strong>$ sed &#8216;s/ MA/, Massachusetts/&#8217; list</strong><strong></strong></p>
<p>John Daggett, 341 King Road, Plymouth, Massachusetts</p>
<p>Alice Ford, 22 East Broadway, Richmond VA</p>
<p>Orville Thomas, 11345 Oak Bridge Road, Tulsa OK</p>
<p>Terry Kalkas, 402 Lans Road, Beaver Falls PA</p>
<p>Eric Adams, 20 Post Road, Sudbury, Massachusetts</p>
<p>Hubert Sims, 328A Brook Road, Roanoke VA</p>
<p>Amy Wilde, 334 Bayshore Pkwy, Mountain View CA</p>
<p>Sal Carpenter, 73 6th Street, Boston, Massachusetts</p>
<p>如果不加单引号，那么会得到一个错误提示sed: -e expression #1, char 2: unterminated `s&#8217; command</p>
<h2>3.2 关闭自动输出</h2>
<p>只打印被修改行。这里用了参数-n(关闭自动输出)和p(打印被修改行)</p>
<p><strong>$ sed -n -e &#8216;s/MA/Massachusetts/p&#8217; list</strong></p>
<p>John Daggett, 341 King Road, Plymouth Massachusetts</p>
<p>Eric Adams, 20 Post Road, Sudbury Massachusetts</p>
<p>Sal Carpenter, 73 6th Street, Boston Massachusetts</p>
<h2>3.3 在命令行上编写多个语句</h2>
<p>使用<strong>;</strong>分隔</p>
<p><strong>$ sed &#8216;s/ MA/, Massachusetts/; s/ PA/, Pennsylvania/&#8217; list</strong></p>
<p>使用<strong>-e</strong></p>
<p><strong>$ sed -e &#8216;s/ MA/, Massachusetts/&#8217; -e &#8216;s/ PA/, Pennsylvania/&#8217; list</strong></p>
<h1>4. 初识awk</h1>
<p>为了能和shell区分开，<strong>awk的指令都必须包括单引号</strong>，因为$这类符号在shell中是有特殊意义的。虽然awk与sed指令的结构相同，但awk中用语句和函数取代了使用一个或两个字符组成的命令。</p>
<p><strong>Awk将每个输入行识别成一条记录，而将那一行上的每个单词识别成一个字段。</strong></p>
<p><strong>$ awk &#8216;{ print $1 }&#8217; list</strong></p>
<p>John</p>
<p>Alice</p>
<p>Orville</p>
<p>Terry</p>
<p>Eric</p>
<p>Hubert</p>
<p>Amy</p>
<p>Sal</p>
<p><strong>打印含有</strong><strong>MA</strong><strong>的行</strong><strong></strong></p>
<p><strong>$ awk &#8216;/MA/&#8217; list</strong></p>
<p>John Daggett, 341 King Road, Plymouth MA</p>
<p>Eric Adams, 20 Post Road, Sudbury MA</p>
<p>Sal Carpenter, 73 6th Street, Boston MA</p>
<p><strong>打印含有</strong><strong>MA</strong><strong>的行的第一个字段</strong><strong></strong></p>
<p><strong>$ awk &#8216;/MA/ { print $1 }&#8217; list</strong></p>
<p>John</p>
<p>Eric</p>
<p>Sal</p>
<p>使用<strong>-F</strong>指定字段分隔符为逗号。意思是说逗号前的字段是$1或者$其他。这就使得原来可能$1 $2的内容都合并成了$1。</p>
<p>$ awk -F, &#8216;{ print $1; print $2; print $3 }&#8217; list</p>
<p>John Daggett</p>
<p> 341 King Road</p>
<p> Plymouth MA</p>
<p>Alice Ford</p>
<p> 22 East Broadway</p>
<p> Richmond VA</p>
<p>Orville Thomas</p>
<p> 11345 Oak Bridge Road</p>
<p> Tulsa OK</p>
<p>Terry Kalkas</p>
<p> 402 Lans Road</p>
<p> Beaver Falls PA</p>
<p>Eric Adams</p>
<p> 20 Post Road</p>
<p> Sudbury MA</p>
<p>Hubert Sims</p>
<p> 328A Brook Road</p>
<p> Roanoke VA</p>
<p>Amy Wilde</p>
<p> 334 Bayshore Pkwy</p>
<p> Mountain View CA</p>
<p>Sal Carpenter</p>
<p> 73 6th Street</p>
<p> Boston MA</p>
<p>新手常见错误</p>
<p><strong>没有用大括号</strong><strong>{}</strong><strong>。没有用单引号’’。没有用斜杠将正则括起来</strong><strong>//</strong><strong>。</strong><strong></strong></p>
<h1>5. 正则表达式</h1>
<h2>5.1 引语</h2>
<p>Grep、sed、awk都使用正则，<strong>然而这</strong><strong>3个程序并不能完全使用正则表达式语法中的所有元字符。</strong>所谓<strong>元字符就是指那些在正则表达式中具有特殊意义的专用字符</strong>，可以用来规定其前导字符（即位于元字符前面的字符）在目标对象中的出现形式。</p>
<p>注：本篇十分简陋，想深入学习正则可以找一本《精通正则表达式》。</p>
<h2>5.2 表达式</h2>
<p>表达式告诉计算机如何产生结果。但和加减乘除一样，在式子中也存在着优先级的问题。需要注意的一点是<strong>正则是区分大小写的</strong>。</p>
<p>那么正则是如何工作的呢，请看下图。</p>
<p>图中描述abe是如何进行匹配的。</p>
<h2>5.3 元字符汇总</h2>
<h3>5.3.1   .</h3>
<p><strong>[root@localhost]# grep &#8211;color -n &#8216;r..t&#8217; /etc/passwd</strong></p>
<p>1:root:x:0:0:root:/root:/bin/bash</p>
<p>12:operator:x:11:0:operator:/root:/sbin/nologin</p>
<p>15:ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin</p>
<p>大部分情况下这个.<strong>匹配除换行符外的任意一个字符</strong>。<strong>但在awk</strong><strong>中也能匹配换行符</strong>。</p>
<p>这里使用&#8211;color可以非常方便地查看 grep 具体匹配了哪些字符串，使用-n标出行数。</p>
<h3>5.3.2   *</h3>
<p><strong>[root@test root]# grep -n &#8216;ooo*&#8217; regular_express.txt</strong></p>
<p>1:&#8221;Open Source&#8221; is a good mechanism to develop programs.</p>
<p>2:apple is my favorite food.</p>
<p>3:Football game is not use feet only.</p>
<p>9:Oh! The soup taste good.</p>
<p>18:google is the best tools for search keyword.</p>
<p>19:goooooogle yes!</p>
<p>这个例子来自鸟哥的网页，表达式为了匹配至少两个o以上的字符串。从本例应该能够理解*是匹配任意一个在它前面的字符。留一个思考题， *ooo与o.*o匹配的结果有什么不同？</p>
<h3>5.3.3   [...]</h3>
<p>  中的</p>
<p>  <strong>\</strong>   转义（awk中使用）</p>
<p>  <strong>-</strong><strong>   </strong>表示范围。例如[0-9]包含任何数字</p>
<p>  <strong>^</strong><strong>   </strong>取反。例如[^0-9]不匹配数字。注意在grep中是使用grep –v来取反</p>
<p>grep &#8216;^[0-9]&#8216; /etc/inittab          查出以数字开头的行<br />
    grep &#8216;[a-Z]&#8216; /etc/inittab            查出有字母（大小通用）的行<br />
    grep &#8216;^[^0-9]&#8216;    /etc/inittab        ^[^ ]取反的<br />
    grep &#8216;x:[0-9][0-9]:&#8217; /etc/passwd 取出UID为0－99的用户<br />
    ls -l /dev |grep &#8216;tty[0-9]*$&#8217;        (＊多个或0个前面的字符)</p>
<h3>5.3.4   ^</h3>
<p>^n － 以n开头的行</p>
<h3>5.3.5   $</h3>
<p>从行尾开始任务。</p>
<p><strong>注意</strong><strong>:</strong><strong>在</strong><strong>sed</strong><strong>和</strong><strong>grep</strong><strong>中</strong><strong>^</strong><strong>和</strong><strong>$</strong><strong>并不一定总保持着自己的个性。当使用</strong><strong>ab^c </strong><strong>或者是</strong><strong>ab$c</strong><strong>匹配时它们就确实代表着字面意思，没有任何别的含义。但在</strong><strong>awk</strong><strong>中则不同，</strong><strong>^</strong><strong>和</strong><strong>$</strong><strong>永远保持着自己的个性，所以在</strong><strong>awk</strong><strong>中如果要匹配它俩时都需要使用</strong><strong>\</strong><strong>来转义。</strong><strong></strong></p>
<h3>5.3.6   \{n,m\}</h3>
<p>101</p>
<p>1001</p>
<p>10001</p>
<p>100001</p>
<p>10000001</p>
<p>100000001</p>
<p>这时候想把1001，10001，100001过滤出来。</p>
<p><strong># grep &#8220;10\{2,4\}1&#8243; file</strong></p>
<p>1001</p>
<p>10001</p>
<p>100001</p>
<p>1001中有2个0，100001中有4个0，所以这个大家应该明白了吧？</p>
<h3>5.3.7   \</h3>
<p>转义符。取消字符的特殊效果。比如我要匹配文件中的5.6。这时候我需要这样写</p>
<p># grep &#8217;5\.6&#8242; file</p>
<p>5.6</p>
<p>如果写成</p>
<p>grep &#8217;5.6&#8242; file</p>
<p>5.6</p>
<p>506</p>
<p>则列出了5.6和506。</p>
<h3>5.3.8   拓展的元字符（egrep和awk）</h3>
<p><strong>+</strong></p>
<p>egrep &#8216;o+&#8217;    /etc/passwd</p>
<p>?</p>
<p>| 或运算</p>
<p>egrep &#8216;^mysql|^root&#8217;    /etc/passwd<br />
egrep &#8216;^(mysql|root)&#8217;    /etc/passwd</p>
<p>指定单词的单复数compan(y|ies)</p>
<p>()</p>
<p>用于对正则进行分组并设置优先级</p>
<p>基础</p>
<p>ls -l /dev |grep &#8216;^b&#8217;<br />
    grep -v &#8216;^#&#8217; /etc/httpd/conf/httpd.conf    (-v 取反)<br />
    grep &#8216;bash$&#8217; /etc/passwd        找出可以登录的用户<br />
    grep -c &#8216;bash$&#8217; /etc/passwd    （－c 统计行数）<br />
    ls -lR /etc/ |grep &#8216;conf$&#8217;       (查找/etc/下的以conf结尾的文件)<br />
    找出httpd.conf文件的有效行</p>
<p>grep -v &#8216;^$&#8217; /etc/httpd/conf/httpd.conf |grep -v &#8216;^#&#8217;    <br />
    单词分割符：［^a-Z］+<br />
    在vim编辑器下使用正则：<br />
    1,$s/^\([a-z] [a-z]*\).*/\1/    显示第一个单词<br />
    1,$s/^\([a-z] [a-z]*\)\([^a-z].*[^a-z]\)\([a-z]*[a-z]\)$/\3\2\1/    <br />
    第一个单词与最后一个单词互换<br />
    1,$s/[0-9]//g    把数字替换为空  g全局<br />
    1,$s#:/[a-z] [a-z]*/[a-z] [a-z]*$##    删掉passwd后面的字段<br />
    1,$s#.*:##    只留路径</p>
<h2>5.4 练习</h2>
<p><strong>找出</strong><strong>passwd</strong><strong>文件中的</strong><strong>uid</strong><strong>为三位数的能登录的用户</strong></p>
<p>grep &#8216;x:[0-9][0-9][0-9]*:..*bash$&#8217; /etc/passwd</p>
<p><strong>匹配否定句</strong></p>
<p>I can do it</p>
<p>I cannot do it</p>
<p>I can not do it</p>
<p>I can&#8217;t do it</p>
<p>I cant do it</p>
<p>答案</p>
<p># grep &#8220;can[n 'o]*t&#8221; file</p>
<p><strong>匹配单词book</strong></p>
<p>This file tests for book in various places, such as</p>
<p>book at the beginning of a line or</p>
<p>at the end of a line book</p>
<p>as well as the plural books and</p>
<p>handbooks.  Here are some</p>
<p>phrases that use the word in different ways:</p>
<p>&#8220;book of the year award&#8221;</p>
<p>to look for a line with the word &#8220;book&#8221;</p>
<p>A GREAT book!</p>
<p>A great book? No.</p>
<p>told them about (the books) until it</p>
<p>Here are the books that you requested</p>
<p>Yes, it is a good book for children</p>
<p>amazing that it was called a &#8220;harmful book&#8221; when</p>
<p>once you get to the end of the book, you can&#8217;t believe</p>
<p>A well-written regular expression should</p>
<p>avoid matching unrelated words,</p>
<p>such as booky (is that a word?)</p>
<p>and bookish and</p>
<p>bookworm and so on.</p>
<p>答案</p>
<p># egrep -n &#8220;^book |[ \"]book[ \!\?\"\,s)]| book$&#8221; bookwords</p>
<p><strong>匹配结尾处有一个或多个空格的行</strong></p>
<p>被括起来的是空格(  )*$</p>
<p><strong>统计空格数</strong></p>
<p>$ grep -c &#8216;^$&#8217; ch04</p>
<p><strong>匹配空行</strong>^ *$</p>
<p><strong>匹配整个行</strong>^.*$</p>
<p><strong>英文中的常用标点</strong>? . , ! ; : &#8216;</p>
<h1>6. 详解sed</h1>
<h2>6.1 引语</h2>
<p>本篇主要是让大家对sed的脚本编写有一个整体的了解，在大脑中能有个框架。</p>
<p>写脚本前一定要</p>
<p>1. 具体的分析清楚自己想做什么</p>
<p>2. 明确处理的过程</p>
<p>3. 在应用于生产环境前要反复测试</p>
<p>下面图中的示例是sed如何匹配字符串并替换</p>
<p>从图中可以看出sed首先将整个编辑脚本应用于第一个输入行，然后在读取第二个输入行并对其应用整个脚本。这种做法的优点显而易见，跟少食多餐一个性质，一顿饭吃一百个馒头恐怕你的胃就爆了，这就是内存溢出。</p>
<h2>6.2 Sed脚本的3种用途</h2>
<p><strong>1. </strong><strong>对同一文件的编辑。</strong><strong></strong></p>
<p>热身:包含了以前章节中的知识点</p>
<p>                  HORSEFEATHERS SOFTWARE PRODUCT BULLETIN</p>
<p>  DESCRIPTION</p>
<p>+   ___________</p>
<p>  BigOne Computer  offers three  software packages from the  suite</p>
<p>  of Horsefeathers  software products  &#8211;  Horsefeathers  Business</p>
<p>  BASIC, BASIC  Librarian,  and LIDO.  These software products can</p>
<p>  fill  your    requirements    for    powerful,    sophisticated,</p>
<p>  general-purpose business  software providing you with a base for</p>
<p>  software customization or development.</p>
<p>  Horsefeathers  BASIC is  BASIC optimized for use on  the  BigOne</p>
<p>  machine with UNIX  or MS-DOS operating systems.  BASIC Librarian</p>
<p>  is a full screen program editor, which also provides the ability</p>
<p>要求</p>
<p>1用sea取代所有空行</p>
<p>这个不用多说，在上次的文章中已经写过</p>
<p>s/^$/sea/g</p>
<p>2删除每行前面的空格</p>
<p>s/^  *//g</p>
<p>3删除+后的___</p>
<p>/^+  *___*/d</p>
<p>4删除在两个单词之间的多个空格</p>
<p>s/  */ /g</p>
<p>5保留.号后的多个空格</p>
<p>s/\. */\.  /g</p>
<p>6干掉,号后的空格</p>
<p>s/\,  */\,/g</p>
<p><strong>2. </strong><strong>改变一组文件</strong></p>
<p>类似于这样</p>
<p>  sed -i -e &#8217;74 s/^/#/&#8217; -i -e &#8217;76 s/^/#/&#8217; $ssh_cf</p>
<p>  sed -i &#8220;s/#UseDNS yes/UseDNS no/&#8221; $ssh_cf</p>
<p>  sed -i -e &#8217;44 s/^/#/&#8217; -i -e &#8217;48 s/^/#/&#8217; $ssh_cf</p>
<p>  sed -i &#8216;/expose_php/s/On/Off/&#8217; $fcgi_cf</p>
<p>  sed -i &#8216;/display_errors/s/On/Off/&#8217; $fcgi_cf</p>
<p>  sed -i &#8216;s#extension_dir = &#8220;./&#8221;#extension_dir = &#8220;no-debug-non-zts-20060613/&#8221;\nextension这样的脚本可以节省大量的时间，但如果写的不好造成的错误恐怕会让你花更多的时间去解决。所以制作这种脚本时最好多做测试以免以后出乱子。</p>
<p>注：这种脚本通常出现在安装程序脚本的制作上。如果经常看文档，应该对此不会陌生。</p>
<p><strong>3. </strong><strong>提取文件的内容</strong></p>
<p>例：提取C 源文件中的 main() 函数</p>
<p>$ sed -n -e &#8216;/main[[:space:]]*(/,/^}/p&#8217; sourcefile.c | more</p>
<p>注：这里的[[:space:]] 只是一个特殊的关键字，它告诉 sed 与 TAB 或空格匹配。</p>
<h2>6.3 基本sed命令</h2>
<p>想要用好sed首先就要了解它的框架，知道每一段都是干什么的。</p>
<p><code><strong><em>框架</em></strong></code><code><strong><em>: </em></strong></code><strong>[</strong><code><strong><em>address</em></strong></code><strong>]</strong><kbd><strong>s</strong></kbd><strong>/</strong><code><strong><em>pattern</em></strong></code><strong>/</strong><code><strong><em>replacement</em></strong></code><strong>/</strong><code><strong><em>flags</em></strong></code><code><strong><em></em></strong></code></p>
<p><code><strong><em> </em></strong></code></p>
<p>Flags可以看做是古代打仗作战时的令旗。</p>
<h3>6.3.1   Flags段</h3>
<p>以下是该段可能出现的参数</p>
<p>n 1-512间的一个数字，指定对第n次出现的情况进行替换</p>
<p>g 全局替换</p>
<p>p 打印</p>
<p>w 将样本写入到某个文件中</p>
<p>替换指令应用于与address匹配的行。如果没有指定地址，那么就应用于与pattern匹配的所有行。</p>
<p>Flag段中的指令和组合使用。</p>
<h3>6.3.2   replacement段</h3>
<p><strong>&amp;</strong></p>
<p>表示用正则表达式匹配的内容进行替换</p>
<p>这东西以前我非常难以理解，因为所看的大部分中文文档对此都没有过详述。</p>
<p>比如一篇文章里面有很多关键字如：社会主义。现在我想在每个社会主义后面都加一个好并且用括号括起来。</p>
<p>s/社会主义/(&amp;好）/g</p>
<p>现在大家应该明白了它的意思吧？（生产环境估计是没有中文，这里主要是为了大家好理解）</p>
<p><strong> </strong></p>
<p><strong>\n </strong></p>
<p>匹配第n个子串（n是一个数字），这个子串需要在pattern中用“\(\)”包围。</p>
<p>例现在文章中的关键字有司马光，小李，猴子。现在想变成司马光砸缸子，小李飞刀，猴子偷桃。</p>
<p>s/\(司马光\)\(小李\)\(猴子\)/\1砸缸子\2飞刀\3偷桃/</p>
<p>\ 转义特殊符号。在相关文档中提到\也可以当作换行符来用。</p>
<p>注：The backslash is generally used to escape the other metacharacters but it is also used to include a newline in a replacement string.</p>
<p><strong> </strong></p>
<p><strong>追加，插入和更改</strong><strong></strong></p>
<p>这些命令的语法在sed中不常用，因为它们必须在多行上来指定。语法如下</p>
<p><kbd>追加</kbd> [<code><em>line-address</em></code>]<kbd>a</kbd>\<br />
<code><em>text</em></code><br />
<kbd>插入</kbd> [<code><em>line-address</em></code>]<kbd>i</kbd>\<br />
<code><em>text</em></code><br />
<kbd>修改</kbd> [<code><em>address</em></code>]<kbd>c</kbd>\<br />
<code><em>text</em></code></p>
<p><strong>替换文件中不可正常输出的字符</strong><strong></strong></p>
<p>曾经使用过man 查看文档，并把文档重定向的朋友一定知道用firefox或者gedit这类工具打开重定向的文档时会出现很多小方块。那些小方块是用来调节格式的，而ff和gedit不认识而已。</p>
<p>查看不可见字符。如换行。</p>
<p>Sed –n –e “l” file</p>
<p>这时便可以看见了。针对文档拿掉那些符号即可。</p>
<p><strong> </strong></p>
<p><strong>读和写文件</strong><strong></strong></p>
<p>语法如下</p>
<p>[<code><em>line-address</em></code>]<kbd>r</kbd> <code><em>file</em></code><br />
[<code><em>address</em></code>]<kbd>w</kbd> <code><em>file</em></code></p>
<p><code>非常实用的功能。</code></p>
<p><code>例如在代码中结尾处有</code><code>;</code><code>的地方给予提示。</code></p>
<p><code>代码如下</code></p>
<p><code>/;$/r file</code></p>
<p><code>执行效果</code></p>
<p><code>sed -f scr index.php</code></p>
<p><code>&lt;?php</code></p>
<p><code>/**</code></p>
<p><code> * Front to the WordPress application. This file doesn't do anything, but loads</code></p>
<p><code> * wp-blog-header.php which does and tells WordPress to load the theme.</code></p>
<p><code> *</code></p>
<p><code> * @package WordPress</code></p>
<p><code> */</code></p>
<p><code> </code></p>
<p><code>/**</code></p>
<p><code> * Tells WordPress to load the WordPress theme and output it.</code></p>
<p><code> *</code></p>
<p><code> * @var bool</code></p>
<p><code> */</code></p>
<p><code>define('WP_USE_THEMES', true);</code></p>
<p><code>this is (;)</code></p>
<p><code> </code></p>
<p><code>/** Loads the WordPress Environment and Template */</code></p>
<p><code>require('./wp-blog-header.php');</code></p>
<p><code>this is (;)</code></p>
<p>好，现在来看看如何写文件</p>
<p>有一份人员清单，里面包括必要的信息，现在按地理位置进行划分。</p>
<p>清单如下</p>
<p><code>Adams, Henrietta        Northeast</code></p>
<p><code>Banks, Freda            South</code></p>
<p><code>Dennis, Jim             Midwest</code></p>
<p><code>Garvey, Bill            Northeast</code></p>
<p><code>Jeffries, Jane          West</code></p>
<p><code>Madison, Sylvia         Midwest</code></p>
<p><code>Sommes, Tom             South</code></p>
<p>代码如下</p>
<pre>/Northeast$/{</pre>
<pre>s///</pre>
<pre>w region.northeast</pre>
<pre>}</pre>
<pre>/South$/{</pre>
<pre>s///</pre>
<pre>w region.south</pre>
<pre>}</pre>
<pre>/Midwest$/{</pre>
<pre>s///</pre>
<pre>w region.midwest</pre>
<pre>}</pre>
<p>/West$/{</p>
<p>s///</p>
<p>w region.west</p>
<p>}</p>
<p><strong> </strong></p>
<p><strong>字符串的转换</strong><strong></strong></p>
<p>将abc中的每个字符都转换成xyz中的等价字符。</p>
<p>y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/</p>
<p><strong>打印行号</strong><strong></strong></p>
<p>我想知道require都在哪几行出现，实现这个功能需要用到=</p>
<p>代码如下</p>
<pre>/require/{</pre>
<pre>=</pre>
<pre>p</pre>
<p>}</p>
<p>执行效果</p>
<p># sed -n -f scr index.php</p>
<p>17</p>
<p>require(&#8216;./wp-blog-header.php&#8217;);</p>
<p><strong> </strong></p>
<p><strong>打印</strong><strong>n</strong><strong>行后退出</strong><strong></strong></p>
<p>Sed &#8217;10q&#8217; file</p>
<p>打印10行后退出。</p>
<h2>6.4 Sed中的高级命令</h2>
<h3>6.4.1   引语</h3>
<p>在写这部分前，我对那些命令可以说是没有丝毫了解的，只能看着e文档死磕，每个命令都花费不少时间来理解，如果有错误请一定提出。</p>
<p>最后引用作者的一句话You can consider yourself a true sed-master once you understand the commands presented here.当你把这些命令玩明白，你就可以说精通sed了。</p>
<h3>6.4.2   改变不连贯的语句</h3>
<p>本例中要用的是N命令。N通过读取新的输入行，并将它添加到pattern段的现有内容之后来创建多行replacement空间。通过语言实在很难描述清楚，大家来看底下的例子</p>
<pre>Consult Section 3.1 in the Owner and Operator</pre>
<pre>Guide for a description of the tape drives</pre>
<pre>available on your system.</pre>
<pre> </pre>
<pre>Look in the Owner and Operator Guide shipped with your system.</pre>
<pre> </pre>
<pre>Two manuals are provided including the Owner and</pre>
<pre>Operator Guide and the User Guide.</pre>
<pre> </pre>
<p>The Owner and Operator Guide is shipped with your system.</p>
<pre>在这篇文中中我想把Owner and Operator Guide都变为just do it 。这里我用橙色标出了最难解决的部分。N就是用来解决他们的。</pre>
<pre>现在来编写脚本。</pre>
<pre>s/Owner and Operator Guide/just do it</pre>
<pre>用这行语句先把比较简单的两行解决掉。</pre>
<pre>/Owner/{</pre>
<pre>N</pre>
<pre>s/Owner and Operator\nGuide/just do it\</pre>
<pre>找到Owner and Operator就给我结束，然后去下一行找Guide</pre>
<pre>/</pre>
<pre>}</pre>
<pre>注：\n是换行符，在这里起到分隔的作用。</pre>
<pre>实例中Owner and Operator共出现4次，所以下面我将用1，2，3，4来代替，这样也比较清楚。</pre>
<pre>重新执行脚本。可以发现1，2，4都已经被替换了，但是3还是没有变化，问题出在哪里呢？</pre>
<pre>s/Owner and Operator\nGuide/just do it\</pre>
<pre>对了，就是红色的部分。那如何解决呢？用或来解决</pre>
<pre>s/((Owner and Operator|Owner and)|(\nGuide|\nOperator Guide))/just do it\</pre>
<pre>实验后发现并没有效果，所以只能把语句分开写了，如果哪位朋友用一句话实现了记得告诉一下。</pre>
<pre>全部代码如下</pre>
<pre>s/Owner and Operator Guide/just do it/</pre>
<pre>/Owner/{</pre>
<pre>N</pre>
<pre>s/Owner and Operator\nGuide/just do it\</pre>
<pre>/</pre>
<pre>}</pre>
<pre>/Owner and/{</pre>
<pre>N</pre>
<pre>s/Owner and\nOperator Guide/just do it\</pre>
<pre>/</pre>
<pre>}</pre>
<pre>后来又把代码改良了一下</pre>
<pre>s/Owner and Operator Guide/just do it/</pre>
<pre>/Owner/{</pre>
<pre>N</pre>
<pre>s/\n/ /</pre>
<pre>精华就在这里了，哈哈，实际上是偷梁换柱把换行符给弄成空格了。</pre>
<pre>s/Owner and Operator Guide/just do it\</pre>
<pre>/</pre>
<pre>}</pre>
<h3>6.4.3   匪夷所思的删除</h3>
<pre>文章中的空行不合理，现在进行调整使其合理。这次要用到的指令是D</pre>
<pre>文章如下</pre>
<pre>This line is followed by 1 blank line.</pre>
<pre> </pre>
<pre>This line is followed by 2 blank lines.</pre>
<pre> </pre>
<pre> </pre>
<pre>This line is followed by 3 blank lines.</pre>
<pre> </pre>
<pre> </pre>
<pre> </pre>
<pre>This line is followed by 4 blank lines.</pre>
<pre> </pre>
<pre> </pre>
<pre> </pre>
<pre> </pre>
<pre>This is the end.</pre>
<pre>我想得到的效果是</pre>
<pre>This line is followed by 1 blank line.</pre>
<pre> </pre>
<pre>This line is followed by 2 blank lines.</pre>
<pre> </pre>
<pre>This line is followed by 3 blank lines.</pre>
<pre> </pre>
<pre>This line is followed by 4 blank lines.</pre>
<pre> </pre>
<pre>This is the end.</pre>
<pre>代码如下</pre>
<pre>/^$/{</pre>
<pre>N</pre>
<pre>/^\n$/d</pre>
<pre>}</pre>
<pre>在执行之前希望各位能仔细想想该脚本的含义是什么。</pre>
<pre>执行后效果如下</pre>
<pre># sed -f scr sample</pre>
<pre>This line is followed by 1 blank line.</pre>
<pre> </pre>
<pre>This line is followed by 2 blank lines.</pre>
<pre>This line is followed by 3 blank lines.</pre>
<pre> </pre>
<pre>This line is followed by 4 blank lines.</pre>
<pre>This is the end.</pre>
<pre>好，现在我来分析一下产生这种效果的原因。让我们先来看一下sample文档吧</pre>
<pre># sed -n -e "l" sample</pre>
<pre>This line is followed by 1 blank line.$</pre>
<pre>$</pre>
<pre>This line is followed by 2 blank lines.$</pre>
<pre>$</pre>
<pre>$</pre>
<pre>This line is followed by 3 blank lines.$</pre>
<pre>$</pre>
<pre>$</pre>
<pre>$</pre>
<pre>This line is followed by 4 blank lines.$</pre>
<pre>$</pre>
<pre>$</pre>
<pre>$</pre>
<pre>$</pre>
<pre>This is the end.$</pre>
<pre>在代码中我用^$匹配空行，并使用了N把下面出现的空行也匹配上（通俗点讲N的作用就是把下一行拉上来看是不是空行），然后使用d来清除。</pre>
<pre>为了方便说明我将5句话按从上到下的顺序分为1，2，3，4，5.</pre>
<pre>代码在1，2匹配时条件不成立，因为下一行是2不为空，所以N不成立，于是跳。</pre>
<pre>到了2，3行后条件匹配，这里我们很清晰的看到有3个空行，条件成立！于是2个空行被干掉了。</pre>
<pre>现在到了3，4之间又有两个空行被干掉了，这时的情况和在1，2之间的一样，N不成立于是最后一个空行被放生，3，4间便有了空行。</pre>
<pre>现在到了4，5之间，我想大家应该能推测出结果就是空行被全部干掉了。</pre>
<pre>这时，用D替代原来d的位置，就可以得到理想的效果了。当D遇到两个空行时只删除两个空行中的第一个，当一个空行后面跟我有文本时就正常输出。</pre>
<h2>6.5 Sed补遗</h2>
<pre>h    复制进暂存区，一次只能存一行
    Sed '1,5h' passwd
H    追加到暂存区,可以多行
    Sed '1,5H' passwd
$G    粘贴到最后一行
    Sed '$G'
$g    使用暂存区覆盖最后一行
    Sed -e '1,5h' -e '$g' passwd    
按顺序执行｛｝括号里的命令
    Sed '/^root/{ s/^root/blues/;s/bash$/nologin/; }'    passwd
    查找以 root 开头的行把root 和bash替换成 blues和nologins
sed -r    使用扩展正则字符集
    sed -r 's/^([a-z]+)([^a-z].*[^a-z])([a-z]+)$/\3\2\1/' passwd
    把passwd文件的首末单词互换，并输出到屏幕
    sed -r 's/^([a-zA-Z0-9_]+):.*/\1/' passwd    只输出用户名</pre>
<h2>6.6 sed技巧小结</h2>
<p>删除行首空格<br />
   sed &#8217;s/^[ ]*//g&#8217; filename<br />
   sed &#8216;s/^ *//g&#8217; filename<br />
   sed &#8216;s/^[[:space:]]*//g&#8217; filename<br />
1、删除行首空格<br />
   sed &#8217;s/^[ ]*//g&#8217; filename<br />
   sed &#8216;s/^ *//g&#8217; filename<br />
   sed &#8216;s/^[[:space:]]*//g&#8217; filename<br />
2、行后和行前添加新行<br />
   行后：sed &#8216;s/pattern/&amp;\n/g&#8217; filename<br />
   行前：sed &#8216;s/pattern/\n&amp;/g&#8217; filename<br />
   &amp;代表pattern<br />
3、使用变量替换(使用双引号)<br />
    sed -e &#8220;s/$var1/$var2/g&#8221; filename<br />
4、在第一行前插入文本<br />
    sed -i &#8217;1 i\插入字符串&#8217; filename<br />
5、在最后一行插入<br />
    sed -i &#8216;$ a\插入字符串&#8217; filename<br />
6、在匹配行前插入<br />
    sed -i &#8216;/pattern/ i &#8220;插入字符串&#8221;&#8216; filename<br />
7、在匹配行后插入<br />
   sed -i &#8216;/pattern/ a &#8220;插入字符串&#8221;&#8216; filename<br />
8、删除文本中空行和空格组成的行以及#号注释的行<br />
   grep -v ^# filename | sed /^[[:space:]]*$/d | sed /^$/d</p>
<h2>6.7 SED单行脚本快速参考（Unix 流编辑器）</h2>
<p>英文标题：USEFUL ONE-LINE SCRIPTS FOR SED (Unix stream editor)<br />
原标题：HANDY ONE-LINERS FOR SED (Unix stream editor)</p>
<p>整理：Eric Pement  - 电邮：pemente[at]northpark[dot]edu         版本5.5<br />
译者：Joe Hong     - 电邮：hq00e[at]126[dot]com</p>
<p>在以下地址可找到本文档的最新（英文）版本：<br />
   <a href="http://sed.sourceforge.net/sed1line.txt" target="_blank">http://sed.sourceforge.net/sed1line.txt</a><br />
   <a href="http://www.pement.org/sed/sed1line.txt" target="_blank">http://www.pement.org/sed/sed1line.txt</a></p>
<h3>6.7.1   文本间隔：</h3>
<p>&#8212;&#8212;&#8211;</p>
<p> # 在每一行后面增加一空行</p>
<p> sed G</p>
<p> # 将原来的所有空行删除并在每一行后面增加一空行。</p>
<p> # 这样在输出的文本中每一行后面将有且只有一空行。</p>
<p> sed &#8216;/^$/d;G&#8217;</p>
<p> # 在每一行后面增加两行空行</p>
<p> sed &#8216;G;G&#8217;</p>
<p> # 将第一个脚本所产生的所有空行删除（即删除所有偶数行）</p>
<p> sed &#8216;n;d&#8217;</p>
<p> # 在匹配式样“regex”的行之前插入一空行</p>
<p> sed &#8216;/regex/{x;p;x;}&#8217;</p>
<p> # 在匹配式样“regex”的行之后插入一空行</p>
<p> sed &#8216;/regex/G&#8217;</p>
<p> # 在匹配式样“regex”的行之前和之后各插入一空行</p>
<p> sed &#8216;/regex/{x;p;x;G;}&#8217;</p>
<h3>6.7.2   编号：</h3>
<p>&#8212;&#8212;&#8211;</p>
<p> # 为文件中的每一行进行编号（简单的左对齐方式）。这里使用了“制表符”</p>
<p> # （tab，见本文末尾关于&#8217;\t&#8217;的用法的描述）而不是空格来对齐边缘。</p>
<p> sed = filename | sed &#8216;N;s/\n/\t/&#8217;</p>
<p> # 对文件中的所有行编号（行号在左，文字右端对齐）。</p>
<p> sed = filename | sed &#8216;N; s/^/     /; s/ *\(.\{6,\}\)\n/\1  /&#8217;</p>
<p> # 对文件中的所有行编号，但只显示非空白行的行号。</p>
<p> sed &#8216;/./=&#8217; filename | sed &#8216;/./N; s/\n/ /&#8217;</p>
<p> # 计算行数 （模拟 &#8220;wc -l&#8221;）</p>
<p> sed -n &#8216;$=&#8217;</p>
<h3>6.7.3   文本转换和替代：</h3>
<p>&#8212;&#8212;&#8211;</p>
<p> # Unix环境：转换DOS的新行符（CR/LF）为Unix格式。</p>
<p> sed &#8216;s/.$//&#8217;                     # 假设所有行以CR/LF结束</p>
<p> sed &#8216;s/^M$//&#8217;                    # 在bash/tcsh中，将按Ctrl-M改为按Ctrl-V</p>
<p> sed &#8216;s/\x0D$//&#8217;                  # ssed、gsed 3.02.80，及更高版本</p>
<p> # Unix环境：转换Unix的新行符（LF）为DOS格式。</p>
<p> sed &#8220;s/$/`echo -e \\\r`/&#8221;        # 在ksh下所使用的命令</p>
<p> sed &#8216;s/$&#8217;&#8221;/`echo \\\r`/&#8221;         # 在bash下所使用的命令</p>
<p> sed &#8220;s/$/`echo \\\r`/&#8221;           # 在zsh下所使用的命令</p>
<p> sed &#8216;s/$/\r/&#8217;                    # gsed 3.02.80 及更高版本</p>
<p> # DOS环境：转换Unix新行符（LF）为DOS格式。</p>
<p> sed &#8220;s/$//&#8221;                      # 方法 1</p>
<p> sed -n p                         # 方法 2</p>
<p> # DOS环境：转换DOS新行符（CR/LF）为Unix格式。</p>
<p> # 下面的脚本只对UnxUtils sed 4.0.7 及更高版本有效。要识别UnxUtils版本的</p>
<p> #  sed可以通过其特有的“&#8211;text”选项。你可以使用帮助选项（“&#8211;help”）看</p>
<p> # 其中有无一个“&#8211;text”项以此来判断所使用的是否是UnxUtils版本。其它DOS</p>
<p> # 版本的的sed则无法进行这一转换。但可以用“tr”来实现这一转换。</p>
<p> sed &#8220;s/\r//&#8221; infile &gt;outfile     # UnxUtils sed v4.0.7 或更高版本</p>
<p> tr -d \r &lt;infile &gt;outfile        # GNU tr 1.22 或更高版本</p>
<p> # 将每一行前导的“空白字符”（空格，制表符）删除</p>
<p> # 使之左对齐</p>
<p> sed &#8216;s/^[ \t]*//&#8217;                # 见本文末尾关于&#8217;\t&#8217;用法的描述</p>
<p> # 将每一行拖尾的“空白字符”（空格，制表符）删除</p>
<p> sed &#8216;s/[ \t]*$//&#8217;                # 见本文末尾关于&#8217;\t&#8217;用法的描述</p>
<p> # 将每一行中的前导和拖尾的空白字符删除</p>
<p> sed &#8216;s/^[ \t]*//;s/[ \t]*$//&#8217;</p>
<p> # 在每一行开头处插入5个空格（使全文向右移动5个字符的位置）</p>
<p> sed &#8216;s/^/     /&#8217;</p>
<p> # 以79个字符为宽度，将所有文本右对齐</p>
<p> sed -e :a -e &#8216;s/^.\{1,78\}$/ &amp;/;ta&#8217;  # 78个字符外加最后的一个空格</p>
<p> # 以79个字符为宽度，使所有文本居中。在方法1中，为了让文本居中每一行的前</p>
<p> # 头和后头都填充了空格。 在方法2中，在居中文本的过程中只在文本的前面填充</p>
<p> # 空格，并且最终这些空格将有一半会被删除。此外每一行的后头并未填充空格。</p>
<p> sed  -e :a -e &#8216;s/^.\{1,77\}$/ &amp; /;ta&#8217;                     # 方法1</p>
<p> sed  -e :a -e &#8216;s/^.\{1,77\}$/ &amp;/;ta&#8217; -e &#8216;s/\( *\)\1/\1/&#8217;  # 方法2</p>
<p> # 在每一行中查找字串“foo”，并将找到的“foo”替换为“bar”</p>
<p> sed &#8216;s/foo/bar/&#8217;                 # 只替换每一行中的第一个“foo”字串</p>
<p> sed &#8216;s/foo/bar/4&#8242;                # 只替换每一行中的第四个“foo”字串</p>
<p> sed &#8216;s/foo/bar/g&#8217;                # 将每一行中的所有“foo”都换成“bar”</p>
<p> sed &#8216;s/\(.*\)foo\(.*foo\)/\1bar\2/&#8217; # 替换倒数第二个“foo”</p>
<p> sed &#8216;s/\(.*\)foo/\1bar/&#8217;            # 替换最后一个“foo”</p>
<p> # 只在行中出现字串“baz”的情况下将“foo”替换成“bar”</p>
<p> sed &#8216;/baz/s/foo/bar/g&#8217;</p>
<p> # 将“foo”替换成“bar”，并且只在行中未出现字串“baz”的情况下替换</p>
<p> sed &#8216;/baz/!s/foo/bar/g&#8217;</p>
<p> # 不管是“scarlet”“ruby”还是“puce”，一律换成“red”</p>
<p> sed &#8216;s/scarlet/red/g;s/ruby/red/g;s/puce/red/g&#8217;  #对多数的sed都有效</p>
<p> gsed &#8216;s/scarlet\|ruby\|puce/red/g&#8217;               # 只对GNU sed有效</p>
<p> # 倒置所有行，第一行成为最后一行，依次类推（模拟“tac”）。</p>
<p> # 由于某些原因，使用下面命令时HHsed v1.5会将文件中的空行删除</p>
<p> sed &#8217;1!G;h;$!d&#8217;               # 方法1</p>
<p> sed -n &#8217;1!G;h;$p&#8217;             # 方法2</p>
<p> # 将行中的字符逆序排列，第一个字成为最后一字，……（模拟“rev”）</p>
<p> sed &#8216;/\n/!G;s/\(.\)\(.*\n\)/&amp;\2\1/;//D;s/.//&#8217;</p>
<p> # 将每两行连接成一行（类似“paste”）</p>
<p> sed &#8216;$!N;s/\n/ /&#8217;</p>
<p> # 如果当前行以反斜杠“\”结束，则将下一行并到当前行末尾</p>
<p> # 并去掉原来行尾的反斜杠</p>
<p> sed -e :a -e &#8216;/\\$/N; s/\\\n//; ta&#8217;</p>
<p> # 如果当前行以等号开头，将当前行并到上一行末尾</p>
<p> # 并以单个空格代替原来行头的“=”</p>
<p> sed -e :a -e &#8216;$!N;s/\n=/ /;ta&#8217; -e &#8216;P;D&#8217;</p>
<p> # 为数字字串增加逗号分隔符号，将“1234567”改为“1,234,567”</p>
<p> gsed &#8216;:a;s/\B[0-9]\{3\}\&gt;/,&amp;/;ta&#8217;                     # GNU sed</p>
<p> sed -e :a -e &#8216;s/\(.*[0-9]\)\([0-9]\{3\}\)/\1,\2/;ta&#8217;  # 其他sed</p>
<p> # 为带有小数点和负号的数值增加逗号分隔符（GNU sed）</p>
<p> gsed -r &#8216;:a;s/(^|[^0-9.])([0-9]+)([0-9]{3})/\1\2,\3/g;ta&#8217;</p>
<p> # 在每5行后增加一空白行（在第5，10，15，20，等行后增加一空白行）</p>
<p> gsed &#8217;0~5G&#8217;                      # 只对GNU sed有效</p>
<p> sed &#8216;n;n;n;n;G;&#8217;                 # 其他sed</p>
<h3>6.7.4   选择性地显示特定行：</h3>
<p>&#8212;&#8212;&#8211;</p>
<p> # 显示文件中的前10行 （模拟“head”的行为）</p>
<p> sed 10q</p>
<p> # 显示文件中的第一行 （模拟“head -1”命令）</p>
<p> sed q</p>
<p> # 显示文件中的最后10行 （模拟“tail”）</p>
<p> sed -e :a -e &#8216;$q;N;11,$D;ba&#8217;</p>
<p> # 显示文件中的最后2行（模拟“tail -2”命令）</p>
<p> sed &#8216;$!N;$!D&#8217;</p>
<p> # 显示文件中的最后一行（模拟“tail -1”）</p>
<p> sed &#8216;$!d&#8217;                        # 方法1</p>
<p> sed -n &#8216;$p&#8217;                      # 方法2</p>
<p> # 显示文件中的倒数第二行</p>
<p> sed -e &#8216;$!{h;d;}&#8217; -e x              # 当文件中只有一行时，输入空行</p>
<p> sed -e &#8217;1{$q;}&#8217; -e &#8216;$!{h;d;}&#8217; -e x  # 当文件中只有一行时，显示该行</p>
<p> sed -e &#8217;1{$d;}&#8217; -e &#8216;$!{h;d;}&#8217; -e x  # 当文件中只有一行时，不输出</p>
<p> # 只显示匹配正则表达式的行（模拟“grep”）</p>
<p> sed -n &#8216;/regexp/p&#8217;               # 方法1</p>
<p> sed &#8216;/regexp/!d&#8217;                 # 方法2</p>
<p> # 只显示“不”匹配正则表达式的行（模拟“grep -v”）</p>
<p> sed -n &#8216;/regexp/!p&#8217;              # 方法1，与前面的命令相对应</p>
<p> sed &#8216;/regexp/d&#8217;                  # 方法2，类似的语法</p>
<p> # 查找“regexp”并将匹配行的上一行显示出来，但并不显示匹配行</p>
<p> sed -n &#8216;/regexp/{g;1!p;};h&#8217;</p>
<p> # 查找“regexp”并将匹配行的下一行显示出来，但并不显示匹配行</p>
<p> sed -n &#8216;/regexp/{n;p;}&#8217;</p>
<p> # 显示包含“regexp”的行及其前后行，并在第一行之前加上“regexp”所</p>
<p> # 在行的行号 （类似“grep -A1 -B1”）</p>
<p> sed -n -e &#8216;/regexp/{=;x;1!p;g;$!N;p;D;}&#8217; -e h</p>
<p> # 显示包含“AAA”、“BBB”或“CCC”的行（任意次序）</p>
<p> sed &#8216;/AAA/!d; /BBB/!d; /CCC/!d&#8217;  # 字串的次序不影响结果</p>
<p> # 显示包含“AAA”、“BBB”和“CCC”的行（固定次序）</p>
<p> sed &#8216;/AAA.*BBB.*CCC/!d&#8217;</p>
<p> # 显示包含“AAA”“BBB”或“CCC”的行 （模拟“egrep”）</p>
<p> sed -e &#8216;/AAA/b&#8217; -e &#8216;/BBB/b&#8217; -e &#8216;/CCC/b&#8217; -e d    # 多数sed</p>
<p> gsed &#8216;/AAA\|BBB\|CCC/!d&#8217;                        # 对GNU sed有效</p>
<p> # 显示包含“AAA”的段落 （段落间以空行分隔）</p>
<p> # HHsed v1.5 必须在“x;”后加入“G;”，接下来的3个脚本都是这样</p>
<p> sed -e &#8216;/./{H;$!d;}&#8217; -e &#8216;x;/AAA/!d;&#8217;</p>
<p> # 显示包含“AAA”“BBB”和“CCC”三个字串的段落 （任意次序）</p>
<p> sed -e &#8216;/./{H;$!d;}&#8217; -e &#8216;x;/AAA/!d;/BBB/!d;/CCC/!d&#8217;</p>
<p> # 显示包含“AAA”、“BBB”、“CCC”三者中任一字串的段落（任意次序）</p>
<p> sed -e &#8216;/./{H;$!d;}&#8217; -e &#8216;x;/AAA/b&#8217; -e &#8216;/BBB/b&#8217; -e &#8216;/CCC/b&#8217; -e d</p>
<p> gsed &#8216;/./{H;$!d;};x;/AAA\|BBB\|CCC/b;d&#8217;         # 只对GNU sed有效</p>
<p> # 显示包含65个或以上字符的行</p>
<p> sed -n &#8216;/^.\{65\}/p&#8217;</p>
<p> # 显示包含65个以下字符的行</p>
<p> sed -n &#8216;/^.\{65\}/!p&#8217;            # 方法1，与上面的脚本相对应</p>
<p> sed &#8216;/^.\{65\}/d&#8217;                # 方法2，更简便一点的方法</p>
<p> # 显示部分文本——从包含正则表达式的行开始到最后一行结束</p>
<p> sed -n &#8216;/regexp/,$p&#8217;</p>
<p> # 显示部分文本——指定行号范围（从第8至第12行，含8和12行）</p>
<p> sed -n &#8217;8,12p&#8217;                   # 方法1</p>
<p> sed &#8217;8,12!d&#8217;                     # 方法2</p>
<p> # 显示第52行</p>
<p> sed -n &#8217;52p&#8217;                     # 方法1</p>
<p> sed &#8217;52!d&#8217;                       # 方法2</p>
<p> sed &#8217;52q;d&#8217;                      # 方法3, 处理大文件时更有效率</p>
<p> # 从第3行开始，每7行显示一次   </p>
<p> gsed -n &#8217;3~7p&#8217;                   # 只对GNU sed有效</p>
<p> sed -n &#8217;3,${p;n;n;n;n;n;n;}&#8217;     # 其他sed</p>
<p> # 显示两个正则表达式之间的文本（包含）</p>
<p> sed -n &#8216;/Iowa/,/Montana/p&#8217;       # 区分大小写方式</p>
<h3>6.7.5   选择性地删除特定行：</h3>
<p>&#8212;&#8212;&#8211;</p>
<p> # 显示通篇文档，除了两个正则表达式之间的内容</p>
<p> sed &#8216;/Iowa/,/Montana/d&#8217;</p>
<p> # 删除文件中相邻的重复行（模拟“uniq”）</p>
<p> # 只保留重复行中的第一行，其他行删除</p>
<p> sed &#8216;$!N; /^\(.*\)\n\1$/!P; D&#8217;</p>
<p> # 删除文件中的重复行，不管有无相邻。注意hold space所能支持的缓存</p>
<p> # 大小，或者使用GNU sed。</p>
<p> sed -n &#8216;G; s/\n/&amp;&amp;/; /^\([ -~]*\n\).*\n\1/d; s/\n//; h; P&#8217;</p>
<p> # 删除除重复行外的所有行（模拟“uniq -d”）</p>
<p> sed &#8216;$!N; s/^\(.*\)\n\1$/\1/; t; D&#8217;</p>
<p> # 删除文件中开头的10行</p>
<p> sed &#8217;1,10d&#8217;</p>
<p> # 删除文件中的最后一行</p>
<p> sed &#8216;$d&#8217;</p>
<p> # 删除文件中的最后两行</p>
<p> sed &#8216;N;$!P;$!D;$d&#8217;</p>
<p> # 删除文件中的最后10行</p>
<p> sed -e :a -e &#8216;$d;N;2,10ba&#8217; -e &#8216;P;D&#8217;   # 方法1</p>
<p> sed -n -e :a -e &#8217;1,10!{P;N;D;};N;ba&#8217;  # 方法2</p>
<p> # 删除8的倍数行</p>
<p> gsed &#8217;0~8d&#8217;                           # 只对GNU sed有效</p>
<p> sed &#8216;n;n;n;n;n;n;n;d;&#8217;                # 其他sed</p>
<p> # 删除匹配式样的行</p>
<p> sed &#8216;/pattern/d&#8217;                      # 删除含pattern的行。当然pattern</p>
<p>                                       # 可以换成任何有效的正则表达式</p>
<p> # 删除文件中的所有空行（与“grep &#8216;.&#8217; ”效果相同）</p>
<p> sed &#8216;/^$/d&#8217;                           # 方法1</p>
<p> sed &#8216;/./!d&#8217;                           # 方法2</p>
<p> # 只保留多个相邻空行的第一行。并且删除文件顶部和尾部的空行。</p>
<p> # （模拟“cat -s”）</p>
<p> sed &#8216;/./,/^$/!d&#8217;        #方法1，删除文件顶部的空行，允许尾部保留一空行</p>
<p> sed &#8216;/^$/N;/\n$/D&#8217;      #方法2，允许顶部保留一空行，尾部不留空行</p>
<p> # 只保留多个相邻空行的前两行。</p>
<p> sed &#8216;/^$/N;/\n$/N;//D&#8217;</p>
<p> # 删除文件顶部的所有空行</p>
<p> sed &#8216;/./,$!d&#8217;</p>
<p> # 删除文件尾部的所有空行</p>
<p> sed -e :a -e &#8216;/^\n*$/{$d;N;ba&#8217; -e &#8216;}&#8217;  # 对所有sed有效</p>
<p> sed -e :a -e &#8216;/^\n*$/N;/\n$/ba&#8217;        # 同上，但只对 gsed 3.02.*有效</p>
<p> # 删除每个段落的最后一行</p>
<p> sed -n &#8216;/^$/{p;h;};/./{x;/./p;}&#8217;</p>
<h3>6.7.6   特殊应用：</h3>
<p>&#8212;&#8212;&#8211;</p>
<p> # 移除手册页（man page）中的nroff标记。在Unix System V或bash shell下使</p>
<p> # 用&#8217;echo&#8217;命令时可能需要加上 -e 选项。</p>
<p> sed &#8220;s/.`echo \\\b`//g&#8221;    # 外层的双括号是必须的（Unix环境）</p>
<p> sed &#8216;s/.^H//g&#8217;             # 在bash或tcsh中, 按 Ctrl-V 再按 Ctrl-H</p>
<p> sed &#8216;s/.\x08//g&#8217;           # sed 1.5，GNU sed，ssed所使用的十六进制的表示方法</p>
<p> # 提取新闻组或 e-mail 的邮件头</p>
<p> sed &#8216;/^$/q&#8217;                # 删除第一行空行后的所有内容</p>
<p> # 提取新闻组或 e-mail 的正文部分</p>
<p> sed &#8217;1,/^$/d&#8217;              # 删除第一行空行之前的所有内容</p>
<p> # 从邮件头提取“Subject”（标题栏字段），并移除开头的“Subject:”字样</p>
<p> sed &#8216;/^Subject: */!d; s///;q&#8217;</p>
<p> # 从邮件头获得回复地址</p>
<p> sed &#8216;/^Reply-To:/q; /^From:/h; /./d;g;q&#8217;</p>
<p> # 获取邮件地址。在上一个脚本所产生的那一行邮件头的基础上进一步的将非电邮</p>
<p> # 地址的部分剃除。（见上一脚本）</p>
<p> sed &#8216;s/ *(.*)//; s/&gt;.*//; s/.*[:&lt;] *//&#8217;</p>
<p> # 在每一行开头加上一个尖括号和空格（引用信息）</p>
<p> sed &#8216;s/^/&gt; /&#8217;</p>
<p> # 将每一行开头处的尖括号和空格删除（解除引用）</p>
<p> sed &#8216;s/^&gt; //&#8217;</p>
<p> # 移除大部分的HTML标签（包括跨行标签）</p>
<p> sed -e :a -e &#8216;s/&lt;[^&gt;]*&gt;//g;/&lt;/N;//ba&#8217;</p>
<p> # 将分成多卷的uuencode文件解码。移除文件头信息，只保留uuencode编码部分。</p>
<p> # 文件必须以特定顺序传给sed。下面第一种版本的脚本可以直接在命令行下输入；</p>
<p> # 第二种版本则可以放入一个带执行权限的shell脚本中。（由Rahul Dhesi的一</p>
<p> # 个脚本修改而来。）</p>
<p> sed &#8216;/^end/,/^begin/d&#8217; file1 file2 &#8230; fileX | uudecode   # vers. 1</p>
<p> sed &#8216;/^end/,/^begin/d&#8217; &#8220;$@&#8221; | uudecode                    # vers. 2</p>
<p> # 将文件中的段落以字母顺序排序。段落间以（一行或多行）空行分隔。GNU sed使用</p>
<p> # 字元“\v”来表示垂直制表符，这里用它来作为换行符的占位符——当然你也可以</p>
<p> # 用其他未在文件中使用的字符来代替它。</p>
<p> sed &#8216;/./{H;d;};x;s/\n/={NL}=/g&#8217; file | sort | sed &#8217;1s/={NL}=//;s/={NL}=/\n/g&#8217;</p>
<p> gsed &#8216;/./{H;d};x;y/\n/\v/&#8217; file | sort | sed &#8217;1s/\v//;y/\v/\n/&#8217;</p>
<p> # 分别压缩每个.TXT文件，压缩后删除原来的文件并将压缩后的.ZIP文件</p>
<p> # 命名为与原来相同的名字（只是扩展名不同）。（DOS环境：“dir /b”</p>
<p> # 显示不带路径的文件名）。</p>
<p> echo @echo off &gt;zipup.bat</p>
<p> dir /b *.txt | sed &#8220;s/^\(.*\)\.TXT/pkzip -mo \1 \1.TXT/&#8221; &gt;&gt;zipup.bat</p>
<h3>6.7.7   使用SED：</h3>
<p>Sed接受一个或多个编辑命令，并且每读入一行后就依次应用这些命令。当读入第一行输入后，sed对其应用所有的命令，然后将结果输出。接着再读入第二行输入，对其应用所有的命令……并重复这个过程。上一个例子中sed由标准输入设备（即命令解释器，通常是以管道输入的形式）获得输入。在命令行给出一个或多个文件名作为参数时，这些文件取代标准输入设备成为sed的输入。sed的输出将被送到标准输出（显示器）。因此：</p>
<p> cat filename | sed &#8217;10q&#8217;         # 使用管道输入</p>
<p> sed &#8217;10q&#8217; filename               # 同样效果，但不使用管道输入</p>
<p> sed &#8217;10q&#8217; filename &gt; newfile     # 将输出转移（重定向）到磁盘上</p>
<p>要了解sed命令的使用说明，包括如何通过脚本文件（而非从命令行）来使用这些命令，请参阅《sed &amp; awk》第二版，作者Dale Dougherty和Arnold Robbins（O&#8217;Reilly，1997；<a href="http://www.ora.com/" target="_blank">http://www.ora.com</a>），《UNIX Text Processing》，作者Dale Dougherty和Tim O&#8217;Reilly（Hayden Books，1987）或者是Mike Arst写的教程——压缩包的名称是“U-SEDIT2.ZIP”（在许多站点上都找得到）。要发掘sed的潜力，则必须对“正则表达式”有足够的理解。正则表达式的资料可以看《Mastering Regular Expressions》作者Jeffrey Friedl（O&#8217;reilly 1997）。Unix系统所提供的手册页（“man”）也会有所帮助（试一下这些命令“man sed”、“man regexp”，或者看“man ed”中关于正则表达式的部分），但手册提供的信息比较“抽象”——这也是它一直为人所诟病的。不过，它本来就不是用来教初学者如何使用sed或正则表达式的教材，而只是为那些熟悉这些工具的人提供的一些文本参考。</p>
<p><strong>括号语法：</strong>前面的例子对sed命令基本上都使用单引号（&#8217;&#8230;&#8217;）而非双引号（&#8221;&#8230;&#8221;）这是因为sed通常是在Unix平台上使用。单引号下，Unix的shell（命令解释器）不会对美元符（$）和后引号（`&#8230;`）进行解释和执行。而在双引号下美元符会被展开为变量或参数的值，后引号中的命令被执行并以输出的结果代替后引号中的内容。而在“csh”及其衍生的shell中使用感叹号（!）时需要在其前面加上转义用的反斜杠（就像这样：\!）以保证上面所使用的例子能正常运行（包括使用单引号的情况下）。DOS版本的Sed则一律使用双引号（&#8221;&#8230;&#8221;）而不是引号来圈起命令。</p>
<p><strong>&#8216;\t&#8217;</strong><strong>的用法：</strong>为了使本文保持行文简洁，我们在脚本中使用&#8217;\t&#8217;来表示一个制表符。但是现在大部分版本的sed还不能识别&#8217;\t&#8217;的简写方式，因此当在命令行中为脚本输入制表符时，你应该直接按TAB键来输入制表符而不是输入&#8217;\t&#8217;。下列的工具软件都支持&#8217;\t&#8217;做为一个正则表达式的字元来表示制表符：awk、perl、HHsed、sedmod以及GNU sed v3.02.80。</p>
<p><strong>不同版本的</strong><strong>SED</strong><strong>：</strong>不同的版本间的sed会有些不同之处，可以想象它们之间在语法上会有差异。具体而言，它们中大部分不支持在编辑命令中间使用标签（:name）或分支命令（b,t），除非是放在那些的末尾。这篇文档中我们尽量选用了可移植性较高的语法，以使大多数版本的sed的用户都能使用这些脚本。不过GNU版本的sed允许使用更简洁的语法。想像一下当读者看到一个很长的命令时的心情：</p>
<p>   sed -e &#8216;/AAA/b&#8217; -e &#8216;/BBB/b&#8217; -e &#8216;/CCC/b&#8217; -e d</p>
<p>好消息是GNU sed能让命令更紧凑：</p>
<p>   sed &#8216;/AAA/b;/BBB/b;/CCC/b;d&#8217;      # 甚至可以写成</p>
<p>   sed &#8216;/AAA\|BBB\|CCC/b;d&#8217;</p>
<p>此外，请注意虽然许多版本的sed接受象“/one/ s/RE1/RE2/”这种在&#8217;s'前带有空格的命令，但这些版本中有些却不接受这样的命令:“/one/! s/RE1/RE2/”。这时只需要把中间的空格去掉就行了。</p>
<p><strong>速度优化：</strong>当由于某种原因（比如输入文件较大、处理器或硬盘较慢等）需要提高命令执行速度时，可以考虑在替换命令（“s/&#8230;/&#8230;/”）前面加上地址表达式来提高速度。举例来说：</p>
<p>   sed &#8216;s/foo/bar/g&#8217; filename         # 标准替换命令</p>
<p>   sed &#8216;/foo/ s/foo/bar/g&#8217; filename   # 速度更快</p>
<p>   sed &#8216;/foo/ s//bar/g&#8217; filename      # 简写形式</p>
<p>当只需要显示文件的前面的部分或需要删除后面的内容时，可以在脚本中使用“q”命令（退出命令）。在处理大的文件时，这会节省大量时间。因此：</p>
<p>   sed -n &#8217;45,50p&#8217; filename           # 显示第45到50行</p>
<p>   sed -n &#8217;51q;45,50p&#8217; filename       # 一样，但快得多</p>
<p>如果你有其他的单行脚本想与大家分享或者你发现了本文档中错误的地方，请发电子邮件给本文档的作者（Eric Pement）。邮件中请记得提供你所使用的sed版本、 该sed所运行的操作系统及对问题的适当描述。本文所指的单行脚本指命令行的长度在65个字符或65个以下的sed脚本〔译注1〕。本文档的各种脚本是由以下所列作者所写或提供：</p>
<p> Al Aab                               # 建立了“seders”邮件列表</p>
<p> Edgar Allen                          # 许多方面</p>
<p> Yiorgos Adamopoulos                  # 许多方面</p>
<p> Dale Dougherty                       # 《sed &amp; awk》作者</p>
<p> Carlos Duarte                        # 《do it with sed》作者</p>
<p> Eric Pement                          # 本文档的作者</p>
<p> Ken Pizzini                          # GNU sed v3.02 的作者</p>
<p> S.G. Ravenhall                       # 去html标签脚本</p>
<p> Greg Ubben                           # 有诸多贡献并提供了许多帮助</p>
<p>&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;-</p>
<p>译注1：大部分情况下，sed脚本无论多长都能写成单行的形式（通过`-e&#8217;选项和`;&#8217;号）——只要命令解释器支持，所以这里说的单行脚本除了能写成一行还对长度有所限制。因为这些单行脚本的意义不在于它们是以单行的形式出现。而是让用户能方便地在命令行中使用这些紧凑的脚本才是其意义所在。</p>
<h1>7. 详解awk</h1>
<h2>7.1 简介</h2>
<p>AWK是一种优良的文本处理工具。它不仅是 Linux 中也是任何环境中现有的功能最强大的数据处理引擎之一。这种编程及数据操作语言（其名称得自于它的创始人 Alfred Aho 、Peter Weinberger 和 Brian Kernighan 姓氏的首个字母）的最大功能取决于一个人所拥有的知识。</p>
<p>AWK 提供了极其强大的功能：可以进行样式装入、流控制、数学运算符、进程控制语句甚至于内置的变量和函数。它具备了一个完整的语言所应具有的几乎所有精美特性。实际上 AWK 的确拥有自己的语言： AWK 程序设计语言， 三位创建者已将它正式定义为“样式扫描和处理语言”。它允许您创建简短的程序，这些程序读取输入文件、为数据排序、处理数据、对输入执行计算以及生成报表，还有无数其他的功能。</p>
<pre>Awk由循环组成，一个循环是一个历程，它将一直重复执行直到有一些存在的条件终止它。我们不用写这个循环，在awk中它作为一个框架存在，在这个框架中你编写的代码能够执行。</pre>
<pre>Awk的代码由3个主要部分构成（如下图）</pre>
<pre> </pre>
<pre></pre>
<h2>7.2 初探awk</h2>
<h3>7.2.1   匹配空行</h3>
<pre># awk ' /^$/ {print this is kh }' sample</pre>
<pre>注：sample文件请自行建立。</pre>
<pre>如果在shell中直接使用awk，那么在单引号之间不能再使用单引号否则会出错</pre>
<pre>通过这个实例，大家可以自行试试匹配数字[0-9],匹配字母[a-z[A-Z]</pre>
<pre>Awk中字段的分割</pre>
<pre>Awk假设它的输入都是有结构的，而不只是一串无规则的字符。默认情况下awk用空格作为分隔符，对于/etc/passwd这样的文件使用默认显然就比较愚蠢，因为awk会把它看做一个整体。使用-F参数可以设定自己想要的分隔符，定义好后如何调用呢？这时候就用到了$。好现在用实例来说明一下。</pre>
<h3>7.2.2   匹配passwd文件中的用户</h3>
<pre># awk -F : '{print "username " $1 }' /etc/passwd</pre>
<pre>注：这里使用-F指定了:为分割符（我这里F后带了空格，实际上不带也可以），使用$1引用第一段（众所周知passwd的第一段就是用户名）。朋友们可以可以尝试下用$0看出来什么结果。</pre>
<pre>实例二</pre>
<pre>现在咱来打印第四段，通过这个例子向大家说明$后面可以是非常灵活的（整数）。</pre>
<pre>写脚本</pre>
<pre># vim awk</pre>
<pre>BEGIN{</pre>
<pre>        FS = ":"</pre>
<pre>        one = 1</pre>
<pre>        three = 3</pre>
<pre>}</pre>
<pre>{</pre>
<pre>print $(one + three)</pre>
<pre>}</pre>
<pre>执行</pre>
<pre># awk -f awk /etc/passwd</pre>
<pre>注：在简介中的图中已经提到过BEGIN。FS是awk变量用来指定分隔符。下面的one和three都是自己定义的变量，并且被我赋值。需要注意的一点是在awk中变量区分大小写，并且不可以数字开头。</pre>
<h3>7.2.3   计算空行的数目</h3>
<pre>本例主要演示赋值运算符++和+= 。这类符号还有很多如表中所示</pre>
<table border="0" cellpadding="0">
<thead>
<tr>
<td width="113" valign="top"><strong>Operator</strong></td>
<td width="384" valign="top"><strong>Description</strong></td>
</tr>
</thead>
<tbody>
<tr>
<td width="113" valign="top">++</td>
<td width="384" valign="top">Add 1 to variable.</td>
</tr>
<tr>
<td width="113" valign="top">&#8211;</td>
<td width="384" valign="top">Subtract 1 from variable.</td>
</tr>
<tr>
<td width="113" valign="top">+=</td>
<td width="384" valign="top">Assign result of addition.</td>
</tr>
<tr>
<td width="113" valign="top">-=</td>
<td width="384" valign="top">Assign result of subtraction.</td>
</tr>
<tr>
<td width="113" valign="top">*=</td>
<td width="384" valign="top">Assign result of multiplication.</td>
</tr>
<tr>
<td width="113" valign="top">/=</td>
<td width="384" valign="top">Assign result of division.</td>
</tr>
<tr>
<td width="113" valign="top">%=</td>
<td width="384" valign="top">Assign result of modulo.</td>
</tr>
<tr>
<td width="113" valign="top">^=</td>
<td width="384" valign="top">Assign result of exponentiation.</td>
</tr>
<tr>
<td width="113" valign="top">**=</td>
<td width="384" valign="top">Assign result of exponentiation.[6]</td>
</tr>
</tbody>
</table>
<pre>如果对编程有些了解的朋友应该对它们并不陌生。</pre>
<pre>还是以刚刚自行建立的sample为例。</pre>
<pre>写脚本</pre>
<pre>vim awk</pre>
<pre>/^$/{</pre>
<pre>print x = x + 1</pre>
<pre>}</pre>
<pre>执行后便可统计出空行数。</pre>
<pre>这里的x=x+1完全可以被x +=1 和 x++ 替代，使代码更简洁。</pre>
<pre>注：如此统计不够完美，因为数是排列出来的，可以自行尝试使用END 来显示最后的结果。</pre>
<h3>7.2.4   计算学生的平均成绩</h3>
<pre>john 85 92 78 94 88</pre>
<pre>andrea 89 90 75 90 86</pre>
<pre>jasper 84 88 80 92 84</pre>
<pre> </pre>
<pre>代码如下</pre>
<pre>{</pre>
<pre>       #总成绩</pre>
<pre>       sum = $2+$3+$4+$5+$6</pre>
<pre>       #平均分</pre>
<pre>       avg = sum / 5</pre>
<pre>       #输出</pre>
<pre>       print $1 , avg</pre>
<pre>}</pre>
<pre>结果</pre>
<pre># awk -f 脚本的位置 成绩单的位置</pre>
<pre>john 87.4</pre>
<pre>andrea 86</pre>
<pre>jasper 85.6</pre>
<h3>7.2.5   银行账单</h3>
<pre>账单如下</pre>
<pre>总资产1000</pre>
<pre>编号   地点     数目</pre>
<pre>125     Market  125.45</pre>
<pre>126     Hardware Store  34.95</pre>
<pre>127     Video Store     7.45</pre>
<pre>128     Book Store      14.32</pre>
<pre>129     Gasoline        16.10</pre>
<pre>代码如下</pre>
<pre>BEGIN{</pre>
<pre>        FS = "\t"</pre>
<pre>        blance = 1000</pre>
<pre>}</pre>
<pre> </pre>
<pre>{</pre>
<pre>        blance  = blance- $3</pre>
<pre>        print blance</pre>
<pre>}</pre>
<pre>注：此题不难，请朋友们按照自己的思路写一个脚本来计算。</pre>
<pre>简洁的写法</pre>
<pre>awk 'BEGIN{FS="\t"}{count+=$3}END{print 1000-count}' checks.data</pre>
<h3>7.2.6   统计LS的信息</h3>
<pre>Ls –l 输出的结果</pre>
<pre>total 52</pre>
<pre>-rwxr-xr-x 1  502 games  92 Mar  2  1997 acro</pre>
<pre>-rw-r--r-- 1  502 games 247 Mar  2  1997 acronyms</pre>
<pre>-rw-r--r-- 1 root root   76 Feb  4 09:49 awk</pre>
<pre>-rw-r--r-- 1  502 games 298 Mar  2  1997 checkbook.awk</pre>
<pre>-rw-r--r-- 1  502 games 109 Mar  2  1997 checks.data</pre>
<pre>-rwxr-xr-x 1  502 games 163 Mar  2  1997 filesum1</pre>
<pre>-rwxr-xr-x 1  502 games 749 Mar  2  1997 filesum2</pre>
<pre>-rwxr-xr-x 1  502 games 766 Mar  2  1997 filesum3</pre>
<pre>-rwxr-xr-x 1  502 games  42 Mar  2  1997 fls1</pre>
<pre>-rw-r--r-- 1  502 games 244 Mar  2  1997 fls.data</pre>
<pre>-rw-r--r-- 1  502 games  92 Mar  2  1997 grades1.awk</pre>
<pre>-rw-r--r-- 1  502 games 100 Mar  2  1997 grades2.awk</pre>
<pre>-rw-r--r-- 1  502 games  64 Mar  2  1997 grades.data</pre>
<pre> </pre>
<pre>现在我来写一个脚本统计ls –l中文件的数量及大小。</pre>
<pre>脚本的框架应该是这样的</pre>
<pre>ls -l $* | awk '{</pre>
<pre>        print $5, "\t", $9</pre>
<pre>}'</pre>
<pre>$*是shell里的一个变量用来扩展通过命令行传递的所有变量。这些参数可能是文件名，目录或ls的附加选项。</pre>
<pre>好，让我们先来统计文件的个数吧。</pre>
<pre>NF==9 &amp;&amp; /^-/{</pre>
<pre>       Filenum ++</pre>
<pre>}</pre>
<pre>END { print  "there are",filenum,"files here" }</pre>
<pre>注：NF==9用来过滤第一行total 52。</pre>
<pre>/^-/是正则，匹配文件，在Linux中文件是用-来表示。</pre>
<pre>现在来统计大小</pre>
<pre>NF==9 &amp;&amp; /^-/{</pre>
<pre>       filenum ++</pre>
<pre>       total += $5</pre>
<pre>}</pre>
<pre>END { print  "there are",filenum,"files here" , "total",total, "bytes"}</pre>
<pre>到此为止文件个数和大小都已经被统计。但是为了更清楚我们到底统计了哪些文件，我们还需要完善一下该脚本。</pre>
<pre>BEGIN {</pre>
<pre>        print "files","bytes"</pre>
<pre>}</pre>
<pre>NF==9{</pre>
<pre>        filenum ++</pre>
<pre>        total += $5</pre>
<pre>        print $9,$5</pre>
<pre>}</pre>
<pre>END { print  "there are",filenum,"files here" , "total",total, "bytes"}</pre>
<pre>运行后输出结果格式比较混乱</pre>
<pre>files bytes</pre>
<pre>acro 92</pre>
<pre>acronyms 247</pre>
<pre>awk 76</pre>
<pre>checkbook.awk 298</pre>
<pre>checks.data 109</pre>
<pre>filesum1 163</pre>
<pre>filesum2 749</pre>
<pre>filesum3 766</pre>
<pre>fls 172</pre>
<pre>fls.data 244</pre>
<pre>grades1.awk 92</pre>
<pre>grades2.awk 100</pre>
<pre>grades.data 64</pre>
<pre>there are 13 files here total 3172 bytes</pre>
<pre>好，现在使用printf来整理一下</pre>
<h3>7.2.7   格式化输出printf</h3>
<pre>Awk的printf与c一样。以下是用在printf中的格式说明符</pre>
<table border="0" cellpadding="0">
<tbody>
<tr>
<td width="66" valign="top">c</td>
<td width="498" valign="top">ASCII character</td>
</tr>
<tr>
<td width="66" valign="top">d</td>
<td width="498" valign="top">Decimal integer十进制整数</td>
</tr>
<tr>
<td width="66" valign="top">i</td>
<td width="498" valign="top">Decimal integer. (Added in POSIX)</td>
</tr>
<tr>
<td width="66" valign="top">e</td>
<td width="498" valign="top">Floating-point format ([-]<em>d</em>.<em>precision</em><strong>e</strong>[+-]<em>dd</em>)</td>
</tr>
<tr>
<td width="66" valign="top">E</td>
<td width="498" valign="top">Floating-point format ([-]<em>d</em>.<em>precision</em><strong>E</strong>[+-]<em>dd</em>)</td>
</tr>
<tr>
<td width="66" valign="top">f</td>
<td width="498" valign="top">Floating-point format ([-]<em>ddd</em>.<em>precision</em>)</td>
</tr>
<tr>
<td width="66" valign="top">g</td>
<td width="498" valign="top"><strong>e</strong> or <strong>f</strong> conversion, whichever is shortest, with trailing zeros removed</td>
</tr>
<tr>
<td width="66" valign="top">G</td>
<td width="498" valign="top"><strong>E</strong> or <strong>f</strong> conversion, whichever is shortest, with trailing zeros removed</td>
</tr>
<tr>
<td width="66" valign="top">o</td>
<td width="498" valign="top">Unsigned octal value</td>
</tr>
<tr>
<td width="66" valign="top">s</td>
<td width="498" valign="top">String字符串</td>
</tr>
<tr>
<td width="66" valign="top">x</td>
<td width="498" valign="top">Unsigned hexadecimal number. Uses <strong>a</strong>-<strong>f</strong> for 10 to 15</td>
</tr>
<tr>
<td width="66" valign="top">X</td>
<td width="498" valign="top">Unsigned hexadecimal number. Uses <strong>A</strong>-<strong>F</strong> for 10 to 15</td>
</tr>
<tr>
<td width="66" valign="top">%</td>
<td width="498" valign="top">Literal %</td>
</tr>
</tbody>
</table>
<pre>这次主要用printf来规定对齐方式。</pre>
<pre>右对齐</pre>
<pre># awk 'END {printf ("|%10s|\n","hello")}' /etc/passwd</pre>
<pre>|     hello|</pre>
<pre>左对齐</pre>
<pre># awk 'END {printf ("|%-10s|\n","hello")}' /etc/passwd</pre>
<pre>|hello     |</pre>
<pre>好了不知道大家有没有点感觉，如何让上例中的格式对齐呢？</pre>
<pre>格式化后的完整代码如下</pre>
<pre>ls -l $* | awk '</pre>
<pre>BEGIN{</pre>
<pre>        printf("%-15s\t%10s\n","files","bytes")</pre>
<pre>}</pre>
<pre> </pre>
<pre>NF==9{</pre>
<pre>        filenum ++</pre>
<pre>        total += $5</pre>
<pre>        printf ("%-15s\t%10d\n",$9,$5)</pre>
<pre>}</pre>
<pre>END { print  "There are",filenum,"files here\n" "Total",total, "bytes"}</pre>
<pre>'</pre>
<h3>7.2.8   统计学生成绩单</h3>
<pre>首先我们要使用的是for循环，利用它制造出一个“万能”平均分计算器。</pre>
<pre>For循环的框架</pre>
<pre><kbd>for</kbd> ( <code><em>变量初值</em></code> ; <code><em>条件（范围）</em></code> ; <code><em>计数方法</em></code> )
<code><em>动作</em></code></pre>
<pre>以该成绩单为例</pre>
<pre>mona 70 77 85 83 70 89</pre>
<pre>john 85 92 78 94 88 91</pre>
<pre>andrea 89 90 85 94 90 95</pre>
<pre>jasper 84 88 80 92 84 82</pre>
<pre>dunce 64 80 60 60 61 62</pre>
<pre>ellis 90 98 89 96 96 92</pre>
<pre>代码如下</pre>
<pre>        total = 0</pre>
<pre>        for (i=2 ;i&lt;=NF;++i )</pre>
<pre>        {</pre>
<pre>                total = total + $i</pre>
<pre>        }</pre>
<pre>        avg = total / (NF-1)</pre>
<pre>注：total是总成绩</pre>
<pre>(NF -1)因为第一列是名字，所以需要-1 。这里的括号一定不能少，不然除法是比加法优先的。</pre>
<pre>好了，现在不管分有多少我们都可以用它算出成绩来了！</pre>
<pre>成绩出来了就一定有好有坏，现在来用if语句来把及格和不及格的成绩过滤出来。</pre>
<pre>If语句的框架如下</pre>
<pre><kbd>if</kbd> ( <code><em>条件 </em></code>){
<code><em>动作</em></code><code><em>1 }</em></code>
<kbd>else</kbd>
<code><em>动作</em></code><code><em>2</em></code></pre>
<pre>现在我们用if来判断学生的成绩是否及格。这里以60为底线。</pre>
<pre>        if ( avg &gt;= 60)</pre>
<pre>                grade = "good job!"</pre>
<pre>        else</pre>
<pre>                grade = "sorry!"</pre>
<pre>有时遇到的情况可能会更复杂一些，比如要为成绩分类，统计出每个层次的学生数量等。这时可以用else if来设置多个条件。</pre>
<pre>现在假设要把成绩分为4类。A,B,C,D</pre>
<pre>        if ( avg &gt;= 90) grade = "A"</pre>
<pre>        else if ( avg &gt;= 80 ) grade = "B"</pre>
<pre>        else if ( avg &gt;= 60 ) grade = "C"</pre>
<pre>        else if ( avg &lt;= 60 ) grade = "D"</pre>
<pre>结合上面的代码，一个统计学生成绩单的程序就出来了！完整代码如下</pre>
<pre>{</pre>
<pre>        total = 0</pre>
<pre>        for (i=2 ;i&lt;=NF;++i )</pre>
<pre>        {</pre>
<pre>                total = total + $i</pre>
<pre>        }</pre>
<pre>        avg = total / (NF-1)</pre>
<pre>        if ( avg &gt;= 90) grade = "A"</pre>
<pre>        else if ( avg &gt;= 80 ) grade = "B"</pre>
<pre>        else if ( avg &gt;= 60 ) grade = "C"</pre>
<pre>        else if ( avg &lt;= 60 ) grade = "D"</pre>
<pre> </pre>
<pre>        print $1,avg,grade</pre>
<pre>}</pre>
<pre>请朋友们自己试着统计出每个层次的学生数量。</pre>
<pre>技巧：在代码顶部加入#!/bin/awk –f可以直接调用awk来执行人物。有时候比使用<em>awk –f </em><em>脚本 目标 </em>的方式更简洁一些。</pre>
<pre>好，现在来做下练习巩固前面所学到的东西，之后进行数组的学习。</pre>
<h2>7.3 练习</h2>
<pre>打印输入文件第八行</pre>
<pre>#!/bin/awk -f</pre>
<pre>{</pre>
<pre>  if ( NR == 8 )</pre>
<pre>  { print $0 }</pre>
<pre>}</pre>
<pre>打印输入行的总数：awk -F: 'END{print NR}' passwd</pre>
<pre>打印字段数大于等于4个的行：awk -F: 'NF &gt;＝4 {print $0}' passwd</pre>
<pre>打印文件所有字段的总数awk -F ":" 'BEGIN { N=0 } {n+=NF}END{ print n}' /etc/passwd</pre>
<pre>打印UID在30～40范围内的用户名：awk 'BEGIN {FS=":"} { if ($3 &gt;= 30 &amp;&amp; $3 &lt;= 40) {print $0}}' /etc/passwd</pre>
<pre>倒序排列文件的所有字段</pre>
<pre>注：标记为红色的是我个人曾未做出的题目</pre>
<pre>BEGIN {</pre>
<pre>        FS=":|:/"</pre>
<pre>}</pre>
<pre>{</pre>
<pre>        for (x=NF ; x&gt;=1 ; --x)</pre>
<pre>        printf("%s:",$x)</pre>
<pre>        printf("\n") #这是重点</pre>
<pre>}</pre>
<pre>隔行删除：awk -F ":" '{if ( NR%2==1 ) print $0}' /etc/passwd</pre>
<pre>抽取每行第一次出现的单词</pre>
<pre>awk -F "[^a-zA-Z]+" '/.$/{if ($1 ~ /[a-zA-Z]+/) print $1 ; else print $2}' /etc/passwd</pre>
<pre>打印字段大于5个的行总数</pre>
<pre>BEGIN {</pre>
<pre>        FS=":"</pre>
<pre>}</pre>
<pre>NR &gt; 5{</pre>
<pre>        num ++</pre>
<pre>}</pre>
<pre>END {print num}</pre>
<pre>输出文件的每一行的倒数第二个字段：</pre>
<pre>BEGIN {</pre>
<pre>        FS=":|/"</pre>
<pre>}</pre>
<pre>{</pre>
<pre>        for (i=0 ; i &lt;= NR ; ++i)</pre>
<pre>        NR == i</pre>
<pre>        print $(NF -1)</pre>
<pre>}</pre>
<pre>输出可以登录与不可以登录的用户数量：</pre>
<pre>BEGIN {</pre>
<pre>        FS = ":|:/"</pre>
<pre>}</pre>
<pre>{</pre>
<pre>if (/bash/){ 可以登陆</pre>
<pre>        ++num</pre>
<pre>}</pre>
<pre>else if (/nologin/){ 不可登陆</pre>
<pre>        ++num2</pre>
<pre>}</pre>
<pre>else{ 其他</pre>
<pre>        ++num3</pre>
<pre>}</pre>
<pre>}</pre>
<pre>END {</pre>
<pre>        print num,num2,num3</pre>
<pre>}</pre>
<h3>7.3.1   数组</h3>
<pre>数组是可以用来存储一组数据的变量。通常这些数据之间具有某种联系。数组中的每一个元素通过它们在数组中的下标来访问。下面是数据的框架</pre>
<pre><code><em>array</em></code>[<code><em>下标</em></code>] = <code><em>元素</em></code><code><em></em></code></pre>
<pre><code>在</code><code>awk</code><code>中不必指明数组的大小，只需要为数组指定标识符。</code></pre>
<pre><code>下面的例子为数组</code><code>flavor</code><code>的一个元素指定了一个字符串“</code><code>cherry</code><code>”</code></pre>
<pre>flavor[1] = "cherry"</pre>
<pre>这个数组的下标是“1”。下面的语句将打印“cherry”</pre>
<pre>print flavor[1]</pre>
<pre>好，现在让我们利用数组将学生平均分计算程序更加强大！（<strong>编写时能用数组的地方都用了数组，主要是为了向大家介绍数组。但是大家要明白，那些功能并非一定要用数组才能解决</strong>）</pre>
<pre>本次需要实现的功能有1计算班级平均分2统计高于和低于平均分的人数3统计A,B,C,D中各有多少人。</pre>
<pre>成绩单</pre>
<pre>mona 70 77 85 83 70 89</pre>
<pre>john 85 92 78 94 88 91</pre>
<pre>andrea 89 90 85 94 90 95</pre>
<pre>jasper 84 88 80 92 84 82</pre>
<pre>dunce 64 80 60 60 61 62</pre>
<pre>ellis 90 98 89 96 96 92</pre>
<pre> </pre>
<pre>执行效果。（着色部分是本次加入的新功能）</pre>
<pre>$<code><strong> awk -f grades.awk grades.test</strong></code></pre>
<pre>mona    79      C</pre>
<pre>john    88      B</pre>
<pre>andrea  90.5    A</pre>
<pre>jasper  85      B</pre>
<pre>dunce   64.5    D</pre>
<pre>ellis   93.5    A</pre>
<pre> </pre>
<pre>Class Average:  83.4167</pre>
<pre>At or Above Average:    4</pre>
<pre>Below Average:  2</pre>
<pre>A:      2</pre>
<pre>B:      2</pre>
<pre>C:      1</pre>
<pre>D:      1</pre>
<pre>代码如下</pre>
<pre>{</pre>
<pre>        total = 0</pre>
<pre>        for (i=2;i&lt;=NF;i++)</pre>
<pre>                total += $i</pre>
<pre>        avg = total / (NF -1)</pre>
<pre>        if (avg &gt;= 90) grade = "A"</pre>
<pre>        else if (avg &gt;= 80) grade = "B"</pre>
<pre>        else if (avg &gt;= 70) grade = "C"</pre>
<pre>        else grade = "D"</pre>
<pre> </pre>
<pre>        student_avg_total[NR] = avg</pre>
<pre>        ++level[grade]</pre>
<pre> </pre>
<pre>        print $1,avg,grade</pre>
<pre>}</pre>
<pre>END{</pre>
<pre>        for (x=1 ; x &lt;= NR ; x++)</pre>
<pre>                class_avg_total += student_avg_total[x]</pre>
<pre>                class_avg = class_avg_total / NR</pre>
<pre>        print "Class Avg:",class_avg</pre>
<pre> </pre>
<pre>        for (x=1; x&lt;=NR;x++)</pre>
<pre>                if (student_avg_total[x] &gt;= class_avg)</pre>
<pre>                        ++niubi</pre>
<pre>                else</pre>
<pre>                        ++yiban</pre>
<pre>        print "At or Above Average:",niubi</pre>
<pre>        print "Below Average:",yiban</pre>
<pre> </pre>
<pre>        for (num in level)</pre>
<pre>                print num ":" level[num]</pre>
<pre> </pre>
<pre>}</pre>
<pre>班级平均分的实现</pre>
<pre>将所有平均分都放入了数组中，并以NR作为下标（因为NR值是递增的）。</pre>
<pre>在END中通过一个for循环将元素调出，相加。用和除以NR便可得出班级平均分。</pre>
<pre>统计高于和低于平均分的人数</pre>
<pre>通过for循环将平均分调出，然后使用if语句进行判断。</pre>
<pre>统计A,B,C,D中各有多少人</pre>
<pre>在本例中实际上最难理解的点应该在这里 ++level[grade]</pre>
<pre>在grade中存储的是A,B,C,D。而++level负责统计字母出现的个数。</pre>
<pre>        for (num in level)</pre>
<pre>这里num（可以是任意名称）可看做是和普通for循环计数器（i++）一样递增的临时变量，in指定了它作用在哪个数组。</pre>
<pre>                print num ":" level[num]</pre>
<pre>这里num调出了level的元素名，而level[num]调出了统计结果。</pre>
<pre>注：awk中所有的数组都是关联数组。关联数组的独特之处在于它的下标可以是一个字符串或一个数值。</pre>
<h3>7.3.2   词汇搜索</h3>
<pre>本程序根据用户提交的缩略词将文件中的完整写法提取。</pre>
<pre>文件如下</pre>
<pre>USGCRP  U.S. Global Change Research Program</pre>
<pre>NASA    National Aeronautic and Space Administration</pre>
<pre>EOS     Earth Observing System</pre>
<pre>代码</pre>
<pre>BEGIN { FS = "\t"</pre>
<pre>        printf("Enter a glossary term: ")</pre>
<pre>}</pre>
<pre> </pre>
<pre>FILENAME == "glossary" {</pre>
<pre>        entry[$1] = $2 #将第二段与第一段的缩写对应</pre>
<pre>        next #将数组载入完成后进入下面的代码段</pre>
<pre>}</pre>
<pre>#如果输入内容不为空则进行下面的判断</pre>
<pre>$0 != "" {</pre>
<pre>       #in是一个操作符，用在条件表达式中来测试一个小标是否是数组的成员</pre>
<pre>        if ( $0 in entry ) {</pre>
<pre>                print entry[$0]</pre>
<pre>        } else</pre>
<pre>                print $0 " not found"</pre>
<pre>}</pre>
<pre>#如果输入内容为空</pre>
<pre>{</pre>
<pre>  printf("Enter another: ")</pre>
<pre>}</pre>
<pre>好，基本功能实现了。因为本脚本从标准输入中读取，所以在执行的时候需要这样写awk -f lookup1 glossary glossary –</pre>
<pre>本程序有一个缺点就是用户无法主动退出，现在来补充这个内容</pre>
<pre>$0 ~ /^(quit|[qQ]|exit|[Xx])$/ { exit }</pre>
<pre>不需要记，以后自己在写脚本的时候直接复制粘贴即可！</pre>
<h3>7.3.3   用split()创建数组</h3>
<pre>内置函数split()能够将任何字符串分解到数组的元素中。这个函数对于从字段中提取“子字段”是很有用的。函数split()的框架如下</pre>
<pre><code>n = split</code>(<code><em>字符串</em></code>, <code><em>数组</em></code>, <code><em>分隔符（或者正则）</em></code>)</pre>
<pre>n为数组中元素的个数，所以数组中的下标从1开始到n。</pre>
<h3>7.3.4   打印罗马数字</h3>
<pre>输入从1到10的数字并转换为罗马数字。</pre>
<pre>根据split的框架我们可以这样写</pre>
<pre>split ("I,II,III,IV,V,VI,VII,VIII,IX,XI",number,",")</pre>
<pre>这样就把罗马数字存入了数组中，此时number[1]=I.number[2]=II……</pre>
<pre>#判断$1是否在1-10之间。</pre>
<pre>$1&gt;0 &amp;&amp; $1&lt;=10 {</pre>
<pre>       #过滤小数</pre>
<pre>      if (/[0-9]\.[0-9]*/) {</pre>
<pre>                        print "not a good number"</pre>
<pre>        }else</pre>
<pre>                        print number[$1]</pre>
<pre>       #exit告诉程序执行到这里就结束，不然即使输入正确也会报错</pre>
<pre>        exit</pre>
<pre>}</pre>
<pre>如果不是1-10之间的数字，则报错</pre>
<pre>{</pre>
<pre>        print "faild"</pre>
<pre>        exit</pre>
<pre>}</pre>
<h3>7.3.5   转换日期格式</h3>
<pre>将“mm-dd-yy”或“mm/dd/yy”转换为“月日，年”</pre>
<pre>代码如下</pre>
<pre>awk '</pre>
<pre>#与打印罗马数字一样的思路一样。首先在BEGIN中将1-12与12月份的英文单词对应。</pre>
<pre>BEGIN {</pre>
<pre>        listmonths = "January,February,March,April,May,June,July,August,September,October,November,December"</pre>
<pre>        split( listmonths , month ,",")</pre>
<pre>}</pre>
<pre>#判断输入</pre>
<pre>$1 != ""{</pre>
<pre>        dateg = split($1 , date , "-") #将$1打散放入数组</pre>
<pre>        if (dateg == 1) #判断是否有内容的</pre>
<pre>                datexg == split( $1 , date , "/")</pre>
<pre>        if (datexg ==1)</pre>
<pre>                exit</pre>
<pre>       date[1] += 0 #处理类似于12/05/09这样的操作，awk认为05和5是两个不一样的字符，最终结果将导致以05表示的五月无法被正常输出。</pre>
<pre>        print month[date[1]],date[2]",",date[3]</pre>
<pre>}'</pre>
<h3>7.3.6   处理文章的缩写词</h3>
<pre>文章如下</pre>
<pre>The USGCRP is a comprehensive</pre>
<pre>research effort that includes applied</pre>
<pre>as well as basic research.</pre>
<pre>The NASA program Mission to Planet Earth</pre>
<pre>represents the principal space-based component</pre>
<pre>of the USGCRP and includes new initiatives</pre>
<pre>类似于黄色字体的都是缩写词，本次编写的程序就目的就是把这些词转换。</pre>
<pre>缩写词的对应关系存储在acronyms中</pre>
<pre>USGCRP  U.S. Global Change Research Program</pre>
<pre>NASA    National Aeronautic and Space Administration</pre>
<pre>EOS     Earth Observing System</pre>
<pre>代码如下</pre>
<pre>awk 'FILENAME == "acronyms" #读取存储缩写词对应关系的文件</pre>
<pre>{</pre>
<pre>       #制作缩写词对应关系的数组（之前也做过，并且比这个方法简单，看以参阅“词汇搜索”）</pre>
<pre>        split($0,entry,"\t")</pre>
<pre>        acro[entry[1]]=entry[2]</pre>
<pre>        next</pre>
<pre>}</pre>
<pre>#匹配包含多个大写字母的行</pre>
<pre>/[A-Z][A-Z]+/{</pre>
<pre>        for (i=1;i&lt;=NF;i++)</pre>
<pre>                #一段一段的截取出来并判断是否有缩写存在于acro中</pre>
<pre>                if ($i in acro){</pre>
<pre>                        #如果存在则进行替换。"("$i")"用来显示被替换的缩写词</pre>
<pre>                        $i=acro [$i] "("$i")"</pre>
<pre>                }</pre>
<pre>}</pre>
<pre>{</pre>
<pre>        print $0</pre>
<pre>}' acronyms $*</pre>
<pre> </pre>
<pre>常用</pre>
<pre>1.按内存从大到小排列进程:  
ps -eo "%C : %p : %z : %a"|sort -k5 -nr
</pre>
<pre>2.查看当前有哪些进程；查看进程打开的文件: 
ps -A ；lsof -p PID

3.获取当前IP地址（从中学习grep,awk,cut的作用）
ifconfig eth0 |grep "inet addr:" |awk '{print $2}'|cut -c 6-</pre>
      <section class="clear"></section> 
    </section>
    <p align="right"><a href="#" class="gotop" onclick="istoJS.goTop();return false;" title="Back Top">Back Top</a></p>
    <p class="postmeta">Tags: <a href="http://opkeep.com/tag/awk" rel="tag">awk</a>, <a href="http://opkeep.com/tag/sed" rel="tag">sed</a>, <a href="http://opkeep.com/tag/%e6%89%8b%e5%86%8c" rel="tag">手册</a></p>
    <nav class="post-nav">
      <span class="previous"><a href="http://opkeep.com/system/linux/tomcat_performance.html" rel="prev">Tomcat性能调整</a></span>
      <span class="next"><a href="http://opkeep.com/system/linux/wget_man.html" rel="next">wget中文使用手册</a></span>
      <section class="clear"></section>
    </nav>
      </article>
  <section class="sidecomments">
  <script type="text/javascript" src="http://opkeep.com/wp-content/themes/istudio-theme/resources/scripts/comment.js"></script>
        <h3 id="comments">回复自&#8220;SED与AWK学习笔记&#8221;</h3>
  <section id="comments">
    <section id="cmtswitcher">    
            <a id="commenttab" class="curtab" href="javascript:void(0);" onclick="istoJS.switchTab('thecomments,commentnavi','thetrackbacks','commenttab','curtab','trackbacktab','tab');">评论 (1)</a>
      <a id="trackbacktab" class="tab" href="javascript:void(0);" onclick="istoJS.switchTab('thetrackbacks','thecomments,commentnavi','trackbacktab','curtab','commenttab','tab');">引用 (0)</a>
                  <span class="addcomment"><a href="#respond">发表评论</a></span>
                  <span class="addtrackback"><a href="http://opkeep.com/system/linux/sed_and-awk.html/trackback">引用地址</a></span>
            <section class="clear"></section>      
    </section>    
    <section id="commentlist">
      <ol id="thecomments" class="commentlist">
			<li class="comment even thread-even depth-1" id="comment-46233">
  <div class="list">
        <table class="out" border="0" cellspacing="0" cellpadding="0">
      <tr><td class="icontd" align="left" valign="bottom"><div class="gravatar"><img alt='' src='http://1.gravatar.com/avatar/d6d14b8a03bb39827befbcb0fcf60d40?s=32&amp;d=monsterid&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' /></div></td>
        <td align="left" valign="bottom"><table border="0" cellspacing="0" cellpadding="0">
          <tr><td class="topleft"></td><td class="top"></td><td class="topright"></td></tr>
          <tr><td class="left"></td>
            <td class="conmts"><p>楼主你好，运维小鬼可以和你交朋友吗？技术达人，同道中人。</p>
</td>
          	<td class="right"></td></tr>
          <tr><td class="bottomleft"></td><td class="bottom"></td><td class="bottomright"></td></tr>
        </table></td></tr>
    </table>
    <div class="comment_text">
      <cite><a href='http://7169900.blog.51cto.com/' rel='external nofollow' class='url'>叶子</a></cite> at <a href="#comment-46233" title="">2014年05月7日 10:13 下午</a>      <small class="commentmetadata"> <a onclick='istoJSCM.goReply("46233", "叶子")' href="#respond" style="cursor:pointer;"/>回复</a></small>    
    </div>
      </div>
</li>
</li>
      </ol>
            <ol id="thetrackbacks" class="pingbacklist">
                <li class="messagebox">没有任何引用。</li>
              </ol>
            <section class="clear"></section>
    </section>
  </section>
								<div id="respond">
				<h3 id="reply-title">发表评论 <small><a rel="nofollow" id="cancel-comment-reply-link" href="/system/linux/sed_and-awk.html#respond" style="display:none;">取消回复</a></small></h3>
									<p class="must-log-in">要发表评论，您必须先<a href="http://opkeep.com/wp-login.php?redirect_to=http%3A%2F%2Fopkeep.com%2Fsystem%2Flinux%2Fsed_and-awk.html">登录</a>。</p>												</div><!-- #respond -->
						</section></section>
<aside>
	<form method="get" id="searchform" class="search" action="http://opkeep.com/">
	<div><input name="s" type="text" id="s" onblur="if(this.value =='')this.value='Search...';this.className='search_text';" onfocus="this.value='';this.className='search_textfocus';" onclick="if(this.value=='Search...')this.value=''" value="Search..." class="search_text" />
  <input type="submit" name="button" id="button" value="" class="search_submit" onmousemove="this.className='search_submithover'" onmousedown="this.className='search_submitactive'" onmouseout="this.className='search_submit'" /></div>
</form>
<ul><li id=\"pages-3\" class=\"widget widget_pages\"><h3 class=\"widgettitle\">页面</h3>		<ul>
			<li class="page_item page-item-290"><a href="http://opkeep.com/guestbook" title="留言板">留言板</a></li>
<li class="page_item page-item-394"><a href="http://opkeep.com/3d_tag" title="3D标签云">3D标签云</a></li>
<li class="page_item page-item-443"><a href="http://opkeep.com/911pop" title="青檬音乐台">青檬音乐台</a></li>
<li class="page_item page-item-1046"><a href="http://opkeep.com/profile" title="关于">关于</a></li>
<li class="page_item page-item-1052"><a href="http://opkeep.com/album" title="相册">相册</a></li>
<li class="page_item page-item-1073"><a href="http://opkeep.com/links" title="链接">链接</a></li>
<li class="page_item page-item-1078"><a href="http://opkeep.com/pigeonhole" title="归档">归档</a></li>
<li class="page_item page-item-1985"><a href="http://opkeep.com/notepad" title="常用笔记">常用笔记</a></li>
		</ul>
		</li></ul>	        <ul><li id=\"wp-cumulus\" class=\"widget wp_cumulus_widget\">							<h3 class=\"widgettitle\">3D标签云</h3>						<!-- SWFObject embed by Geoff Stearns geoff@deconcept.com http://blog.deconcept.com/swfobject/ --><script type="text/javascript" src="http://opkeep.com/wp-content/plugins/wp-cumulus/swfobject.js"></script><div id="wpcumuluswidgetcontent5606689"><p><a href='http://opkeep.com/tag/apache' class='tag-link-78' title='6 个话题' style='font-size: 14.317073170732pt;'>apache</a>
<a href='http://opkeep.com/tag/aws' class='tag-link-505' title='4 个话题' style='font-size: 11.756097560976pt;'>aws</a>
<a href='http://opkeep.com/tag/bash' class='tag-link-47' title='5 个话题' style='font-size: 13.121951219512pt;'>bash</a>
<a href='http://opkeep.com/tag/cc' class='tag-link-26' title='2 个话题' style='font-size: 8pt;'>CC</a>
<a href='http://opkeep.com/tag/ftp' class='tag-link-175' title='4 个话题' style='font-size: 11.756097560976pt;'>ftp</a>
<a href='http://opkeep.com/tag/game' class='tag-link-137' title='3 个话题' style='font-size: 10.048780487805pt;'>game</a>
<a href='http://opkeep.com/tag/ip' class='tag-link-405' title='3 个话题' style='font-size: 10.048780487805pt;'>ip</a>
<a href='http://opkeep.com/tag/iptables' class='tag-link-81' title='4 个话题' style='font-size: 11.756097560976pt;'>iptables</a>
<a href='http://opkeep.com/tag/it' class='tag-link-39' title='2 个话题' style='font-size: 8pt;'>IT</a>
<a href='http://opkeep.com/tag/lighttpd' class='tag-link-272' title='4 个话题' style='font-size: 11.756097560976pt;'>lighttpd</a>
<a href='http://opkeep.com/tag/linux-2' class='tag-link-148' title='11 个话题' style='font-size: 18.243902439024pt;'>linux</a>
<a href='http://opkeep.com/tag/log' class='tag-link-56' title='3 个话题' style='font-size: 10.048780487805pt;'>log</a>
<a href='http://opkeep.com/tag/lvm' class='tag-link-422' title='4 个话题' style='font-size: 11.756097560976pt;'>lvm</a>
<a href='http://opkeep.com/tag/mysql-2' class='tag-link-8' title='16 个话题' style='font-size: 20.80487804878pt;'>mysql</a>
<a href='http://opkeep.com/tag/nagios' class='tag-link-234' title='3 个话题' style='font-size: 10.048780487805pt;'>nagios</a>
<a href='http://opkeep.com/tag/nginx' class='tag-link-156' title='19 个话题' style='font-size: 22pt;'>nginx</a>
<a href='http://opkeep.com/tag/openvpn' class='tag-link-391' title='5 个话题' style='font-size: 13.121951219512pt;'>openvpn</a>
<a href='http://opkeep.com/tag/php' class='tag-link-202' title='7 个话题' style='font-size: 15.170731707317pt;'>php</a>
<a href='http://opkeep.com/tag/puppet' class='tag-link-259' title='5 个话题' style='font-size: 13.121951219512pt;'>Puppet</a>
<a href='http://opkeep.com/tag/python' class='tag-link-494' title='11 个话题' style='font-size: 18.243902439024pt;'>python</a>
<a href='http://opkeep.com/tag/resin' class='tag-link-223' title='4 个话题' style='font-size: 11.756097560976pt;'>resin</a>
<a href='http://opkeep.com/tag/rsync' class='tag-link-193' title='5 个话题' style='font-size: 13.121951219512pt;'>rsync</a>
<a href='http://opkeep.com/tag/sed' class='tag-link-159' title='3 个话题' style='font-size: 10.048780487805pt;'>sed</a>
<a href='http://opkeep.com/tag/shell-2' class='tag-link-46' title='13 个话题' style='font-size: 19.439024390244pt;'>shell</a>
<a href='http://opkeep.com/tag/ssh' class='tag-link-319' title='5 个话题' style='font-size: 13.121951219512pt;'>ssh</a>
<a href='http://opkeep.com/tag/ssl' class='tag-link-396' title='5 个话题' style='font-size: 13.121951219512pt;'>ssl</a>
<a href='http://opkeep.com/tag/svn' class='tag-link-172' title='6 个话题' style='font-size: 14.317073170732pt;'>svn</a>
<a href='http://opkeep.com/tag/time' class='tag-link-178' title='3 个话题' style='font-size: 10.048780487805pt;'>time</a>
<a href='http://opkeep.com/tag/utf8' class='tag-link-270' title='3 个话题' style='font-size: 10.048780487805pt;'>utf8</a>
<a href='http://opkeep.com/tag/vi' class='tag-link-20' title='2 个话题' style='font-size: 8pt;'>vi</a>
<a href='http://opkeep.com/tag/vpn' class='tag-link-392' title='6 个话题' style='font-size: 14.317073170732pt;'>vpn</a>
<a href='http://opkeep.com/tag/wordpress-2' class='tag-link-49' title='10 个话题' style='font-size: 17.560975609756pt;'>wordpress</a>
<a href='http://opkeep.com/tag/wp' class='tag-link-36' title='2 个话题' style='font-size: 8pt;'>wp</a>
<a href='http://opkeep.com/tag/yum' class='tag-link-180' title='4 个话题' style='font-size: 11.756097560976pt;'>yum</a>
<a href='http://opkeep.com/tag/%e5%8e%9f%e5%88%9b' class='tag-link-129' title='10 个话题' style='font-size: 17.560975609756pt;'>原创</a>
<a href='http://opkeep.com/tag/%e5%ae%89%e5%85%a8' class='tag-link-85' title='6 个话题' style='font-size: 14.317073170732pt;'>安全</a>
<a href='http://opkeep.com/tag/%e6%89%8b%e5%86%8c' class='tag-link-21' title='14 个话题' style='font-size: 19.951219512195pt;'>手册</a>
<a href='http://opkeep.com/tag/%e6%8f%90%e6%9d%83' class='tag-link-281' title='3 个话题' style='font-size: 10.048780487805pt;'>提权</a>
<a href='http://opkeep.com/tag/%e6%94%bb%e5%87%bb' class='tag-link-27' title='2 个话题' style='font-size: 8pt;'>攻击</a>
<a href='http://opkeep.com/tag/%e6%97%a5%e5%bf%97' class='tag-link-360' title='3 个话题' style='font-size: 10.048780487805pt;'>日志</a>
<a href='http://opkeep.com/tag/%e6%b5%81%e7%a8%8b' class='tag-link-31' title='2 个话题' style='font-size: 8pt;'>流程</a>
<a href='http://opkeep.com/tag/%e7%9b%91%e6%8e%a7' class='tag-link-124' title='8 个话题' style='font-size: 16.024390243902pt;'>监控</a>
<a href='http://opkeep.com/tag/%e7%ae%a1%e7%90%86' class='tag-link-32' title='6 个话题' style='font-size: 14.317073170732pt;'>管理</a>
<a href='http://opkeep.com/tag/%e8%b0%83%e4%bc%98' class='tag-link-120' title='3 个话题' style='font-size: 10.048780487805pt;'>调优</a>
<a href='http://opkeep.com/tag/%e8%bf%90%e7%bb%b4' class='tag-link-29' title='5 个话题' style='font-size: 13.121951219512pt;'>运维</a></p><p>WP Cumulus Flash tag cloud by <a href="http://www.roytanck.com">Roy Tanck</a> and <a href="http://lukemorton.co.uk/">Luke Morton</a> requires <a href="http://www.macromedia.com/go/getflashplayer">Flash Player</a> 9 or better.</p></div><script type="text/javascript">var widget_so182495 = new SWFObject("http://opkeep.com/wp-content/plugins/wp-cumulus/tagcloud.swf?r=7721862", "tagcloudflash", "210", "230", "9", "#");widget_so182495.addParam("wmode", "transparent");widget_so182495.addParam("allowScriptAccess", "always");widget_so182495.addVariable("tcolor", "0x");widget_so182495.addVariable("tcolor2", "0x");widget_so182495.addVariable("hicolor", "0x");widget_so182495.addVariable("tspeed", "100");widget_so182495.addVariable("distr", "true");widget_so182495.addVariable("mode", "tags");widget_so182495.addVariable("tagcloud", "%3Ctags%3E%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Fapache%27+class%3D%27tag-link-78%27+title%3D%276+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+14.317073170732pt%3B%27%3Eapache%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Faws%27+class%3D%27tag-link-505%27+title%3D%274+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+11.756097560976pt%3B%27%3Eaws%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Fbash%27+class%3D%27tag-link-47%27+title%3D%275+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+13.121951219512pt%3B%27%3Ebash%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Fcc%27+class%3D%27tag-link-26%27+title%3D%272+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+8pt%3B%27%3ECC%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Fftp%27+class%3D%27tag-link-175%27+title%3D%274+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+11.756097560976pt%3B%27%3Eftp%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Fgame%27+class%3D%27tag-link-137%27+title%3D%273+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+10.048780487805pt%3B%27%3Egame%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Fip%27+class%3D%27tag-link-405%27+title%3D%273+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+10.048780487805pt%3B%27%3Eip%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Fiptables%27+class%3D%27tag-link-81%27+title%3D%274+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+11.756097560976pt%3B%27%3Eiptables%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Fit%27+class%3D%27tag-link-39%27+title%3D%272+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+8pt%3B%27%3EIT%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Flighttpd%27+class%3D%27tag-link-272%27+title%3D%274+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+11.756097560976pt%3B%27%3Elighttpd%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Flinux-2%27+class%3D%27tag-link-148%27+title%3D%2711+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+18.243902439024pt%3B%27%3Elinux%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Flog%27+class%3D%27tag-link-56%27+title%3D%273+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+10.048780487805pt%3B%27%3Elog%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Flvm%27+class%3D%27tag-link-422%27+title%3D%274+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+11.756097560976pt%3B%27%3Elvm%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Fmysql-2%27+class%3D%27tag-link-8%27+title%3D%2716+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+20.80487804878pt%3B%27%3Emysql%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Fnagios%27+class%3D%27tag-link-234%27+title%3D%273+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+10.048780487805pt%3B%27%3Enagios%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Fnginx%27+class%3D%27tag-link-156%27+title%3D%2719+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+22pt%3B%27%3Enginx%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Fopenvpn%27+class%3D%27tag-link-391%27+title%3D%275+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+13.121951219512pt%3B%27%3Eopenvpn%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Fphp%27+class%3D%27tag-link-202%27+title%3D%277+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+15.170731707317pt%3B%27%3Ephp%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Fpuppet%27+class%3D%27tag-link-259%27+title%3D%275+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+13.121951219512pt%3B%27%3EPuppet%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Fpython%27+class%3D%27tag-link-494%27+title%3D%2711+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+18.243902439024pt%3B%27%3Epython%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Fresin%27+class%3D%27tag-link-223%27+title%3D%274+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+11.756097560976pt%3B%27%3Eresin%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Frsync%27+class%3D%27tag-link-193%27+title%3D%275+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+13.121951219512pt%3B%27%3Ersync%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Fsed%27+class%3D%27tag-link-159%27+title%3D%273+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+10.048780487805pt%3B%27%3Esed%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Fshell-2%27+class%3D%27tag-link-46%27+title%3D%2713+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+19.439024390244pt%3B%27%3Eshell%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Fssh%27+class%3D%27tag-link-319%27+title%3D%275+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+13.121951219512pt%3B%27%3Essh%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Fssl%27+class%3D%27tag-link-396%27+title%3D%275+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+13.121951219512pt%3B%27%3Essl%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Fsvn%27+class%3D%27tag-link-172%27+title%3D%276+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+14.317073170732pt%3B%27%3Esvn%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Ftime%27+class%3D%27tag-link-178%27+title%3D%273+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+10.048780487805pt%3B%27%3Etime%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Futf8%27+class%3D%27tag-link-270%27+title%3D%273+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+10.048780487805pt%3B%27%3Eutf8%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Fvi%27+class%3D%27tag-link-20%27+title%3D%272+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+8pt%3B%27%3Evi%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Fvpn%27+class%3D%27tag-link-392%27+title%3D%276+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+14.317073170732pt%3B%27%3Evpn%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Fwordpress-2%27+class%3D%27tag-link-49%27+title%3D%2710+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+17.560975609756pt%3B%27%3Ewordpress%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Fwp%27+class%3D%27tag-link-36%27+title%3D%272+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+8pt%3B%27%3Ewp%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2Fyum%27+class%3D%27tag-link-180%27+title%3D%274+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+11.756097560976pt%3B%27%3Eyum%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2F%25e5%258e%259f%25e5%2588%259b%27+class%3D%27tag-link-129%27+title%3D%2710+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+17.560975609756pt%3B%27%3E%E5%8E%9F%E5%88%9B%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2F%25e5%25ae%2589%25e5%2585%25a8%27+class%3D%27tag-link-85%27+title%3D%276+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+14.317073170732pt%3B%27%3E%E5%AE%89%E5%85%A8%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2F%25e6%2589%258b%25e5%2586%258c%27+class%3D%27tag-link-21%27+title%3D%2714+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+19.951219512195pt%3B%27%3E%E6%89%8B%E5%86%8C%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2F%25e6%258f%2590%25e6%259d%2583%27+class%3D%27tag-link-281%27+title%3D%273+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+10.048780487805pt%3B%27%3E%E6%8F%90%E6%9D%83%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2F%25e6%2594%25bb%25e5%2587%25bb%27+class%3D%27tag-link-27%27+title%3D%272+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+8pt%3B%27%3E%E6%94%BB%E5%87%BB%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2F%25e6%2597%25a5%25e5%25bf%2597%27+class%3D%27tag-link-360%27+title%3D%273+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+10.048780487805pt%3B%27%3E%E6%97%A5%E5%BF%97%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2F%25e6%25b5%2581%25e7%25a8%258b%27+class%3D%27tag-link-31%27+title%3D%272+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+8pt%3B%27%3E%E6%B5%81%E7%A8%8B%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2F%25e7%259b%2591%25e6%258e%25a7%27+class%3D%27tag-link-124%27+title%3D%278+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+16.024390243902pt%3B%27%3E%E7%9B%91%E6%8E%A7%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2F%25e7%25ae%25a1%25e7%2590%2586%27+class%3D%27tag-link-32%27+title%3D%276+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+14.317073170732pt%3B%27%3E%E7%AE%A1%E7%90%86%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2F%25e8%25b0%2583%25e4%25bc%2598%27+class%3D%27tag-link-120%27+title%3D%273+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+10.048780487805pt%3B%27%3E%E8%B0%83%E4%BC%98%3C%2Fa%3E%0A%3Ca+href%3D%27http%3A%2F%2Fopkeep.com%2Ftag%2F%25e8%25bf%2590%25e7%25bb%25b4%27+class%3D%27tag-link-29%27+title%3D%275+%E4%B8%AA%E8%AF%9D%E9%A2%98%27+style%3D%27font-size%3A+13.121951219512pt%3B%27%3E%E8%BF%90%E7%BB%B4%3C%2Fa%3E%3C%2Ftags%3E");widget_so182495.write("wpcumuluswidgetcontent5606689");</script>	        </li></ul>				<ul><li id=\"recent-posts-4\" class=\"widget widget_recent_entries\">		<h3 class=\"widgettitle\">最新文章</h3>		<ul>
				<li><a href="http://opkeep.com/system/linux/mysql-error-while-loading-shared-libraries-libmysqlclient-so.html" title="安装mysql error while loading shared libraries: libmysqlclient.so">安装mysql error while loading shared libraries: libmysqlclient.so</a></li>
				<li><a href="http://opkeep.com/system/linux/shell-rdm.html" title="shell 生成指定范围随机数与随机字符串">shell 生成指定范围随机数与随机字符串</a></li>
				<li><a href="http://opkeep.com/program/python-program/python-webbrowser.html" title="python 打开网站">python 打开网站</a></li>
				<li><a href="http://opkeep.com/system/linux/setting-up-ssl-on-aws-cloudfront-and-s3.html" title="Setting Up SSL on AWS CloudFront and S3">Setting Up SSL on AWS CloudFront and S3</a></li>
				<li><a href="http://opkeep.com/system/linux/install-the-aws-cli-without-sudo-linux-os-x-or-unix.html" title="Install the AWS CLI Without Sudo (Linux, OS X, or Unix)">Install the AWS CLI Without Sudo (Linux, OS X, or Unix)</a></li>
				<li><a href="http://opkeep.com/system/linux/simple-s3cmd-how-to.html" title="Simple S3cmd How-To">Simple S3cmd How-To</a></li>
				<li><a href="http://opkeep.com/system/linux/ext4.html" title="Ext4">Ext4</a></li>
				<li><a href="http://opkeep.com/system/linux/bash-specially-crafted-environment-variables-code-injection-attack.html" title="Bash specially-crafted environment variables code injection attack">Bash specially-crafted environment variables code injection attack</a></li>
				<li><a href="http://opkeep.com/system/linux/securecr-aws-ec2.html" title="用SecureCRT连接AWS EC2">用SecureCRT连接AWS EC2</a></li>
				<li><a href="http://opkeep.com/program/python-program/python-time.html" title="python 的内嵌time模板翻译及说明">python 的内嵌time模板翻译及说明</a></li>
				<li><a href="http://opkeep.com/interest/education/ali.html" title="阿里上市后：期权存陷阱 如何核算?">阿里上市后：期权存陷阱 如何核算?</a></li>
				<li><a href="http://opkeep.com/program/python-program/python-pip.html" title="多版本Python共存[支持使用pip安装包]">多版本Python共存[支持使用pip安装包]</a></li>
				<li><a href="http://opkeep.com/system/linux/linux-error-stdout.html" title="Linux输入输出错误重定向">Linux输入输出错误重定向</a></li>
				<li><a href="http://opkeep.com/system/linux/ssl-crt.html" title="ssl证书申请步骤">ssl证书申请步骤</a></li>
				<li><a href="http://opkeep.com/system/linux/linux-tcp-error-net-ipv4-ip_conntrack_max-is-an-unknown-key.html" title="tcp连接数 error: “net.ipv4.ip_conntrack_max” is an unknown key">tcp连接数 error: “net.ipv4.ip_conntrack_max” is an unknown key</a></li>
				</ul>
		</li></ul><ul><li id=\"calendar-3\" class=\"widget widget_calendar\"><h3 class=\"widgettitle\">&nbsp;</h3><div id="calendar_wrap"><table id="wp-calendar" summary="日历">
	<caption>2015 一月</caption>
	<thead>
	<tr>
		<th scope="col" title="星期一">一</th>
		<th scope="col" title="星期二">二</th>
		<th scope="col" title="星期三">三</th>
		<th scope="col" title="星期四">四</th>
		<th scope="col" title="星期五">五</th>
		<th scope="col" title="星期六">六</th>
		<th scope="col" title="星期日">日</th>
	</tr>
	</thead>

	<tfoot>
	<tr>
		<td colspan="3" id="prev"><a href="http://opkeep.com/2014/12" title="查看 2014 十二月 的文章">&laquo; 十二</a></td>
		<td class="pad">&nbsp;</td>
		<td colspan="3" id="next" class="pad">&nbsp;</td>
	</tr>
	</tfoot>

	<tbody>
	<tr>
		<td colspan="3" class="pad">&nbsp;</td><td>1</td><td>2</td><td>3</td><td>4</td>
	</tr>
	<tr>
		<td>5</td><td>6</td><td>7</td><td>8</td><td>9</td><td>10</td><td>11</td>
	</tr>
	<tr>
		<td>12</td><td id="today">13</td><td>14</td><td>15</td><td>16</td><td>17</td><td>18</td>
	</tr>
	<tr>
		<td>19</td><td>20</td><td>21</td><td>22</td><td>23</td><td>24</td><td>25</td>
	</tr>
	<tr>
		<td>26</td><td>27</td><td>28</td><td>29</td><td>30</td><td>31</td>
		<td class="pad" colspan="1">&nbsp;</td>
	</tr>
	</tbody>
	</table></div></li></ul><ul><li id=\"links-4\" class=\"widget widget_links\"><h3 class=\"widgettitle\">个人实用</h3>
	<ul class='xoxo blogroll'>
<li><a href="http://www.ibm.com/developerworks/cn" target="_blank">IBM学习网站</a></li>
<li><a href="http://www.ip138.com" title="查询IP属地" target="_blank">IP138</a></li>
<li><a href="http://www.itboba.com/" title="很好的技术视频网站" target="_blank">IT播吧</a></li>
<li><a href="http://www.centreon.com.cn" title="centreon学习的好地方" target="_blank">IT服务管理论坛</a></li>
<li><a href="http://www.linuxsense.org" title="分享Linux技术的点点滴滴" target="_blank">LinuxSense</a></li>
<li><a href="http://bbs.linuxtone.org/?fromuser=jzcxfy" title="IT运维的好地方" target="_blank">LinuxTone</a></li>
<li><a href="http://ping.chinaz.com/" title="网络ping工具" target="_blank">ping</a></li>
<li><a href="http://sed.sourceforge.net/sed1line_zh-CN.html" target="_blank">SED单行脚本快速参考</a></li>
<li><a href="http://tool.chinaz.com/Tracert/" title="网络tracert工具" target="_blank">tracert</a></li>
<li><a href="http://www.shike.org.cn/" title="中国铁路时刻表" target="_blank">中国铁路时刻表</a></li>
<li><a href="http://www.zqgame.com" title="曾经战斗过的游戏公司" target="_blank">中青宝网</a></li>
<li><a href="http://www.my9yu.com" title="正在战斗的游戏公司" target="_blank">九娱网络</a></li>
<li><a href="http://ngmchina.com.cn/" target="_blank">华夏地理</a></li>
<li><a href="http://wwx.456ss.com/mop/map-hubei.html" target="_blank">卫星地图</a></li>
<li><a href="http://www.gliffy.com/" target="_blank">在线绘图</a></li>
<li><a href="http://zyan.cc" target="_blank">张宴的博客</a></li>
<li><a href="http://www.boobooke.com" target="_blank">播布客</a></li>
<li><a href="http://www.dreams8.com/?fromuser=jzcxfy" target="_blank">梦想吧技术论坛</a></li>
<li><a href="http://www.51ibm.com/" target="_blank">电脑报价</a></li>
<li><a href="http://tool.chinaz.com/" title="很强大的站长工具,网络管理人员必备" target="_blank">站长工具</a></li>
<li><a href="http://www.denghao.com/" title="曾经战斗过的时装设计公司" target="_blank">邓皓时装</a></li>
<li><a href="http://www.lvyoubbs.com" target="_blank">驴行天下</a></li>

	</ul>
</li></ul>
<ul><li id=\"links-4\" class=\"widget widget_links\"><h3 class=\"widgettitle\">友情链接</h3>
	<ul class='xoxo blogroll'>
<li><a href="http://www.h2z.org" target="_blank">Antidote</a></li>
<li><a href="http://blog.awkton.com/" title="运维技术学习博客 " target="_blank">awkton.com</a></li>
<li><a href="http://www.darkmi.com/blog/" target="_blank">darkmi’blog</a></li>
<li><a href="http://www.linuxsee.com/" target="_blank">LinuxSEE</a></li>
<li><a href="http://www.linuxfly.org" target="_blank">linuxの飘扬</a></li>
<li><a href="http://www.linuxso.com/" target="_blank">Linux安全网</a></li>
<li><a href="http://www.okpython.com" target="_blank">python中国</a></li>
<li><a href="http://www.linuxany.com/" target="_blank">ubuntu,debian,redhat -linuxany.com</a></li>
<li><a href="http://zlemon.com" title="个人的图片博客" target="_blank">ZLEMON</a></li>
<li><a href="http://blog.csdn.net/reyleon" target="_blank">六子的博客</a></li>
<li><a href="http://imhuo.com" title="一个很可爱的博客" target="_blank">双霍记</a></li>
<li><a href="http://www.lvtao.net/" target="_blank">吕滔博客</a></li>
<li><a href="http://www.chlinux.com" target="_blank">吴小伟个人社区</a></li>
<li><a href="http://blog.liuts.com" title="linux牛人" target="_blank">天涯-刘天斯</a></li>
<li><a href="http://cnctblog.com/" title="I can fly !-和讯网-王太成" target="_blank">安静的角落</a></li>
<li><a href="http://www.sexdiy.org" target="_blank">平平凡凡李可先</a></li>
<li><a href="http://www.oschina.net/">开源中国社区</a></li>
<li><a href="http://www.lazysa.com" title="关系不错的同事" target="_blank">懒人运维</a></li>
<li><a href="http://woyoo.org/" target="_blank">我友博客</a></li>
<li><a href="http://chlotte.com/" target="_blank">星星</a></li>
<li><a href="http://blog.fity.cn" target="_blank">未来往事</a></li>
<li><a href="http://www.windyshade.com" target="_blank">枫影居</a></li>
<li><a href="http://rdc.taobao.com/blog/cs/" title="基础 极致 分享" target="_blank">淘宝系统团队</a></li>
<li><a href="http://sebug.net/vuldb/" target="_blank">漏洞信息</a></li>
<li><a href="http://www.pythonid.com/" title="python学习论坛" target="_blank">灵蛇网</a></li>
<li><a href="http://baoz.net/" title="己所不欲，勿劝他人" target="_blank">素包子</a></li>
<li><a href="http://sudone.com/" target="_blank">网易-Ayou</a></li>
<li><a href="http://www.yufeg.com" title="一个很好的成长博客" target="_blank">羽风</a></li>
<li><a href="http://blog.uouo123.com/" rel="colleague" target="_blank">良玉的博客</a></li>
<li><a href="http://www.jwzzsw.com/" target="_blank">辉之思语</a></li>
<li><a href="http://www.oplinux.com" title="影子牛人" target="_blank">运维 linux 文档</a></li>
<li><a href="http://opkeep.com" title="关注每一个细节" target="_blank">运维人生</a></li>
<li><a href="http://blog.awkton.com" title="运维博客" target="_blank">运维博客</a></li>
<li><a href="http://www.tiejiang.org/" target="_blank">铁匠运维网</a></li>
<li><a href="http://www.sbear.cn/" title="一亩三分田打造超级的熊窝  " target="_blank">阿熊的窝</a></li>
<li><a href="http://m114.org/" title="专注IT领域，分享网络乐趣" target="_blank">飛飛&#039;s Blog</a></li>
<li><a href="http://www.gaojinbo.com" title="零起点一步配置你的linux服务器" target="_blank">高进波linux博客</a></li>

	</ul>
</li></ul>
<ul><li id=\"archives-3\" class=\"widget widget_archive\"><h3 class=\"widgettitle\">归档</h3>		<ul>
			<li><a href='http://opkeep.com/2014/12' title='2014 年十二月'>2014 年十二月</a></li>
	<li><a href='http://opkeep.com/2014/11' title='2014 年十一月'>2014 年十一月</a></li>
	<li><a href='http://opkeep.com/2014/10' title='2014 年十月'>2014 年十月</a></li>
	<li><a href='http://opkeep.com/2014/09' title='2014 年九月'>2014 年九月</a></li>
	<li><a href='http://opkeep.com/2014/08' title='2014 年八月'>2014 年八月</a></li>
	<li><a href='http://opkeep.com/2014/07' title='2014 年七月'>2014 年七月</a></li>
	<li><a href='http://opkeep.com/2014/06' title='2014 年六月'>2014 年六月</a></li>
	<li><a href='http://opkeep.com/2014/05' title='2014 年五月'>2014 年五月</a></li>
	<li><a href='http://opkeep.com/2014/04' title='2014 年四月'>2014 年四月</a></li>
	<li><a href='http://opkeep.com/2014/03' title='2014 年三月'>2014 年三月</a></li>
	<li><a href='http://opkeep.com/2014/02' title='2014 年二月'>2014 年二月</a></li>
	<li><a href='http://opkeep.com/2014/01' title='2014 年一月'>2014 年一月</a></li>
	<li><a href='http://opkeep.com/2013/12' title='2013 年十二月'>2013 年十二月</a></li>
	<li><a href='http://opkeep.com/2013/11' title='2013 年十一月'>2013 年十一月</a></li>
	<li><a href='http://opkeep.com/2013/10' title='2013 年十月'>2013 年十月</a></li>
	<li><a href='http://opkeep.com/2013/09' title='2013 年九月'>2013 年九月</a></li>
	<li><a href='http://opkeep.com/2013/08' title='2013 年八月'>2013 年八月</a></li>
	<li><a href='http://opkeep.com/2013/07' title='2013 年七月'>2013 年七月</a></li>
	<li><a href='http://opkeep.com/2013/06' title='2013 年六月'>2013 年六月</a></li>
	<li><a href='http://opkeep.com/2013/05' title='2013 年五月'>2013 年五月</a></li>
	<li><a href='http://opkeep.com/2013/04' title='2013 年四月'>2013 年四月</a></li>
	<li><a href='http://opkeep.com/2013/03' title='2013 年三月'>2013 年三月</a></li>
	<li><a href='http://opkeep.com/2013/02' title='2013 年二月'>2013 年二月</a></li>
	<li><a href='http://opkeep.com/2013/01' title='2013 年一月'>2013 年一月</a></li>
	<li><a href='http://opkeep.com/2012/12' title='2012 年十二月'>2012 年十二月</a></li>
	<li><a href='http://opkeep.com/2012/11' title='2012 年十一月'>2012 年十一月</a></li>
	<li><a href='http://opkeep.com/2012/10' title='2012 年十月'>2012 年十月</a></li>
	<li><a href='http://opkeep.com/2012/09' title='2012 年九月'>2012 年九月</a></li>
	<li><a href='http://opkeep.com/2012/08' title='2012 年八月'>2012 年八月</a></li>
	<li><a href='http://opkeep.com/2012/07' title='2012 年七月'>2012 年七月</a></li>
	<li><a href='http://opkeep.com/2012/06' title='2012 年六月'>2012 年六月</a></li>
	<li><a href='http://opkeep.com/2012/05' title='2012 年五月'>2012 年五月</a></li>
	<li><a href='http://opkeep.com/2012/04' title='2012 年四月'>2012 年四月</a></li>
	<li><a href='http://opkeep.com/2012/03' title='2012 年三月'>2012 年三月</a></li>
	<li><a href='http://opkeep.com/2012/02' title='2012 年二月'>2012 年二月</a></li>
	<li><a href='http://opkeep.com/2012/01' title='2012 年一月'>2012 年一月</a></li>
	<li><a href='http://opkeep.com/2011/12' title='2011 年十二月'>2011 年十二月</a></li>
	<li><a href='http://opkeep.com/2011/11' title='2011 年十一月'>2011 年十一月</a></li>
	<li><a href='http://opkeep.com/2011/10' title='2011 年十月'>2011 年十月</a></li>
	<li><a href='http://opkeep.com/2011/09' title='2011 年九月'>2011 年九月</a></li>
	<li><a href='http://opkeep.com/2011/08' title='2011 年八月'>2011 年八月</a></li>
	<li><a href='http://opkeep.com/2011/07' title='2011 年七月'>2011 年七月</a></li>
	<li><a href='http://opkeep.com/2011/06' title='2011 年六月'>2011 年六月</a></li>
	<li><a href='http://opkeep.com/2011/05' title='2011 年五月'>2011 年五月</a></li>
	<li><a href='http://opkeep.com/2011/04' title='2011 年四月'>2011 年四月</a></li>
	<li><a href='http://opkeep.com/2011/03' title='2011 年三月'>2011 年三月</a></li>
	<li><a href='http://opkeep.com/2011/02' title='2011 年二月'>2011 年二月</a></li>
	<li><a href='http://opkeep.com/2011/01' title='2011 年一月'>2011 年一月</a></li>
	<li><a href='http://opkeep.com/2010/12' title='2010 年十二月'>2010 年十二月</a></li>
	<li><a href='http://opkeep.com/2010/11' title='2010 年十一月'>2010 年十一月</a></li>
	<li><a href='http://opkeep.com/2010/10' title='2010 年十月'>2010 年十月</a></li>
	<li><a href='http://opkeep.com/2010/09' title='2010 年九月'>2010 年九月</a></li>
	<li><a href='http://opkeep.com/2010/08' title='2010 年八月'>2010 年八月</a></li>
	<li><a href='http://opkeep.com/2010/07' title='2010 年七月'>2010 年七月</a></li>
	<li><a href='http://opkeep.com/2010/06' title='2010 年六月'>2010 年六月</a></li>
		</ul>
</li></ul></aside><section class="clear"></section>  
</section>
<hr />
<footer>
	<p>&copy;2011 <a href="http://opkeep.com//">运维人生</a>
		<script src="http://s15.cnzz.com/stat.php?id=2407622&web_id=2407622" language="JavaScript"></script>
 <a href="http://www.miibeian.gov.cn" target="_blank">鄂ICP备10022950号</a>
		<!--63 queries. 7.815 seconds. -->
	</p>
</footer>
</section>
<script type='text/javascript' src='http://opkeep.com/wp-content/plugins/wp-recentcomments/js/wp-recentcomments.js?ver=2.2.7'></script>
<script>
/* <![CDATA[ */
var rcGlobal = {
	serverUrl		:'http://opkeep.com',
	infoTemp		:'%REVIEWER% 在 %POST%',
	loadingText		:'正在加载',
	noCommentsText	:'没有任何评论',
	newestText		:'&laquo; 最新的',
	newerText		:'&laquo; 上一页',
	olderText		:'下一页 &raquo;',
	showContent		:'1',
	external		:'1',
	avatarSize		:'0',
	avatarPosition	:'right',
	anonymous		:'匿名'
};
/* ]]> */
</script>
</body>
</html>
 