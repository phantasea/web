<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="referrer" content="origin" />
    <title>ubuntu16.04下sublime text 3之安装和配置 - wanlifeipeng - 博客园</title>
<meta property="og:description" content="1.安装方法 1)使用ppa安装 sudo add-apt-repository ppa:webupd8team/sublime-text-3 sudo apt-get update sudo apt" />
    <link type="text/css" rel="stylesheet" href="/bundles/blog-common.css?v=-duj5vpGTntb85GJoM3iRI972XwWcI-j8zmqDzyfu2w1"/>
<link id="MainCss" type="text/css" rel="stylesheet" href="/skins/Cogitation/bundle-Cogitation.css?v=KxzCsGje7vptXKdp2HZBpXmgRp_h-PvgHFxMy8F9r3o1"/>
<link type="text/css" rel="stylesheet" href="/blog/customcss/344359.css?v=%2b4%2bzLmdEWsoyg4qYRvJ%2fiBy%2b82c%3d"/>
<link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="/skins/Cogitation/bundle-Cogitation-mobile.css?v=8j6Kx8lB9U8JmwFiDI1s_wovfxu4g1Yp9_qDjkQUklY1"/>
    <link title="RSS" type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/hupeng1234/rss"/>
    <link title="RSD" type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/hupeng1234/rsd.xml"/>
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="https://www.cnblogs.com/hupeng1234/wlwmanifest.xml"/>
    <script src="//common.cnblogs.com/scripts/jquery-2.2.0.min.js"></script>
    <script>var currentBlogId=344359;var currentBlogApp='hupeng1234',cb_enable_mathjax=true;var isLogined=false;</script>
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']], processClass: 'math', processEscapes: true },
        TeX: { 
            equationNumbers: { autoNumber: ['AMS'], useLabelIds: true }, extensions: ['extpfeil.js'] 
        },
        'HTML-CSS': { linebreaks: { automatic: true } },
        SVG: { linebreaks: { automatic: true } }
        });
    </script><script src="//mathjax.cnblogs.com/2_7_2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script src="/bundles/blog-common.js?v=VgX4QebNYVEriZB17QNjNixx9Ri_FqQR-f_OpLQwxxg1" type="text/javascript"></script>
</head>
<body>
<a name="top"></a>


<div id="top">
	
<div>
	<table>
		<tr>
			<td class="HeaderTitles">
				<h1 class="HeaderTitle"><a id="Header1_HeaderTitle" class="HeaderMainTitle" href="https://www.cnblogs.com/hupeng1234/">wanlifeipeng</a></h1>
				<p id="tagline"></p>
			</td>
		</tr>
	</table>
</div>
<div class="HeaderBar">
	<table id="HeaderBar" class="HeaderBar" cellpadding="0" cellspacing="0">
		<tr>
			<td class="HeaderBarTab" nowrap>
&nbsp;
<a id="blog_nav_sitehome" href="https://www.cnblogs.com/">博客园</a> ::
<a id="blog_nav_myhome" href="https://www.cnblogs.com/hupeng1234/">首页</a> ::
<a href="http://q.cnblogs.com" class="menu">博问</a> ::
<a href="http://home.cnblogs.com/ing/" class="menu">闪存</a> ::
 ::
<a id="blog_nav_contact" accesskey="9" rel="nofollow" href="https://msg.cnblogs.com/send/wanlifeipeng">联系</a> ::
<a id="blog_nav_rss" href="https://www.cnblogs.com/hupeng1234/rss">订阅</a>
<a id="blog_nav_rss_image" class="XMLLink" href="https://www.cnblogs.com/hupeng1234/rss"><img src="//www.cnblogs.com/images/xml.gif" alt="订阅" /></a> ::
<a id="blog_nav_admin" rel="nofollow" href="https://i.cnblogs.com/">管理</a> ::

</td>
			<td><img id="Header1_BlueTab" src="/skins/Cogitation/Images/BlueTabRight.gif" align="absmiddle" /></td>
			<td class="HeaderBarTabBack" nowrap width="100%">
				
			</td>
		</tr>
	</table>
</div>

</div>
<div id="leftmenu">	

	    <div id="blog-calendar" style="display:none"></div><script type="text/javascript">loadBlogDefaultCalendar();</script>
		
<h3>公告</h3>
<div class="News">
	<div id="blog-news"></div><script type="text/javascript">loadBlogNews();</script>
</div>

		<div id="blog-sidecolumn"></div><script type="text/javascript">loadBlogSideColumn();</script>
	
</div>
<div id="main">
	
        <div id="post_detail">
<div class="post">
	<div class="postTitle">
		<a id="cb_post_title_url" href="https://www.cnblogs.com/hupeng1234/p/6957623.html">ubuntu16.04下sublime text 3之安装和配置</a>
	</div>
	
	<div class="postText">
		<div id="cnblogs_post_body" class="blogpost-body"><p>1.安装方法</p>
<p>1)使用ppa安装</p>
<p>sudo add-apt-repository ppa:webupd8team/sublime-text-3</p>
<p>sudo apt-get update</p>
<p>sudo apt-get install sublime-text-installer</p>
<p>卸载 sublime text 命令：</p>
<p>sudo apt-get remove sublime-text-installer</p>
<p>2)使用deb包安装</p>
<p>下载地址形如:&nbsp;https://download.sublimetext.com/files/sublime-text_build-版本号_amd64.deb</p>
<p>3126的下载地址为:https://download.sublimetext.com/files/sublime-text_build-3126_amd64.deb</p>
<p>不过貌似必须FQ才能下载</p>
<p>例如:</p>
<div class="cnblogs_code">
<pre>sudo dpkg -i sublime-text_build-3126_amd64.deb</pre>
</div>
<p>3) 通过apt安装[网络不稳定，可能需要多次尝试]</p>
<p>参考<span style="color: #ff0000">:&nbsp;<a href="http://www.sublimetext.com/docs/3/linux_repositories.html#apt" target="_blank">http://www.sublimetext.com/docs/3/linux_repositories.html#apt</a></span></p>
<p>安装GPG key:</p>
<div class="cnblogs_code">
<pre>wget -qO - https://download.sublimetext.com/sublimehq-pub.gpg | sudo apt-key add -</pre>
</div>
<p>确保apt能够使用https源</p>
<div class="cnblogs_code">
<pre>sudo apt-get install apt-transport-https</pre>
</div>
<p>使用稳定版源</p>
<div class="cnblogs_code">
<pre>echo <span style="color: #800000">"</span><span style="color: #800000">deb https://download.sublimetext.com/ apt/stable/</span><span style="color: #800000">"</span> | sudo tee /etc/apt/sources.list.d/sublime-text.list</pre>
</div>
<p>更新apt源并安装sublime-text</p>
<div class="cnblogs_code">
<pre>sudo apt-<span style="color: #000000">get update
sudo apt</span>-get install sublime-text</pre>
</div>
<p>2. 打开命令</p>
<div class="cnblogs_code">
<pre>subl</pre>
</div>
<p>3.在Help里输入license key(license key可以网上自己搜索)</p>
<div class="cnblogs_code">
<pre><span style="color: #000000">—– BEGIN LICENSE —–
Michael Barnes
Single User License
EA7E</span>-821385<span style="color: #000000">
8A353C41 872A0D5C DF9B2950 AFF6F667
C458EA6D 8EA3C286 98D1D650 131A97AB
AA919AEC EF20E143 B361B1E7 4C8B7F04
B085E65E 2F5F5360 8489D422 FB8FC1AA
93F6323C FD7F7544 3F39C318 D95E6480
FCCC7561 8A4A1741 68FA4223 ADCEDE07
200C25BE DBBC4855 C4CFB774 C5EC138C
0FEC1CEF D9DCECEC D3A5DAD1 01316C36
—— END LICENSE ——</span></pre>
</div>
<p>4.安装Packeage Control</p>
<p>可参考:&nbsp;<a href="https://packagecontrol.io/installation" target="_blank">https://packagecontrol.io/installation</a></p>
<p>在终端输入subl打开sublime text3, 使用快捷键ctrl + `(ESC下面的键),在弹出的控制台中输出以下代码:</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">import</span> urllib.request,os,hashlib; h = <span style="color: #800000">'</span><span style="color: #800000">df21e130d211cfc94d9b0905775a7c0f</span><span style="color: #800000">'</span> + <span style="color: #800000">'</span><span style="color: #800000">1e3d39e33b79698005270310898eea76</span><span style="color: #800000">'</span>; pf = <span style="color: #800000">'</span><span style="color: #800000">Package Control.sublime-package</span><span style="color: #800000">'</span>; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); by = urllib.request.urlopen( <span style="color: #800000">'</span><span style="color: #800000">http://packagecontrol.io/</span><span style="color: #800000">'</span> + pf.replace(<span style="color: #800000">'</span> <span style="color: #800000">'</span>, <span style="color: #800000">'</span><span style="color: #800000">%20</span><span style="color: #800000">'</span>)).read(); dh = hashlib.sha256(by).hexdigest(); <span style="color: #0000ff">print</span>(<span style="color: #800000">'</span><span style="color: #800000">Error validating download (got %s instead of %s), please try manual install</span><span style="color: #800000">'</span> % (dh, h)) <span style="color: #0000ff">if</span> dh != h <span style="color: #0000ff">else</span> open(os.path.join( ipp, pf), <span style="color: #800000">'</span><span style="color: #800000">wb</span><span style="color: #800000">'</span> ).write(by)</pre>
</div>
<p>5.重启软件后可以在Preference菜单下找到Package Control命令</p>
<p>单击运行Packeage Control，搜索Install Package并进入该选项，此时即可为Sublime Text 3安装所需插件</p>
<p>6.关闭自动更新</p>
<p>Preferences -&gt; Settings-User，在{}输入 ,"update_check":false</p>
<p>&nbsp;<img src="https://images2015.cnblogs.com/blog/1135581/201706/1135581-20170607144346278-1183550399.png" alt=""></p>
<p>7.设置一个tab键对应4个空格</p>
<p>Preferences -&gt; Settings-User，在{}输入&nbsp;</p>
<div class="cnblogs_code">
<pre><span style="color: #800000">"</span><span style="color: #800000">tab_size</span><span style="color: #800000">"</span>: 4<span style="color: #000000">,
</span><span style="color: #800000">"</span><span style="color: #800000">translate_tabs_to_spaces</span><span style="color: #800000">"</span>: true</pre>
</div>
<p>8<span style="font-size: 18px">.<span style="color: #ff0000">解决中文无法输入问题</span></span></p>
<div class="cnblogs_code">
<pre>git clone https://github.com/lyfeyaj/sublime-text-<span style="color: #000000">imfix.git
cd sublime</span>-text-imfix/<span style="color: #000000">
sudo cp lib</span>/libsublime-imfix.so /opt/sublime_text/<span style="color: #000000">
sudo cp src</span>/subl /usr/bin/</pre>
</div>
<p>关闭sublime的所有窗口,然后在终端输入subl,此时就可以输入中文了</p>
<div class="cnblogs_code">
<pre>hupeng@hupeng-vm:~<span style="color: #000000">$ which subl
</span>/usr/bin/<span style="color: #000000">subl
hupeng@hupeng</span>-vm:~$ cat /usr/bin/subl   <span style="color: #008000">#</span><span style="color: #008000">查看一下subl命令做了什么</span><span style="color: #008000">
#</span><span style="color: #008000">!/bin/sh</span>
<span style="color: #000000">
export LD_PRELOAD</span>=/opt/sublime_text/libsublime-<span style="color: #000000">imfix.so
</span><span style="color: #0000ff">exec</span> /opt/sublime_text/sublime_text <span style="color: #800000">"</span><span style="color: #800000">$@</span><span style="color: #800000">"</span>hupeng@hupeng-vm:~$ </pre>
</div>
<p><span style="color: #0000ff">最终解决方法:</span></p>
<div class="cnblogs_code">
<pre>sudo vi /usr/share/applications/<span style="color: #000000">sublime_text.desktop 
</span><span style="color: #008000">#</span><span style="color: #008000">修改三个Exec</span>
Exec=bash -c <span style="color: #800000">"</span><span style="color: #800000">LD_PRELOAD=/opt/sublime_text/libsublime-imfix.so exec /opt/sublime_text/sublime_text %F</span><span style="color: #800000">"</span><span style="color: #000000">
Exec</span>=bash -c <span style="color: #800000">"</span><span style="color: #800000">LD_PRELOAD=/opt/sublime_text/libsublime-imfix.so exec /opt/sublime_text/sublime_text -n</span><span style="color: #800000">"</span><span style="color: #000000">
Exec</span>=bash -c <span style="color: #800000">"</span><span style="color: #800000">LD_PRELOAD=/opt/sublime_text/libsublime-imfix.so exec /opt/sublime_text/sublime_text --command new_file</span><span style="color: #800000">"</span></pre>
</div>
<p>/usr/share/applications/sublime_text.desktop内容如下:</p>
<div class="cnblogs_code">
<pre><span style="color: #000000">[Desktop Entry]
Version</span>=1.0<span style="color: #000000">
Type</span>=<span style="color: #000000">Application
Name</span>=<span style="color: #000000">Sublime Text
GenericName</span>=<span style="color: #000000">Text Editor
Comment</span>=Sophisticated text editor <span style="color: #0000ff">for</span> code, markup <span style="color: #0000ff">and</span><span style="color: #000000"> prose
<span style="color: #ff0000">Exec</span></span><span style="color: #ff0000">=bash -c "LD_PRELOAD=/opt/sublime_text/libsublime-imfix.so exec /opt/sublime_text/sublime_text %F"</span><span style="color: #000000">
Terminal</span>=<span style="color: #000000">false
MimeType</span>=text/<span style="color: #000000">plain;
Icon</span>=sublime-<span style="color: #000000">text
Categories</span>=<span style="color: #000000">TextEditor;Development;
StartupNotify</span>=<span style="color: #000000">true
Actions</span>=<span style="color: #000000">Window;Document;

[Desktop Action Window]
Name</span>=<span style="color: #000000">New Window
<span style="color: #ff0000">Exec</span></span><span style="color: #ff0000">=bash -c "LD_PRELOAD=/opt/sublime_text/libsublime-imfix.so exec /opt/sublime_text/sublime_text -n"</span><span style="color: #000000">
OnlyShowIn</span>=<span style="color: #000000">Unity;

[Desktop Action Document]
Name</span>=<span style="color: #000000">New File
<span style="color: #ff0000">Exec</span></span><span style="color: #ff0000">=bash -c "LD_PRELOAD=/opt/sublime_text/libsublime-imfix.so exec /opt/sublime_text/sublime_text --command new_file"</span><span style="color: #000000">
OnlyShowIn</span>=Unity;</pre>
</div>
<h2>&nbsp;遇到的问题:&nbsp;将图标锁定到左侧任务栏后，再从任务栏启动后还是无法输入中文,而且图标显示untitled SublimeText(UNREGISTERED)</h2>
<p>此外在搜索框中搜索会发现</p>
<p><img src="https://images2018.cnblogs.com/blog/1135581/201802/1135581-20180228214845372-587964622.png" alt=""></p>
<p>显然左侧的图标不应该存在，因为已经成功注册。</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000">解决方法:&nbsp;</span></p>
<p><span style="color: #ff0000">反复尝试后发现在多次重装后产生了缓存的.desktop文件。只要将其删除即可。</span></p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000"> 查找相关的文件</span>
find  /  -name sublime*
<span style="color: #008000">#</span><span style="color: #008000"> 意外发现如下的.desktop文件</span>
~/.local/share/applications/<span style="color: #000000">sublime_text.desktop
</span>~/.local/share/applications/<span style="color: #000000">_opt_sublime_text_sublime_text.desktop
</span><span style="color: #008000">#</span><span style="color: #008000"> 内容如下:</span>
<span style="color: #000000">[Desktop Entry]
Encoding</span>=UTF-8<span style="color: #000000">
Version</span>=1.0<span style="color: #000000">
Type</span>=<span style="color: #000000">Application
Name</span>=untitled -<span style="color: #000000"> Sublime Text (UNREGISTERED)
Icon</span>=<span style="color: #000000">sublime_text.png
Path</span>=/<span style="color: #000000">
Exec</span>=/home/hupeng/Desktop/sublime_text_3/<span style="color: #000000">sublime_text
StartupNotify</span>=<span style="color: #000000">false
StartupWMClass</span>=<span style="color: #000000">Sublime_text
OnlyShowIn</span>=<span style="color: #000000">Unity;
X</span>-UnityGenerated=true</pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;效果:</p>
<p><img src="https://images2018.cnblogs.com/blog/1135581/201802/1135581-20180228215418298-1622137769.png" alt=""></p>
<p>&nbsp;</p>
<h1>彻底卸载sublime-text</h1>
<div class="cnblogs_code">
<pre>sudo apt-get remove --purge sublime-<span style="color: #000000">text
sudo apt</span>-<span style="color: #000000">get autoremove

</span><span style="color: #008000">#</span><span style="color: #008000"> 删除配置文件</span>
sudo rm -rf /opt/sublime_text/<span style="color: #000000">
rm </span>-rf ~/.config/sublime-text-3/
<span style="color: #008000">#</span><span style="color: #008000"> 查找相关文件并手动删除</span>
sudo find / -name sublime*<span style="color: #000000">

sudo updatedb
locate sublime</span>-text</pre>
</div>
<p>&nbsp;</p></div><div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory"></div>
<div id="EntryTag"></div>
<div id="blog_post_info">
</div>
<div class="clear"></div>
<div id="post_next_prev"></div>
</div>


	</div>
	
	<div class="postfoot">
		posted on <span id="post-date">2017-06-07 16:12</span> <a href='https://www.cnblogs.com/hupeng1234/'>wanlifeipeng</a> 阅读(<span id="post_view_count">...</span>) 评论(<span id="post_comment_count">...</span>)  <a href ="https://i.cnblogs.com/EditPosts.aspx?postid=6957623" rel="nofollow">编辑</a> <a href="#" onclick="AddToWz(6957623);return false;">收藏</a>
	</div>
</div>
<script type="text/javascript">var allowComments=true,cb_blogId=344359,cb_entryId=6957623,cb_blogApp=currentBlogApp,cb_blogUserGuid='b7f2073e-7413-e711-845c-ac853d9f53ac',cb_entryCreatedDate='2017/6/7 16:12:00';loadViewCount(cb_entryId);var cb_postType=1;var isMarkdown=false;</script>

</div><a name="!comments"></a><div id="blog-comments-placeholder"></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id='comment_form' class='commentform'>
<a name='commentform'></a>
<div id='divCommentShow'></div>
<div id='comment_nav'><span id='span_refresh_tips'></span><a href='javascript:void(0);' onclick='return RefreshCommentList();' id='lnk_RefreshComments' runat='server' clientidmode='Static'>刷新评论</a><a href='#' onclick='return RefreshPage();'>刷新页面</a><a href='#top'>返回顶部</a></div>
<div id='comment_form_container'></div>
<div class='ad_text_commentbox' id='ad_text_under_commentbox'></div>
<div id='ad_t2'></div>
<div id='opt_under_post'></div>
<script async='async' src='https://www.googletagservices.com/tag/js/gpt.js'></script>
<script>
  var googletag = googletag || {};
  googletag.cmd = googletag.cmd || [];
</script>
<script>
  googletag.cmd.push(function() {
        googletag.defineSlot('/1090369/C1', [300, 250], 'div-gpt-ad-1546353474406-0').addService(googletag.pubads());
        googletag.defineSlot('/1090369/C2', [468, 60], 'div-gpt-ad-1539008685004-0').addService(googletag.pubads());
        googletag.pubads().enableSingleRequest();
        googletag.enableServices();
  });
</script>
<div id='cnblogs_c1' class='c_ad_block'>
<div id='div-gpt-ad-1546353474406-0' style='height:250px; width:300px;'>
<script>
if(canShowAdsense()) {
    googletag.cmd.push(function() { googletag.display('div-gpt-ad-1546353474406-0'); });
}
</script>
</div>
</div>
<div id='under_post_news'></div>
<div id='cnblogs_c2' class='c_ad_block'>
    <div id='div-gpt-ad-1539008685004-0' style='height:60px; width:468px;'>
    <script>
    if(canShowAdsense()) {
        googletag.cmd.push(function() { googletag.display('div-gpt-ad-1539008685004-0'); });
    }
    </script>
    </div>
</div>
<div id='under_post_kb'></div>
<div id='HistoryToday' class='c_ad_block'></div>
<script type='text/javascript'>
 if(enablePostBottom()) {
    codeHighlight();
    fixPostBody();
    setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
    deliverAdT2();
    deliverAdC1();
    deliverAdC2();    
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);  
}
</script>
</div>

    
</div>
<div class="footer">

<p id="footer">
	Powered by: 
	<br />
	
	<a id="Footer1_Hyperlink3" NAME="Hyperlink1" href="https://www.cnblogs.com/" style="font-family:Verdana;font-size:12px;">博客园</a>
	<br />
	Copyright &copy; wanlifeipeng
</p>
</div>

</body>
</html>
