<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html><head><meta http-equiv="Content-Type"><title>使用脚本编写 Vim 编辑器，第 4 部分: 字典</title></head><body style="line-height:19px;background:#333333;"><div style="margin:74px 0px 0px;background:#ffffff;"><div style="width:100%;border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #ffffff #ffffff;border-style: solid;"><div style="width:100%;height:22px;overflow:hidden;background:#151724;"><ul style="width:100%;height:22px;float:right;list-style-type:none;"><li style="height:22px;float:right;list-style-type:none;border-width: 0px 0px 0px 1px;border-color: #ffffff #ffffff #ffffff #02050e;border-style: solid;"><a style="font-size:12px;color:#a1a2a7;line-height:14px;" href="http://www.ibm.com/developerworks/cn/" onclick="document.location.href=this.href;return false;" id="531"><img style="width:43px;height:22px;" alt="dW" src="./使用脚本编写 Vim 编辑器，第 4 部分 字典_html/8991597.png"></a></li><li style="float:right;list-style-type:none;border-width: 0px 0px 0px 1px;border-color: #ffffff #ffffff #ffffff #02050e;border-style: solid;"><div style="height:22px;border-width: 0px 1px 0px 0px;border-color: #ffffff #2b2d39 #ffffff #ffffff;border-style: solid;padding:0px 24px;"><a style="font-size:12px;color:#666666;line-height:14px;padding:0px 22px 0px;background:#151724;" href="http://www.ibm.com/developerworks/cn/linux/l-vim-script-4/index.html#" onclick="document.location.reload();return false;" id="532">登录 (或注册)</a></div></li><li style="float:right;list-style-type:none;border-width: 0px 1px 0px 1px;border-color: #ffffff #2b2d39 #ffffff #2b2d39;border-style: solid;"><div style="height:22px;border-width: 0px 0px 0px 1px;border-color: #ffffff #ffffff #ffffff #02050e;border-style: solid;padding:0px 24px;"><a style="font-size:12px;color:#a1a2a7;line-height:14px;padding:0px 14px 0px;background:#151724;" href="http://www.ibm.com/developerworks/cn/linux/l-vim-script-4/index.html#SELECTLANG" onclick="document.location.reload();return false;" id="533">中文</a></div></li><li style="height:22px;float:left;list-style-type:none;margin:0px 0px 0px 20px;"><a style="font-size:12px;color:#eeeeee;line-height:14px;margin:2px 0px 0px;padding:0px 14px 0px;background:#151724;" href="http://www.ibm.com/" onclick="document.location.href=this.href;return false;" id="534">IBM</a></li></ul></div><div style="width:100%;height:52px;overflow:hidden;background:#ffffff;"><ul style="list-style-type:none;"><li style="float:left;list-style-type:none;padding:11px 14px 0px 20px;"><a style="color:#00649d;" href="http://www.ibm.com/developerworks/cn/" onclick="document.location.href=this.href;return false;" id="535"><img style="width:225px;height:28px;" alt="developerWorks®" src="./使用脚本编写 Vim 编辑器，第 4 部分 字典_html/11144753.png"></a></li></ul><ul style="list-style-type:none;"><li style="height:52px;float:left;list-style-type:none;padding:0px 10px;"><a style="display:block;height:38px;font-weight:normal;color:#cccccc;padding:14px 13px 0px 13px;" href="http://www.ibm.com/developerworks/cn/topics/" onclick="document.location.href=this.href;return false;" id="536">技术主题</a></li><li style="height:52px;float:left;list-style-type:none;padding:0px 10px;"><a style="display:block;height:38px;font-weight:normal;color:#cccccc;padding:14px 13px 0px 13px;" href="http://www.ibm.com/developerworks/cn/downloads/" onclick="document.location.href=this.href;return false;" id="537">软件下载</a></li><li style="height:52px;float:left;list-style-type:none;padding:0px 10px;"><a style="display:block;height:38px;font-weight:normal;color:#cccccc;padding:14px 13px 0px 13px;" href="http://www.ibm.com/developerworks/community/?lang=zh" onclick="document.location.href=this.href;return false;" id="538">社区</a></li><li style="height:52px;float:left;list-style-type:none;padding:0px 10px;"><a style="display:block;height:38px;font-weight:normal;color:#cccccc;padding:14px 13px 0px 13px;" href="https://www.ibm.com/developerworks/community/groups/service/html/communityview?communityUuid=6d7f9e5d-5f89-4767-a006-a81b8d186370&amp;lang=zh" onclick="document.location.href=this.href;return false;" id="539">技术讲座</a></li></ul><form style="height:24px;float:right;margin:13px 42px -36px 1px;" accept-charset="utf-8" method="GET" name="form1" action="http://www.ibm.com/search/csass/search/"><input name="sn" type="hidden" value="dw" id="540"><input name="lang" type="hidden" value="zh" id="541"><input name="cc" type="hidden" value="CN" id="542"><input name="en" type="hidden" value="utf" id="543"><input name="hpp" type="hidden" value="20" id="544"><input name="dws" type="hidden" value="cndw" id="545"><input name="lo" type="hidden" value="zh" id="546"><p><label><span style="display:block;width:500px;">搜索 developerWorks</span></label><input style="display:block;width:180px;height:17px;float:left;font-size:13px;font-weight:normal;color:#888888;border:1px solid #;padding:3px 30px 2px 10px;background:;" maxlength="100" name="q" type="text" value="搜索 developerWorks" id="547"><input style="display:block;width:24px;height:21px;float:left;font-size:0px;font-weight:normal;color:#000000;text-align:right;white-space:pre;margin:0px 0px 0px -30px;background:#ffffff url(http://1.www.s81c.com/i/v17/icons/search.png) no-repeat 0 3px;" onclick="document.location.reload();" type="submit" value="提交" id="548"></p></form></div></div><div style="width:500px;"></div><div style="clear:both;border-width: 0px 0px 1px 0px;border-color: #ffffff #ffffff #e5e5e5 #ffffff;border-style: solid;margin:-2px 0px 0px;background:#f9f9f9;"><div style="width:940px;"><ul style="font-size:11px;line-height:11px;list-style-type:none;padding:15px 0px 0px;"><li style="display:block;float:left;padding:0px 16px 0px 2px;background:#f9f9f9 url(http://1.www.s81c.com/i/v17/t/nav-trail.gif) no-repeat 100% 1px;"><a style="color:#666666;" href="http://www.ibm.com/developerworks/cn/" onclick="document.location.href=this.href;return false;" id="549">developerWorks 中国</a></li><li style="display:block;float:left;padding:0px 16px 0px 2px;background:#f9f9f9 url(http://1.www.s81c.com/i/v17/t/nav-trail.gif) no-repeat 100% 1px;"><a style="color:#666666;" href="http://www.ibm.com/developerworks/cn/topics/" onclick="document.location.href=this.href;return false;" id="550">技术主题</a></li><li style="display:block;float:left;padding:0px 16px 0px 2px;background:#f9f9f9 url(http://1.www.s81c.com/i/v17/t/nav-trail.gif) no-repeat 100% 1px;"><a style="color:#666666;" href="http://www.ibm.com/developerworks/cn/linux/" onclick="document.location.href=this.href;return false;" id="551">Linux</a></li><li style="display:block;float:left;padding:0px 16px 0px 2px;background:#f9f9f9 url(http://1.www.s81c.com/i/v17/t/nav-trail.gif) no-repeat 100% 1px;"><a style="color:#666666;" href="http://www.ibm.com/developerworks/cn/views/linux/libraryview.jsp" onclick="document.location.href=this.href;return false;" id="552">文档库</a></li></ul><h1 style="width:920px;font-size:32px;font-weight:bold;clear:both;line-height:32px;padding:10px 10px 10px;">使用脚本编写 Vim 编辑器，第 4 部分: 字典</h1><p style="width:920px;padding:0px 0px 10px;"><em style="font-style:normal;color:#666666;"><span style="display:block;font-weight:bold;color:#b8471b;">学习何时使用字典使代码更简洁，更迅速</span></em></p></div><div style="width:940px;overflow:hidden;clear:both;padding:0px 0px 20px;"><div style="width:620px;float:left;margin:0px 20px 0px;"><p style="width:620px;font-size:15px;color:#333333;padding:0px 0px 10px;">字典是一个从列表提供不同优化和权衡的容器数据结构。特别说明的是，字典中元素存储的顺序是无关紧要的，每个元素的身份是明确的。在介绍 Vimscript <a style="color:#00649d;margin:15px 0px 0px;" href="http://www.ibm.com/developerworks/cn/views/linux/libraryview.jsp?search_by=%E4%BD%BF%E7%94%A8%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99+Vim+%E7%BC%96%E8%BE%91%E5%99%A8" onclick="document.location.href=this.href;return false;" id="553">系列</a>文章的第四篇中，Damian Conway 将向您介绍字典，包括它们的基础语法和许多函数的概述。他最后还举出了一些例子，来说明如何使用字典获取更有效的数据处理和更简洁的代码。</p><p style="width:620px;font-size:15px;color:#333333;padding:0px 0px 10px;"><a style="color:#00649d;line-height:18px;margin:15px 0px 0px;padding:0px 0px 0px 16px;background:#f9f9f9 url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_arrow_blue_ON.png) no-repeat 0 -1px;" href="http://www.ibm.com/developerworks/cn/views/linux/libraryview.jsp?search_by=%E4%BD%BF%E7%94%A8%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99+Vim+%E7%BC%96%E8%BE%91%E5%99%A8" onclick="document.location.href=this.href;return false;" id="554">查看本系列更多内容</a><span style="color:#999999;margin:0px 8px;">|</span><span style="margin:-2px 0px 0px;"></span></p></div><div style="width:290px;float:left;margin:0px 5px 90px;"><p style="width:290px;font-size:12px;color:#333333;line-height:15px;padding:4px 0px 0px;"><a style="color:#00649d;margin:15px 0px 0px;padding:0px 0px 0px 16px;background:#f9f9f9 url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_links_blue_ON.png) no-repeat 0 -601px;" href="http://www.ibm.com/developerworks/cn/linux/l-vim-script-4/index.html#authorN1002A" onclick="document.location.reload();return false;" id="555">Damian Conway</a>, CEO 兼首席培训师, Thoughtstream</p><p style="width:290px;font-size:12px;color:#333333;line-height:15px;padding:12px 0px 6px;">2010 年 4 月 08 日</p><div style="width:290px;color:#666666;border:1px solid #cccccc;margin:10px 0px 0px;padding:0px 5px 0px;background:#ffffff;"><div style="clear:both;"><ul style="list-style-type:none;"><li style="list-style-type:none;padding:5px 4px 5px 3px;"><a style="display:block;width:16px;height:16px;overflow:hidden;float:left;color:#00649d;padding:0px 4px 0px;background:#ffffff url(http://www.ibm.com/i/v17/icons/_icons/ibm_icon_blue_minimize.png) no-repeat 0 0;" href="http://www.ibm.com/developerworks/cn/linux/l-vim-script-4/index.html#toggle" onclick="document.location.reload();return false;" id="556"><img style="width:1px;height:1px;" alt="-" src="./使用脚本编写 Vim 编辑器，第 4 部分 字典_html/5559429.gif"></a><span style="display:block;font-size:14px;font-weight:bold;line-height:16px;margin:0px 0px 0px 16px;">内容</span><div style="clear:left;margin:0px 0px 0px 16px;"><ul style="font-size:12px;line-height:14px;list-style-type:none;"><li style="list-style-type:none;padding:5px 4px 5px 3px;"><a style="display:block;color:#00649d;line-height:15px;padding:0px 4px 0px 16px;background:#ffffff url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_arrow_blue_ON.png) no-repeat 0 -601px;" href="http://www.ibm.com/developerworks/cn/linux/l-vim-script-4/index.html#N1005C" onclick="document.location.reload();return false;" id="557">Vimscript 中的字典</a></li><li style="list-style-type:none;padding:5px 4px 5px 3px;"><a style="display:block;color:#00649d;line-height:15px;padding:0px 4px 0px 16px;background:#ffffff url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_arrow_blue_ON.png) no-repeat 0 -601px;" href="http://www.ibm.com/developerworks/cn/linux/l-vim-script-4/index.html#N100A3" onclick="document.location.reload();return false;" id="558">字典的批量处理</a></li><li style="list-style-type:none;padding:5px 4px 5px 3px;"><a style="display:block;color:#00649d;line-height:15px;padding:0px 4px 0px 16px;background:#ffffff url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_arrow_blue_ON.png) no-repeat 0 -601px;" href="http://www.ibm.com/developerworks/cn/linux/l-vim-script-4/index.html#N100BC" onclick="document.location.reload();return false;" id="559">赋值和身份</a></li><li style="list-style-type:none;padding:5px 4px 5px 3px;"><a style="display:block;color:#00649d;line-height:15px;padding:0px 4px 0px 16px;background:#ffffff url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_arrow_blue_ON.png) no-repeat 0 -601px;" href="http://www.ibm.com/developerworks/cn/linux/l-vim-script-4/index.html#N100E4" onclick="document.location.reload();return false;" id="560">添加和删除条目</a></li><li style="list-style-type:none;padding:5px 4px 5px 3px;"><a style="display:block;color:#00649d;line-height:15px;padding:0px 4px 0px 16px;background:#ffffff url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_arrow_blue_ON.png) no-repeat 0 -601px;" href="http://www.ibm.com/developerworks/cn/linux/l-vim-script-4/index.html#N1012F" onclick="document.location.reload();return false;" id="561">其它字典相关函数</a></li><li style="list-style-type:none;padding:5px 4px 5px 3px;"><a style="display:block;color:#00649d;line-height:15px;padding:0px 4px 0px 16px;background:#ffffff url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_arrow_blue_ON.png) no-repeat 0 -601px;" href="http://www.ibm.com/developerworks/cn/linux/l-vim-script-4/index.html#N10168" onclick="document.location.reload();return false;" id="562">部署字典获得更简洁的代码</a></li><li style="list-style-type:none;padding:5px 4px 5px 3px;"><a style="display:block;color:#00649d;line-height:15px;padding:0px 4px 0px 16px;background:#ffffff url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_arrow_blue_ON.png) no-repeat 0 -601px;" href="http://www.ibm.com/developerworks/cn/linux/l-vim-script-4/index.html#N101DA" onclick="document.location.reload();return false;" id="563">重构自动对齐</a></li><li style="list-style-type:none;padding:5px 4px 5px 3px;"><a style="display:block;color:#00649d;line-height:15px;padding:0px 4px 0px 16px;background:#ffffff url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_arrow_blue_ON.png) no-repeat 0 -601px;" href="http://www.ibm.com/developerworks/cn/linux/l-vim-script-4/index.html#N1023A" onclick="document.location.reload();return false;" id="564">作为数据结构的字典</a></li><li style="list-style-type:none;padding:5px 4px 5px 3px;"><a style="display:block;color:#00649d;line-height:15px;padding:0px 4px 0px 16px;background:#ffffff url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_arrow_blue_ON.png) no-repeat 0 -601px;" href="http://www.ibm.com/developerworks/cn/linux/l-vim-script-4/index.html#N102A2" onclick="document.location.reload();return false;" id="565">展望未来</a></li><li style="list-style-type:none;padding:5px 4px 5px 3px;"><a style="display:block;color:#00649d;line-height:15px;padding:0px 4px 0px 16px;background:#ffffff url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_arrow_blue_ON.png) no-repeat 0 -601px;" href="http://www.ibm.com/developerworks/cn/linux/l-vim-script-4/index.html#resources" onclick="document.location.reload();return false;" id="566">参考资料 </a></li><li style="list-style-type:none;padding:5px 4px 5px 3px;"><a style="display:block;color:#00649d;line-height:15px;padding:0px 4px 0px 16px;background:#ffffff url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_arrow_blue_ON.png) no-repeat 0 -601px;" href="http://www.ibm.com/developerworks/cn/linux/l-vim-script-4/index.html#icomments" onclick="document.location.reload();return false;" id="567">评论</a></li></ul></div></li></ul></div></div></div></div></div><div style="width:980px;margin:20px 0px;padding:0px 0px 10px;background:#ffffff;"><div style="width:100%;float:left;font-size:12px;line-height:14px;"><div style="background:#ffffff;"><div style="width:980px;float:left;clear:left;"><div style="width:960px;overflow:hidden;clear:both;padding:0px 10px 10px 10px;"><div style="width:940px;clear:both;padding:0px 10px;"><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">Vimscript 中的<em>字典</em>在本质上和 AWK 关联数组、Perl 哈希表，或者 Python 字典都是一样。也就是说，这是一个无序容器，按字符串而不是整数来进行索引。</p><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">Vimscript <a style="color:#00649d;" href="http://www.ibm.com/developerworks/cn/views/linux/libraryview.jsp?search_by=%E4%BD%BF%E7%94%A8%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99+Vim+%E7%BC%96%E8%BE%91%E5%99%A8" onclick="document.location.href=this.href;return false;" id="568">系列</a>的第四篇将会介绍这一重要的数据结构，并解释其复制、过滤、扩展和整理的多项功能。这些例子重点说明列表和字典之间的差别，以及一些例子。在这些例子中，与讲述内置列表的 <a style="color:#00649d;" href="http://www.ibm.com/developerworks/cn/linux/l-vim-script-3/" onclick="document.location.href=this.href;return false;" id="569">使用脚本编写 Vim 编辑器，第 3 部分：内置列表</a>中开发出的基于列表的解决方案相比，使用字典是一个更好的替代方案。</p><h2 style="font-size:20px;font-weight:bold;line-height:24px;margin:5px 0px;">Vimscript 中的字典</h2><p style="font-size:14px;color:#222222;line-height:22px;margin:-2px 0px 0px;padding:0px 0px 6px;">您可以通过在键/值对列表上加花括号来创建一个字典。在每一对中，键和值用冒号分隔。例如：</p><h5 style="font-size:14px;font-weight:bold;line-height:16px;margin:5px 0px 0px;">清单 1. 创建一个字典</h5><div><pre style="display:block;width:780px;font-size:11px;clear:right;line-height:13px;white-space:pre;border:1px solid #cccccc;margin:0px 0px 6px;padding:5px 10px 5px 3px;background:#f7f7f7;">let seen = {}   <em>" Haven't seen anything yet</em>
let daytonum = { 'Sun':0, 'Mon':1, 'Tue':2, 'Wed':3, 'Thu':4, 'Fri':5, 'Sat':6 }
let diagnosis = {
    \   'Perl'   : 'Tourettes',<br>    \   'Python' : 'OCD',<br>    \   'Lisp'   : 'Megalomania',<br>    \   'PHP'    : 'Idiot-Savant',<br>    \   'C++'    : 'Savant-Idiot',<br>    \   'C#'     : 'Sociopathy',<br>    \   'Java'   : 'Delusional',<br>    \}</pre></div><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">一旦完成了创建字典，您就可以使用标准方括号索引符号来访问它的值，但是要使用字符串作为索引而不是一个数字：</p><div><pre style="display:block;width:780px;font-size:11px;clear:right;line-height:13px;white-space:pre;border:1px solid #cccccc;margin:0px 0px 6px;padding:5px 10px 5px 3px;background:#f7f7f7;">let lang = input("Patient's name? ")<br>let Dx = diagnosis[lang]</pre></div><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">如果在字典中不存在该键，就抛出一个异常：</p><div><pre style="display:block;width:780px;font-size:11px;clear:right;line-height:13px;white-space:pre;border:1px solid #cccccc;margin:0px 0px 6px;padding:5px 10px 5px 3px;background:#f7f7f7;">let Dx = diagnosis['Ruby']<strong style="font-weight:bold;">**E716: Key not present in Dictionary: Ruby**</strong></pre></div><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">不过，您可以使用 <code style="color:#000000;line-height:21px;">get()</code>函数，安全地访问一个可能不存在的条目。<code style="color:#000000;line-height:21px;">get()</code>使用两个参数：一个是字典本身，另一个是在字典中查找的键。如果字典中存在该键，就会返回相应的值；如果键不存在，<code style="color:#000000;line-height:21px;">get()</code>就返回零。或者，您可以指定第三个参数，如果没有找到键，<code style="color:#000000;line-height:21px;">get()</code>返回这个值：</p><div><pre style="display:block;width:780px;font-size:11px;clear:right;line-height:13px;white-space:pre;border:1px solid #cccccc;margin:0px 0px 6px;padding:5px 10px 5px 3px;background:#f7f7f7;">let Dx = get(diagnosis, 'Ruby')                     <em>" Returns: 0</em>
let Dx = get(diagnosis, 'Ruby', 'Schizophrenia')    
<em>" Returns: 'Schizophrenia'</em></pre></div><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">访问一个特殊的字典条目还有第三个方法。如果这个条目的键只由标识符字符（字母数字和下划线）组成，您可以使用 “点符号” 访问相应的值，就像：</p><div><pre style="display:block;width:780px;font-size:11px;clear:right;line-height:13px;white-space:pre;border:1px solid #cccccc;margin:0px 0px 6px;padding:5px 10px 5px 3px;background:#f7f7f7;">let Dx = diagnosis.Lisp                    <em>" Same as: diagnosis['Lisp']</em>
diagnosis.Perl = 'Multiple Personality'    <em>" Same as: diagnosis['Perl']</em></pre></div><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">这种特殊限制符号使得字典就像记录或者结构体一样易于使用：</p><div><pre style="display:block;width:780px;font-size:11px;clear:right;line-height:13px;white-space:pre;border:1px solid #cccccc;margin:0px 0px 6px;padding:5px 10px 5px 3px;background:#f7f7f7;">let user = {}<br>let user.name    = 'Bram'<br>let user.acct    = 123007<br>let user.pin_num = '1337'</pre></div><div style="height:1px;font-size:0px;clear:both;margin:10px 0px;background:#cccccc;"></div><p style="font-size:14px;color:#222222;clear:both;line-height:22px;text-align:right;padding:6px 0px;"><a style="font-weight:bold;color:#00649d;line-height:15px;padding:0px 0px 0px 16px;background:#ffffff url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_arrow_blue_ON.png) no-repeat 0 -401px;" href="http://www.ibm.com/developerworks/cn/linux/l-vim-script-4/index.html#ibm-pcon" onclick="document.location.reload();return false;" id="570">回页首</a></p><h2 style="font-size:20px;font-weight:bold;line-height:24px;margin:5px 0px;">字典的批量处理</h2><p style="font-size:14px;color:#222222;line-height:22px;margin:-2px 0px 0px;padding:0px 0px 6px;">Vimscript 提供一些功能，允许您获取字典中所有键的列表、所有值的列表，或者所有键/值对的列表：</p><div><pre style="display:block;width:780px;font-size:11px;clear:right;line-height:13px;white-space:pre;border:1px solid #cccccc;margin:0px 0px 6px;padding:5px 10px 5px 3px;background:#f7f7f7;">let keylist   = keys(dict)<br>let valuelist = values(dict)<br>let pairlist  = items(dict)</pre></div><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">这个 <code style="color:#000000;line-height:21px;">items()</code>函数事实上返回一个列表的清单，其中，每个 “内部” 清单正好有两个元素：一个键及其对应值。因此，<code style="color:#000000;line-height:21px;">items()</code>在您想要迭代字典中所有条目的时候尤为方便：</p><div><pre style="display:block;width:780px;font-size:11px;clear:right;line-height:13px;white-space:pre;border:1px solid #cccccc;margin:0px 0px 6px;padding:5px 10px 5px 3px;background:#f7f7f7;"><strong style="font-weight:bold;">for [next_key, next_val] in items(dict)</strong>
    let result = process(next_val)
    echo "Result for " next_key " is " result
endfor</pre></div><div style="height:1px;font-size:0px;clear:both;margin:10px 0px;background:#cccccc;"></div><p style="font-size:14px;color:#222222;clear:both;line-height:22px;text-align:right;padding:6px 0px;"><a style="font-weight:bold;color:#00649d;line-height:15px;padding:0px 0px 0px 16px;background:#ffffff url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_arrow_blue_ON.png) no-repeat 0 -401px;" href="http://www.ibm.com/developerworks/cn/linux/l-vim-script-4/index.html#ibm-pcon" onclick="document.location.reload();return false;" id="571">回页首</a></p><h2 style="font-size:20px;font-weight:bold;line-height:24px;margin:5px 0px;">赋值和身份</h2><p style="font-size:14px;color:#222222;line-height:22px;margin:-2px 0px 0px;padding:0px 0px 6px;">在字典中赋值就和在 Vimscript 列表中一样。字典由引用（即指针）来表示，所以将字典赋给另一个变量就将两个变量设为相同的底层数据结构，前者相当于后者的别名。您可以首先通过复制或者深复制（deep-coping）原始内容来解决这个问题：</p><div><pre style="display:block;width:780px;font-size:11px;clear:right;line-height:13px;white-space:pre;border:1px solid #cccccc;margin:0px 0px 6px;padding:5px 10px 5px 3px;background:#f7f7f7;">let dict2 = dict1             <em>" dict2 just another name for dict1</em>
                                  
let dict3 = copy(dict1)       <em>" dict3 has a copy of dict1's top-level elements</em>
let dict4 = deepcopy(dict1)   <em>" dict4 has a copy of dict1 (all the way down)</em></pre></div><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">和列表一样，您可以用 <em>is</em>操作符来比较身份，用 <em>==</em>操作符来比较值：</p><div><pre style="display:block;width:780px;font-size:11px;clear:right;line-height:13px;white-space:pre;border:1px solid #cccccc;margin:0px 0px 6px;padding:5px 10px 5px 3px;background:#f7f7f7;">if dictA is dictB<br>    <em>" They alias the same container, so must have the same keys and values</em>
elseif dictA == dictB
    <em>" Same keys and values, but maybe in different containers</em>
else
    <em>" Different keys and/or values, so must be different containers</em>
endif</pre></div><div style="height:1px;font-size:0px;clear:both;margin:10px 0px;background:#cccccc;"></div><p style="font-size:14px;color:#222222;clear:both;line-height:22px;text-align:right;padding:6px 0px;"><a style="font-weight:bold;color:#00649d;line-height:15px;padding:0px 0px 0px 16px;background:#ffffff url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_arrow_blue_ON.png) no-repeat 0 -401px;" href="http://www.ibm.com/developerworks/cn/linux/l-vim-script-4/index.html#ibm-pcon" onclick="document.location.reload();return false;" id="572">回页首</a></p><h2 style="font-size:20px;font-weight:bold;line-height:24px;margin:5px 0px;">添加和删除条目</h2><p style="font-size:14px;color:#222222;line-height:22px;margin:-2px 0px 0px;padding:0px 0px 6px;">将一个条目添加到字典中，只需要对新的键赋一个值：</p><div><pre style="display:block;width:780px;font-size:11px;clear:right;line-height:13px;white-space:pre;border:1px solid #cccccc;margin:0px 0px 6px;padding:5px 10px 5px 3px;background:#f7f7f7;">let diagnosis['COBOL'] = 'Dementia'</pre></div><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">要合并来自其它字典的条目，可以使用 <code style="color:#000000;line-height:21px;">extend()</code>函数。第一参数（正在进行扩展的）和第二参数（包含额外的条目）都必须是字典：</p><div><pre style="display:block;width:780px;font-size:11px;clear:right;line-height:13px;white-space:pre;border:1px solid #cccccc;margin:0px 0px 6px;padding:5px 10px 5px 3px;background:#f7f7f7;">call extend(diagnosis, new_diagnoses)</pre></div><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">当您想要显式添加多个条目时，使用 <code style="color:#000000;line-height:21px;">extend()</code>也是非常方便的：</p><div><pre style="display:block;width:780px;font-size:11px;clear:right;line-height:13px;white-space:pre;border:1px solid #cccccc;margin:0px 0px 6px;padding:5px 10px 5px 3px;background:#f7f7f7;">call extend(diagnosis, {'COBOL':'Dementia', 'Forth':'Dyslexia'})</pre></div><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">将一个独立条目从字典中删除有两种方法：使用内置的 <code style="color:#000000;line-height:21px;">remove()</code>函数，或者使用 <code style="color:#000000;line-height:21px;">unlet</code>命令：</p><div><pre style="display:block;width:780px;font-size:11px;clear:right;line-height:13px;white-space:pre;border:1px solid #cccccc;margin:0px 0px 6px;padding:5px 10px 5px 3px;background:#f7f7f7;">let removed_value = <strong style="font-weight:bold;">remove(dict, "key")</strong><strong style="font-weight:bold;">unlet</strong> dict["key"]</pre></div><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">从一个字典删除多个条目时，使用 <code style="color:#000000;line-height:21px;">filter()</code>会更简洁，更有效。<code style="color:#000000;line-height:21px;">filter()</code>函数的工作方法和列表中的相同，除了用 <code style="color:#000000;line-height:21px;">v:val</code>来检测各条目的值，您还可以用 <code style="color:#000000;line-height:21px;">v:key</code>来检测它的键。例如：</p><h5 style="font-size:14px;font-weight:bold;line-height:16px;margin:5px 0px 0px;">清单 2. 检测值和键</h5><div><pre style="display:block;width:780px;font-size:11px;clear:right;line-height:13px;white-space:pre;border:1px solid #cccccc;margin:0px 0px 6px;padding:5px 10px 5px 3px;background:#f7f7f7;"><em>" Remove any entry whose key starts with C...</em>
call filter(diagnosis, 'v:key[0] != "C"')
<em>" Remove any entry whose value doesn't contain 'Savant'...</em>
call filter(diagnosis, 'v:val =~ "Savant"')
<em>" Remove any entry whose value is the same as its key...</em>
call filter(diagnosis, 'v:key != v:val')</pre></div><div style="height:1px;font-size:0px;clear:both;margin:10px 0px;background:#cccccc;"></div><p style="font-size:14px;color:#222222;clear:both;line-height:22px;text-align:right;padding:6px 0px;"><a style="font-weight:bold;color:#00649d;line-height:15px;padding:0px 0px 0px 16px;background:#ffffff url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_arrow_blue_ON.png) no-repeat 0 -401px;" href="http://www.ibm.com/developerworks/cn/linux/l-vim-script-4/index.html#ibm-pcon" onclick="document.location.reload();return false;" id="573">回页首</a></p><h2 style="font-size:20px;font-weight:bold;line-height:24px;margin:5px 0px;">其它字典相关函数</h2><p style="font-size:14px;color:#222222;line-height:22px;margin:-2px 0px 0px;padding:0px 0px 6px;">除了 <code style="color:#000000;line-height:21px;">filter()</code>以外，字典可以使用其它和列表相同的内置函数和方法。几乎在所有的情况（最显著的例外是 <code style="color:#000000;line-height:21px;">string()</code>）下，一个应用到字典的列表函数的行为就像该函数收到了该字典的一个值列表。清单 3 显示了最常用的函数。</p><h5 style="font-size:14px;font-weight:bold;line-height:16px;margin:5px 0px 0px;">清单 3. 其它适用于字典的列表函数</h5><div><pre style="display:block;width:780px;font-size:11px;clear:right;line-height:13px;white-space:pre;border:1px solid #cccccc;margin:0px 0px 6px;padding:5px 10px 5px 3px;background:#f7f7f7;">let is_empty = empty(dict)           <em>" True if no entries at all</em>
let entry_count = len(dict)          <em>" How many entries?</em>
let occurrences = count(dict, str)   <em>" How many values are equal to str?</em>
let greatest = max(dict)             <em>" Find largest value of any entry</em>
let least    = min(dict)             <em>" Find smallest value of any entry</em>
call map(dict, value_transform_str)  <em>" Transform values by eval'ing string</em>
echo string(dict)                    <em>" Print dictionary as key/value pairs</em></pre></div><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">内置的 <code style="color:#000000;line-height:21px;">filter()</code>在字典内规范化数据时非常方便。例如，给定一个包含首选用户名（或许按用户 ID 索引）的字典，您可以保证每个名称的大小写都正确，就像这样：</p><div><pre style="display:block;width:780px;font-size:11px;clear:right;line-height:13px;white-space:pre;border:1px solid #cccccc;margin:0px 0px 6px;padding:5px 10px 5px 3px;background:#f7f7f7;">call map( names, 'toupper(v:val[0]) . tolower(v:val[1:])' )</pre></div><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">调用 <code style="color:#000000;line-height:21px;">map()</code>可以遍历各个值，将其作为别名赋给 <code style="color:#000000;line-height:21px;">v:val</code>，在字符串中计算表达式，并用表达式结果替换值。在这个例子中，它将名称的首字母大写，其它的字母保持小写，然后用修改过的字符串作为新的名称值。</p><div style="height:1px;font-size:0px;clear:both;margin:10px 0px;background:#cccccc;"></div><p style="font-size:14px;color:#222222;clear:both;line-height:22px;text-align:right;padding:6px 0px;"><a style="font-weight:bold;color:#00649d;line-height:15px;padding:0px 0px 0px 16px;background:#ffffff url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_arrow_blue_ON.png) no-repeat 0 -401px;" href="http://www.ibm.com/developerworks/cn/linux/l-vim-script-4/index.html#ibm-pcon" onclick="document.location.reload();return false;" id="574">回页首</a></p><h2 style="font-size:20px;font-weight:bold;line-height:24px;margin:5px 0px;">部署字典获得更简洁的代码</h2><p style="font-size:14px;color:#222222;line-height:22px;margin:-2px 0px 0px;padding:0px 0px 6px;">本系列的 <a style="color:#00649d;" href="http://www.ibm.com/developerworks/cn/linux/l-vim-script-3/" onclick="document.location.href=this.href;return false;" id="575">使用脚本编写 Vim 编辑器，第 3 部分：内置列表</a>用一个在指定文本周围生成评论框的小例子，解释了 Vimscript 的 <em>variadic</em>函数参数。可选参数可以添加在文本字符串之后，用来指定评论人，用作 “框” 的字符，以及评论的宽度。清单 4 复制了原始的函数。</p><h5 style="font-size:14px;font-weight:bold;line-height:16px;margin:5px 0px 0px;">清单 4. 将可选参数传递为可变参数</h5><div><pre style="display:block;width:780px;font-size:11px;clear:right;line-height:13px;white-space:pre;border:1px solid #cccccc;margin:0px 0px 6px;padding:5px 10px 5px 3px;background:#f7f7f7;">function! CommentBlock(comment, ...)<br>    <em>" If 1 or more optional args, first optional arg is introducer...</em>
    let introducer =  a:0 &gt;= 1  ?  a:1  :  "//"
    <em>" If 2 or more optional args, second optional arg is boxing character...</em>
    let box_char   =  a:0 &gt;= 2  ?  a:2  :  "*"
    <em>" If 3 or more optional args, third optional arg is comment width...</em>
    let width      =  a:0 &gt;= 3  ?  a:3  :  strlen(a:comment) + 2 
    <em>" Build the comment box and put the comment inside it...</em>
    return introducer . repeat(box_char,width) . "\&lt;CR&gt;"
    \    . introducer . " " . a:comment        . "\&lt;CR&gt;"
    \    . introducer . repeat(box_char,width) . "\&lt;CR&gt;"<br>endfunction</pre></div><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">可变参数（variadic arguments）用于指定函数选项是很方便的，但是有两个主要的缺点：它们对函数的参数强制进行明确排序，但在函数调用时没有明确排序。</p><h3 style="font-size:17px;font-weight:bold;line-height:20px;margin:5px 0px;">重温自动评论</h3><p style="font-size:14px;color:#222222;line-height:22px;margin:-2px 0px 0px;padding:0px 0px 6px;">正如 <a style="color:#00649d;" href="http://www.ibm.com/developerworks/cn/linux/l-vim-script-4/index.html#listing2" onclick="document.location.reload();return false;" id="576">清单 4</a>所说明的，当任何参数可选时，通常需要事前决定其指定的排序。然而，这一需要凸显了一个设计问题：为了指定一个稍后的选项，用户必须在此之前明确地指定所有选项。理想情况下，第一选项应该是最常用的，第二选项是第二常用的，以此类推。事实上，在函数广泛部署以前决定这些排序是很困难的；您如何能知道哪个选项对大多数人是最重要的？</p><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">例如，在清单 4 中的 <code style="color:#000000;line-height:21px;">CommentBlock()</code>函数，假设评论人可能是最需要的可选参数，所以将其放置在参数列表的第一位。但是如果这个函数用户只用 C 和 C++ 编程，所以从没有改变过默认评论人要怎么办？更糟糕的是，如果评论块的宽度因各个新项目而不同又会怎样？这将是让人恼火的，因为开发人员现在不得不每次指定所有三个可选参数，即便如此，头两个还是常常会给出其默认值：</p><div><pre style="display:block;width:780px;font-size:11px;clear:right;line-height:13px;white-space:pre;border:1px solid #cccccc;margin:0px 0px 6px;padding:5px 10px 5px 3px;background:#f7f7f7;"><em>" Comment of required width, with standard delimiter and box character...</em>
let new_comment = CommentBlock(comment_text, '//', '*', comment_width)</pre></div><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">这个问题也直接导致了第二个问题，即当任何选项需要被明确地指定时，它们中的几个都不得不被指定。但是，因为默认是通常最需要的值，用户可能会不熟悉如何指定选项，因此也不熟悉所需的排序。这就会导致如下的实现错误：</p><div><pre style="display:block;width:780px;font-size:11px;clear:right;line-height:13px;white-space:pre;border:1px solid #cccccc;margin:0px 0px 6px;padding:5px 10px 5px 3px;background:#f7f7f7;"><em>" Box comment using ==== to standard line width...</em>
let new_comment = CommentBlock(comment_text, '=', 72)</pre></div><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">……令人不安的是，这会产生像这样的（非）评论：</p><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;"><code style="color:#000000;line-height:21px;">=727272727272727272727272727272 = A bad comment =727272727272727272727272727272 </code></p><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">这个问题就是，可选参数没有明确指出它们打算设置哪个选项。它们的含义由它们在参数列表里的位置隐式确定，所以其排序中的任何错误都会悄悄改变其含义。</p><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">这是一个使用错误工具工作的经典案例。只有在顺序很重要，且位置最好地暗示身份时，列表才是完美的。但是，在这个例子中，可选参数的排序与其说是一个有利条件，倒不是说是个麻烦，它们的选项很容易被搞混，这会导致微妙的身份识别错误。</p><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">从某种意义上说，您所想要的和列表上给出的是完全相反的：一个顺序不相关，但身份明确的数据结构。换句话说，就是字典。清单 5 显示了相同的函数，但是使用的是通过字典，而不是可变参数指定的选项。</p><h5 style="font-size:14px;font-weight:bold;line-height:16px;margin:5px 0px 0px;">清单 5. 在字典中传递可选参数</h5><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;"><a style="color:#00649d;padding:0px 0px 0px 16px;background:#ffffff url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_links_blue_ON.png) no-repeat 0 -601px;" href="http://www.ibm.com/developerworks/cn/linux/l-vim-script-4/index.html#N101B9" onclick="document.location.reload();return false;" id="577">点击查看代码清单</a></p><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">这个版本的函数，只传递了两个参数：最重要的评论文本，以及一个选项字典。如果选项没有指定，内置的 <code style="color:#000000;line-height:21px;">get()</code>函数可以用来检索各个选项，或者其默认值。然后调用该函数，用已命名的选项/值对来配置其行为。在函数内实施参数解析就变得较为简洁，函数调用也变得更具可读性，不易出错。例如：</p><div><pre style="display:block;width:780px;font-size:11px;clear:right;line-height:13px;white-space:pre;border:1px solid #cccccc;margin:0px 0px 6px;padding:5px 10px 5px 3px;background:#f7f7f7;"><em>" Comment of required width, with standard delimiter and box character...</em>
let new_comment = CommentBlock(comment_text, {'width':comment_width})
<em>" Box comment using ==== to standard line width...</em>
let new_comment = CommentBlock(comment_text, {'box':'=', 'width':72})</pre></div><div style="height:1px;font-size:0px;clear:both;margin:10px 0px;background:#cccccc;"></div><p style="font-size:14px;color:#222222;clear:both;line-height:22px;text-align:right;padding:6px 0px;"><a style="font-weight:bold;color:#00649d;line-height:15px;padding:0px 0px 0px 16px;background:#ffffff url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_arrow_blue_ON.png) no-repeat 0 -401px;" href="http://www.ibm.com/developerworks/cn/linux/l-vim-script-4/index.html#ibm-pcon" onclick="document.location.reload();return false;" id="578">回页首</a></p><h2 style="font-size:20px;font-weight:bold;line-height:24px;margin:5px 0px;">重构自动对齐</h2><p style="font-size:14px;color:#222222;line-height:22px;margin:-2px 0px 0px;padding:0px 0px 6px;">在本系列 <a style="color:#00649d;" href="http://www.ibm.com/developerworks/cn/linux/l-vim-script-3/" onclick="document.location.href=this.href;return false;" id="579">使用脚本编写 Vim 编辑器，第 3 部分：内置列表</a>中，我们更新了较早的名为 <code style="color:#000000;line-height:21px;">AlignAssignments()</code>的示例函数，对其进行转换使用列表来存储正在修改的文本内容。清单 6 再现了这个函数的升级版。</p><h5 style="font-size:14px;font-weight:bold;line-height:16px;margin:5px 0px 0px;">清单 6. 更新后的 AlignAssignments() 函数</h5><div><pre style="display:block;width:780px;font-size:11px;clear:right;line-height:13px;white-space:pre;border:1px solid #cccccc;margin:0px 0px 6px;padding:5px 10px 5px 3px;background:#f7f7f7;">function! AlignAssignments ()<br>    <em>" Patterns needed to locate assignment operators...</em>
    let ASSIGN_OP   = '[-+*/%|&amp;]\?=\@&lt;!=[=~]\@!'
    let ASSIGN_LINE = '^\(.\{-}\)\s*\(' . ASSIGN_OP . '\)\(.*\)$'
    <em>" Locate block of code to be considered (same indentation, no blanks)...</em>
    let indent_pat = '^' . matchstr(getline('.'), '^\s*') . '\S'
    let firstline  = search('^\%('. indent_pat . '\)\@!','bnW') + 1<br>    let lastline   = search('^\%('. indent_pat . '\)\@!', 'nW') - 1<br>    if lastline &lt; 0<br>        let lastline = line('$')<br>    endif<br>    <em>" Decompose lines at assignment operators...</em>
    let lines = []
    for linetext in getline(firstline, lastline)
        let fields = matchlist(linetext, ASSIGN_LINE)
        call add(lines, fields[1:3])<br>    endfor<br>    <em>" Determine maximal lengths of lvalue and operator...</em>
    let op_lines = filter(copy(lines),'!empty(v:val)')
    let max_lval = max( map(copy(op_lines), 'strlen(v:val[0])') ) + 1
    let max_op   = max( map(copy(op_lines), 'strlen(v:val[1])'  ) )<br>    <em>" Recompose lines with operators at the maximum length...</em>
    let linenum = firstline
    for line in lines
        if !empty(line)
            let newline
            \    = printf("%-*s%*s%s", max_lval, line[0], max_op, line[1], line[2])<br>            call setline(linenum, newline)<br>        endif<br>        let linenum += 1<br>    endfor<br>endfunction</pre></div><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">这个版本对数据进行缓存而不是重新加载，很大程度上改善了函数的有效性，但这会需要更多的维护费用。具体来说，因为它将各行的各种组件存储在小的三元素数组中，代码被 “神奇索引”（例如 <code style="color:#000000;line-height:21px;">v:val[0]</code>和 <code style="color:#000000;line-height:21px;">line[1]</code>）打乱，这些索引的名字对它们的用途没有任何提示。</p><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">字典就是专门解决这一问题的，因为，像列表一样，它将数据整理在一个单独的结构中，但和列表不一样的是，它们用一个字符串对各个数据进行标识，而不是用数字。如果这些字符串经过精心挑选，它们就可以使结果代码更简洁。不使用神奇索引，我们将获得有意义的名称（例如，<code style="color:#000000;line-height:21px;">v:val.lval</code>用于各行的 <code style="color:#000000;line-height:21px;">lvalue</code>，<code style="color:#000000;line-height:21px;">line.op</code>用于各行的操作符）。</p><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">使用字典来重写函数是非常简单的，如清单 7 所示。</p><h5 style="font-size:14px;font-weight:bold;line-height:16px;margin:5px 0px 0px;">清单 7. 进一步改良的 AlignAssignments() 函数</h5><div><pre style="display:block;width:780px;font-size:11px;clear:right;line-height:13px;white-space:pre;border:1px solid #cccccc;margin:0px 0px 6px;padding:5px 10px 5px 3px;background:#f7f7f7;">function! AlignAssignments ()<br>    <em>" Patterns needed to locate assignment operators...</em>
    let ASSIGN_OP   = '[-+*/%|&amp;]\?=\@&lt;!=[=~]\@!'
    let ASSIGN_LINE = '^\(.\{-}\)\s*\(' . ASSIGN_OP . '\)\(.*\)$'
    <em>" Locate block of code to be considered (same indentation, no blanks)...</em>
    let indent_pat = '^' . matchstr(getline('.'), '^\s*') . '\S'
    let firstline  = search('^\%('. indent_pat . '\)\@!','bnW') + 1<br>    let lastline   = search('^\%('. indent_pat . '\)\@!', 'nW') - 1<br>    if lastline &lt; 0<br>        let lastline = line('$')<br>    endif<br>    <em>" Decompose lines at assignment operators...</em>
    let lines = []
    for linetext in getline(firstline, lastline)
        let fields = matchlist(linetext, ASSIGN_LINE)
        <strong style="font-weight:bold;">if len(fields) <br>            call add(lines, {'lval':fields[1], 'op':fields[2], 'rval':fields[3]})<br>        else<br>            call add(lines, {'text':linetext,  'op':''                         })<br>        endif</strong>
    endfor
    <em>" Determine maximal lengths of lvalue and operator...</em>
    let op_lines = filter(copy(lines),'!empty(<strong style="font-weight:bold;">v:val.op</strong>)')<br>    let max_lval = max( map(copy(op_lines), 'strlen(<strong style="font-weight:bold;">v:val.lval</strong>)') ) + 1<br>    let max_op   = max( map(copy(op_lines), 'strlen(<strong style="font-weight:bold;">v:val.op</strong>)'  ) )<br>    <em>" Recompose lines with operators at the maximum length...</em>
    let linenum = firstline
    for line in lines
        <strong style="font-weight:bold;">let newline = empty(line.op)<br>        \ ? line.text<br>        \ : printf("%-*s%*s%s", max_lval, line.lval, max_op, line.op, line.rval)</strong>
        call setline(linenum, newline)
        let linenum += 1
    endfor
endfunction</pre></div><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">新版本中的差异用黑体字标出。只有两处：各行的记录现在是一个字典，而不是一个哈希表，每个记录的元素的后续访问使用已命名的查询，而不是数值索引。总的结果是代码的可读性更强，更不容易发生数组索引常出现的离一（off-by-one）误差。</p><div style="height:1px;font-size:0px;clear:both;margin:10px 0px;background:#cccccc;"></div><p style="font-size:14px;color:#222222;clear:both;line-height:22px;text-align:right;padding:6px 0px;"><a style="font-weight:bold;color:#00649d;line-height:15px;padding:0px 0px 0px 16px;background:#ffffff url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_arrow_blue_ON.png) no-repeat 0 -401px;" href="http://www.ibm.com/developerworks/cn/linux/l-vim-script-4/index.html#ibm-pcon" onclick="document.location.reload();return false;" id="580">回页首</a></p><h2 style="font-size:20px;font-weight:bold;line-height:24px;margin:5px 0px;">作为数据结构的字典</h2><p style="font-size:14px;color:#222222;line-height:22px;margin:-2px 0px 0px;padding:0px 0px 6px;">Vim 提供一个内置的命令，允许您从一个文件中删除重复的行：</p><div><pre style="display:block;width:780px;font-size:11px;clear:right;line-height:13px;white-space:pre;border:1px solid #cccccc;margin:0px 0px 6px;padding:5px 10px 5px 3px;background:#f7f7f7;">:%sort u</pre></div><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;"><code style="color:#000000;line-height:21px;">u</code>选项会使内置的 <code style="color:#000000;line-height:21px;">sort</code>命令删除重复的行（如果它们已经被存储），前导的 <code style="color:#000000;line-height:21px;">%</code>会应用那个特殊的 <code style="color:#000000;line-height:21px;">sort</code>来应用到整个文件。如果您不在意保存文件中唯一一行的原始排序，这是非常方便的。如果这些行是获奖者的名单，一个有限资源的登记表，一个待办事项清单，或者其他注重顺序的序列，这就可能会是一个问题。</p><h3 style="font-size:17px;font-weight:bold;line-height:20px;margin:5px 0px;">无排序唯一性</h3><p style="font-size:14px;color:#222222;line-height:22px;margin:-2px 0px 0px;padding:0px 0px 6px;">字典的键天生是唯一的，所以可以用字典来删除文件的重复行，为了完成这项工作可以采用保存这些行的原始排序的方法。清单 8 展示了一个用于完成该任务的简单函数。</p><h5 style="font-size:14px;font-weight:bold;line-height:16px;margin:5px 0px 0px;">清单 8. 一个保存排序唯一性的函数</h5><div><pre style="display:block;width:780px;font-size:11px;clear:right;line-height:13px;white-space:pre;border:1px solid #cccccc;margin:0px 0px 6px;padding:5px 10px 5px 3px;background:#f7f7f7;">function! Uniq () range<br>    <em>" Nothing unique seen yet...</em>
    let have_already_seen = {}
    let unique_lines = []
    <em>" Walk through the lines, remembering only the hitherto-unseen ones...</em>
    for original_line in getline(a:firstline, a:lastline)
        let normalized_line = '&gt;' . original_line 
        if !has_key(have_already_seen, normalized_line)<br>            call add(unique_lines, original_line)<br>            let have_already_seen[normalized_line] = 1<br>        endif<br>    endfor<br>    <em>" Replace the range of original lines with just the unique lines...</em>
    exec a:firstline . ',' . a:lastline . 'delete'
    call append(a:firstline-1, unique_lines)
endfunction</pre></div><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;"><code style="color:#000000;line-height:21px;">Uniq()</code>函数被声明为接受一个范围，因此只能调用一次，即使在缓冲区内的一个行范围上调用时。</p><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">调用时，它首先设置一个空的字典（<code style="color:#000000;line-height:21px;">have_already_seen</code>），这个字典用于跟踪在指定范围内已经遇到了哪些行。之前没有见过的行就会被添加到存储在 <code style="color:#000000;line-height:21px;">unique_lines</code>的清单中。</p><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">然后函数提供一个循环，准确地完成这一工作。它通过 <code style="color:#000000;line-height:21px;">getline()</code>从缓冲区获取代码的指定范围，并对各项进行迭代。它首先在每一行添加一个前导 <code style="color:#000000;line-height:21px;">'&gt;'</code>，确保它不是空的。Vimscript 字典不能存储一个键为空字符串的条目，所以缓冲区中为空的代码不会被正确地添加到 <code style="color:#000000;line-height:21px;">have_already_seen</code>。</p><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">一旦这些行被规范化，那么函数就能检查该行是否已经作为键在 <code style="color:#000000;line-height:21px;">have_already_seen</code>字典中被使用过。如果是的话，被确定的这行肯定已经被查看过，所以被添加到 <code style="color:#000000;line-height:21px;">unique_lines</code>，这样重复的部分就可以忽略。相反地，如果该行是第一次遇到，那么原始（未规范化的）一行必须被添加到 <code style="color:#000000;line-height:21px;">unique_lines</code>，规范化的那一版必须作为键被添加到 <code style="color:#000000;line-height:21px;">have_already_seen</code>。</p><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">当所有的代码已经按这种方法过滤了一遍之后，<code style="color:#000000;line-height:21px;">unique_lines</code>将会只会包含它们中唯一的子集，按照遇见的先后顺序排列。所有留下的这些行将会删除其原始的行组，用这些积累下来的唯一行来替换它（通过一个 <code style="color:#000000;line-height:21px;">append()</code>）。</p><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">有了这样一个可用的函数，您可以设置一个正常模式的键映射来调用全部文件的命令，就像这样：</p><div><pre style="display:block;width:780px;font-size:11px;clear:right;line-height:13px;white-space:pre;border:1px solid #cccccc;margin:0px 0px 6px;padding:5px 10px 5px 3px;background:#f7f7f7;">nmap ;u :%call Uniq()&lt;CR&gt;</pre></div><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">或者您可以将其应用到一个代码的特殊集中（例如，一个在 Visual 模式中选定的范围），就像这样：</p><div><pre style="display:block;width:780px;font-size:11px;clear:right;line-height:13px;white-space:pre;border:1px solid #cccccc;margin:0px 0px 6px;padding:5px 10px 5px 3px;background:#f7f7f7;">vmap  u :call Uniq()&lt;CR&gt;</pre></div><div style="height:1px;font-size:0px;clear:both;margin:10px 0px;background:#cccccc;"></div><p style="font-size:14px;color:#222222;clear:both;line-height:22px;text-align:right;padding:6px 0px;"><a style="font-weight:bold;color:#00649d;line-height:15px;padding:0px 0px 0px 16px;background:#ffffff url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_arrow_blue_ON.png) no-repeat 0 -401px;" href="http://www.ibm.com/developerworks/cn/linux/l-vim-script-4/index.html#ibm-pcon" onclick="document.location.reload();return false;" id="581">回页首</a></p><h2 style="font-size:20px;font-weight:bold;line-height:24px;margin:5px 0px;">展望未来</h2><p style="font-size:14px;color:#222222;line-height:22px;margin:-2px 0px 0px;padding:0px 0px 6px;">目前我们讨论的 Vimscript 基本特性（语句和函数，数组和哈希表）已经足够为 Vim 的核心特性集创建几乎任何类型的添加项。但是我们所看到的扩展，都需要用户通过发布一个正常模式命令，或者在插入模式中输入一个特殊的序列，明确地请求行为。</p><p style="font-size:14px;color:#222222;line-height:22px;padding:6px 0px;">在本系列的下一篇文章中，我们会介绍 Vim 的内置事件模型，并探索如何建立在用户编辑时自动触发的用户自定义函数。</p></div></div><div style="width:960px;overflow:hidden;clear:both;padding:0px 10px 10px 10px;"><div style="width:620px;float:left;padding:0px 10px;"><h2 style="font-size:20px;font-weight:bold;line-height:24px;border-width: 1px 0px 0px 0px;border-color: #666666 #ffffff #ffffff #ffffff;border-style: solid;margin:10px 0px 5px;padding:6px 0px 0px;">参考资料 </h2><h3 style="font-size:14px;font-weight:bold;line-height:16px;margin:5px 0px;">学习</h3><ul style="font-size:14px;color:#333333;line-height:22px;list-style-type:none;"><li style="clear:left;list-style-type:none;padding:5px 0px 5px 11px;background:#ffffff url(http://1.www.s81c.com/i/v17/bullets/ibm_lg_bullet_grey_on.gif) no-repeat 0 13px;">从本系列第一篇文章：“<a style="color:#00649d;" href="http://www.ibm.com/developerworks/cn/linux/l-vim-script-1/" onclick="document.location.href=this.href;return false;" id="582">使用脚本编写 Vim 编辑器，第 1 部分：变量、值和表达式</a>”（developerWorks，2009 年 5 月）开始学习 Vimscript 和扩展 Vim 编辑器的嵌入式语言。</li><li style="clear:left;list-style-type:none;padding:5px 0px 5px 11px;background:#ffffff url(http://1.www.s81c.com/i/v17/bullets/ibm_lg_bullet_grey_on.gif) no-repeat 0 13px;">“<a style="color:#00649d;" href="http://www.ibm.com/developerworks/cn/linux/l-vim-script-2/" onclick="document.location.href=this.href;return false;" id="583">使用脚本编写 Vim 编辑器，第 2 部分：用户定义函数</a>”（developerWorks，2009 年 7 月）了解 Vimscript 的标量数据类型：字符串、数字和布尔值。</li><li style="clear:left;list-style-type:none;padding:5px 0px 5px 11px;background:#ffffff url(http://1.www.s81c.com/i/v17/bullets/ibm_lg_bullet_grey_on.gif) no-repeat 0 13px;">“<a style="color:#00649d;" href="http://www.ibm.com/developerworks/cn/linux/l-vim-script-3/" onclick="document.location.href=this.href;return false;" id="584">使用脚本编写 Vim 编辑器，第 3 部分：内置列表</a>”（developerWorks，2010 年 1 月）介绍列表数据结构并学习介绍其用法的几个例子。</li><li style="clear:left;list-style-type:none;padding:5px 0px 5px 11px;background:#ffffff url(http://1.www.s81c.com/i/v17/bullets/ibm_lg_bullet_grey_on.gif) no-repeat 0 13px;">查看以下资源，继续学习 Vim 编辑器及其许多命令： <ul style="line-height:19px;list-style-type:none;"><li style="clear:left;list-style-type:none;padding:5px 0px 5px 11px;background:#ffffff url(http://1.www.s81c.com/i/v17/bullets/ibm_lg_bullet_grey_on.gif) no-repeat 0 13px;"><a style="color:#00649d;" href="http://www.vim.org/" onclick="document.location.href=this.href;return false;" id="585">Vim 主页</a></li><li style="clear:left;list-style-type:none;padding:5px 0px 5px 11px;background:#ffffff url(http://1.www.s81c.com/i/v17/bullets/ibm_lg_bullet_grey_on.gif) no-repeat 0 13px;">在线图书 <a style="color:#00649d;" href="http://www.swaroopch.com/notes/Vim" onclick="document.location.href=this.href;return false;" id="586">A Byte of Vim</a></li><li style="clear:left;list-style-type:none;padding:5px 0px 5px 11px;background:#ffffff url(http://1.www.s81c.com/i/v17/bullets/ibm_lg_bullet_grey_on.gif) no-repeat 0 13px;"><a style="color:#00649d;" href="http://iccf-holland.org/click5.html" onclick="document.location.href=this.href;return false;" id="587">关于 Vim 的各种图书</a></li><li style="clear:left;list-style-type:none;padding:5px 0px 5px 11px;background:#ffffff url(http://1.www.s81c.com/i/v17/bullets/ibm_lg_bullet_grey_on.gif) no-repeat 0 13px;"><a style="color:#00649d;" href="http://vimdoc.sourceforge.net/" onclick="document.location.href=this.href;return false;" id="588">Vim 手册</a></li><li style="clear:left;list-style-type:none;padding:5px 0px 5px 11px;background:#ffffff url(http://1.www.s81c.com/i/v17/bullets/ibm_lg_bullet_grey_on.gif) no-repeat 0 13px;">Steve Oualline 的 <a style="color:#00649d;" href="http://www.oualline.com/vim-cook.html" onclick="document.location.href=this.href;return false;" id="589">Vim Cookbook</a></li></ul></li><li style="clear:left;list-style-type:none;padding:5px 0px 5px 11px;background:#ffffff url(http://1.www.s81c.com/i/v17/bullets/ibm_lg_bullet_grey_on.gif) no-repeat 0 13px;">要获得 Vimscript 脚本的大量例子，请查看： <ul style="line-height:19px;list-style-type:none;"><li style="clear:left;list-style-type:none;padding:5px 0px 5px 11px;background:#ffffff url(http://1.www.s81c.com/i/v17/bullets/ibm_lg_bullet_grey_on.gif) no-repeat 0 13px;"><a style="color:#00649d;" href="http://vim.wikia.com/" onclick="document.location.href=this.href;return false;" id="590">Vim Tips wiki</a></li><li style="clear:left;list-style-type:none;padding:5px 0px 5px 11px;background:#ffffff url(http://1.www.s81c.com/i/v17/bullets/ibm_lg_bullet_grey_on.gif) no-repeat 0 13px;"><a style="color:#00649d;" href="http://vim.sourceforge.net/" onclick="document.location.href=this.href;return false;" id="591">Vimscript 归档</a></li></ul></li><li style="clear:left;list-style-type:none;padding:5px 0px 5px 11px;background:#ffffff url(http://1.www.s81c.com/i/v17/bullets/ibm_lg_bullet_grey_on.gif) no-repeat 0 13px;">在 <a style="color:#00649d;" href="http://www.ibm.com/developerworks/cn/linux/" onclick="document.location.href=this.href;return false;" id="592">developerWorks Linux 专区</a>寻找为 Linux 开发人员（包括 <a style="color:#00649d;" href="http://www.ibm.com/developerworks/cn/linux/newto/" onclick="document.location.href=this.href;return false;" id="593">Linux 新手入门</a>）准备的更多参考资料，查阅我们 <a style="color:#00649d;" href="http://www.ibm.com/developerworks/cn/linux/best2009/index.html" onclick="document.location.href=this.href;return false;" id="594">最受欢迎的文章和教程</a>。 </li><li style="clear:left;list-style-type:none;padding:5px 0px 5px 11px;background:#ffffff url(http://1.www.s81c.com/i/v17/bullets/ibm_lg_bullet_grey_on.gif) no-repeat 0 13px;">在 developerWorks 上查阅所有 <a style="color:#00649d;" href="http://www.ibm.com/developerworks/cn/views/linux/libraryview.jsp?search_by=Linux+%E6%8A%80%E5%B7%A7" onclick="document.location.href=this.href;return false;" id="595">Linux 技巧</a>和 <a style="color:#00649d;" href="http://www.ibm.com/developerworks/cn/views/linux/libraryview.jsp?type_by=%E6%95%99%E7%A8%8B" onclick="document.location.href=this.href;return false;" id="596">Linux 教程</a>。 </li><li style="clear:left;list-style-type:none;padding:5px 0px 5px 11px;background:#ffffff url(http://1.www.s81c.com/i/v17/bullets/ibm_lg_bullet_grey_on.gif) no-repeat 0 13px;">随时关注 developerWorks <a style="color:#00649d;" href="http://www.ibm.com/developerworks/cn/offers/techbriefings/" onclick="document.location.href=this.href;return false;" id="597">技术活动</a>和<a style="color:#00649d;" href="http://www.ibm.com/developerworks/cn/swi/" onclick="document.location.href=this.href;return false;" id="598">网络广播</a>。 </li></ul><h3 style="font-size:14px;font-weight:bold;line-height:16px;margin:5px 0px;padding:8px 0px 0px;">获得产品和技术</h3><ul style="font-size:14px;color:#333333;line-height:22px;list-style-type:none;"><li style="clear:left;list-style-type:none;padding:5px 0px 5px 11px;background:#ffffff url(http://1.www.s81c.com/i/v17/bullets/ibm_lg_bullet_grey_on.gif) no-repeat 0 13px;">从 <a style="color:#00649d;" href="http://www.vim.org/download.php" onclick="document.location.href=this.href;return false;" id="599">Vim 发行版下载页面</a>为您的平台下载最新版本的 Vim。</li><li style="clear:left;list-style-type:none;padding:5px 0px 5px 11px;background:#ffffff url(http://1.www.s81c.com/i/v17/bullets/ibm_lg_bullet_grey_on.gif) no-repeat 0 13px;">使用可直接从 developerWorks 下载的 <a style="color:#00649d;" href="http://www.ibm.com/developerworks/cn/downloads/" onclick="document.location.href=this.href;return false;" id="600">IBM 产品评估试用版软件</a>构建您的下一个 Linux 开发项目。</li></ul><h3 style="font-size:14px;font-weight:bold;line-height:16px;margin:5px 0px;padding:8px 0px 0px;">讨论</h3><ul style="font-size:14px;color:#333333;line-height:22px;list-style-type:none;"><li style="clear:left;list-style-type:none;padding:5px 0px 5px 11px;background:#ffffff url(http://1.www.s81c.com/i/v17/bullets/ibm_lg_bullet_grey_on.gif) no-repeat 0 13px;">加入 <a style="color:#00649d;" href="http://www.ibm.com/developerworks/community" onclick="document.location.href=this.href;return false;" id="601">My developerWorks 社区</a>。查看开发人员参与的博客、论坛、组和 wiki，并与其他 developerWorks 用户交流。</li></ul><h2 style="font-size:20px;font-weight:bold;line-height:24px;border-width: 1px 0px 0px 0px;border-color: #cccccc #ffffff #ffffff #ffffff;border-style: solid;margin:10px 0px 5px;padding:8px 0px 0px;">条评论</h2><div><div></div></div></div><div style="width:300px;float:left;padding:0px 10px;"><div style="height:1px;font-size:0px;clear:both;margin:10px 0px;background:#cccccc;"></div><ul style="color:#333333;list-style-type:none;padding:0px 0px 5px;"><li style="display:block;clear:both;padding:5px 0px;"><img style="display:block;width:60px;height:60px;float:left;padding:0px 10px 10px;" src="./使用脚本编写 Vim 编辑器，第 4 部分 字典_html/13841610.jpg"><h3 style="font-size:13px;font-weight:bold;line-height:15px;margin:0px 0px 4px 70px;"><a style="color:#000000;line-height:16px;" href="http://www.ibm.com/developerworks/cn/puresystems/" onclick="document.location.href=this.href;return false;" id="602">IBM PureSystems</a></h3><p style="color:#4c4c4c;line-height:15px;margin:-2px 0px 0px 70px;padding:0px 0px 5px;">IBM PureSystems™ 系列解决方案是一个专家集成系统</p></li><li style="display:block;clear:both;padding:5px 0px;"><img style="display:block;width:50px;height:50px;float:left;padding:0px 10px 10px;" src="./使用脚本编写 Vim 编辑器，第 4 部分 字典_html/8858458.jpg"><h3 style="font-size:13px;font-weight:bold;line-height:15px;margin:0px 0px 4px 70px;"><a style="color:#000000;line-height:16px;" href="http://www.ibm.com/developerworks/cn/views/global/libraryview.jsp?type_by=Knowledge+paths" onclick="document.location.href=this.href;return false;" id="603">developerWorks 学习路线图</a></h3><p style="color:#4c4c4c;line-height:15px;margin:-2px 0px 0px 70px;padding:0px 0px 5px;">通过学习路线图系统掌握软件开发技能</p></li><li style="display:block;clear:both;padding:5px 0px;"><img style="display:block;width:60px;height:60px;float:left;padding:0px 10px 10px;" src="./使用脚本编写 Vim 编辑器，第 4 部分 字典_html/6024308.png"><h3 style="font-size:13px;font-weight:bold;line-height:15px;margin:0px 0px 4px 70px;"><a style="color:#000000;line-height:16px;" href="http://www.ibm.com/developerworks/cn/downloads/" onclick="document.location.href=this.href;return false;" id="604">软件下载资源中心</a></h3><p style="color:#4c4c4c;line-height:15px;margin:-2px 0px 0px 70px;padding:0px 0px 5px;">软件下载、试用版及云计算</p></li></ul></div></div><div style="width:960px;overflow:hidden;clear:both;padding:0px 10px 10px 10px;"><div style="width:940px;clear:both;padding:0px 10px;"><div style="height:1px;font-size:0px;clear:both;margin:10px 0px;background:#cccccc;"></div><p style="font-size:14px;color:#222222;clear:both;line-height:22px;text-align:right;padding:6px 0px;"><a style="font-weight:bold;color:#00649d;line-height:15px;padding:0px 0px 0px 16px;background:#ffffff url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_arrow_blue_ON.png) no-repeat 0 -401px;" href="http://www.ibm.com/developerworks/cn/linux/l-vim-script-4/index.html#ibm-pcon" onclick="document.location.reload();return false;" id="605">回页首</a></p></div></div></div></div></div></div><div style="height:0px;overflow:hidden;font-size:0px;color:#ffffff;clear:both;"></div><div style="background:#ffffff;"><div style="width:980px;padding:16px 0px 24px;background:#ffffff;"><div><div style="width:160px;float:left;margin:0px 0px 0px 21px;"><ul><li style="list-style-type:none;padding:0px 0px 3px;"><a style="font-size:11px;color:#666666;line-height:13px;" href="https://www.ibm.com/developerworks/secure/feedback.jsp?domain=dwchina" onclick="document.location.href=this.href;return false;" id="606">帮助</a></li><li style="list-style-type:none;padding:0px 0px 3px;"><a style="font-size:11px;color:#666666;line-height:13px;" href="http://www.ibm.com/developerworks/cn/author/" onclick="document.location.href=this.href;return false;" id="607">联系编辑</a></li><li style="list-style-type:none;padding:0px 0px 3px;"><a style="font-size:11px;color:#666666;line-height:13px;" href="https://www.ibm.com/developerworks/secure/myideas2.jsp?domain=dwchina&amp;start=true" onclick="document.location.href=this.href;return false;" id="608">提交内容</a></li><li style="list-style-type:none;padding:0px 0px 3px;"><a style="font-size:11px;color:#666666;line-height:13px;" href="http://www.ibm.com/developerworks/cn/rss/" onclick="document.location.href=this.href;return false;" id="609">订阅源</a></li></ul></div><div style="width:160px;float:left;"><ul><li style="list-style-type:none;padding:0px 0px 3px;"><a style="font-size:11px;color:#666666;line-height:13px;" href="http://www.ibm.com/vrm/newsletter/10104?S_TACT=105AGX52&amp;S_CMP=dwcntop" onclick="document.location.href=this.href;return false;" id="610">在线浏览每周时事通讯</a></li><li style="list-style-type:none;padding:0px 0px 3px;"><a style="display:block;font-size:11px;color:#666666;line-height:13px;padding:5px 5px 5px 21px;background:#ffffff url(http://dw1.s81c.com/developerworks/i/sina.png) no-repeat 2px 4px;" href="http://weibo.com/ibmdw/" onclick="document.location.href=this.href;return false;" id="611">新浪微博</a></li><li style="list-style-type:none;padding:0px 0px 3px;"><a style="font-size:11px;color:#666666;line-height:13px;" href="https://www.ibm.com/developerworks/community/report?lang=zh" onclick="document.location.href=this.href;return false;" id="612">报告滥用</a></li><li style="list-style-type:none;padding:0px 0px 3px;"><a style="font-size:11px;color:#666666;line-height:13px;" href="https://www.ibm.com/developerworks/community/terms?lang=zh" onclick="document.location.href=this.href;return false;" id="613">使用条款</a></li><li style="list-style-type:none;padding:0px 0px 3px;"><a style="font-size:11px;color:#666666;line-height:13px;" href="https://www.ibm.com/developerworks/cn/community/terms/thirdparty/" onclick="document.location.href=this.href;return false;" id="614">第三方提示</a></li></ul></div><div style="width:160px;float:left;"><ul><li style="list-style-type:none;padding:0px 0px 3px;"><a style="font-size:11px;color:#666666;line-height:13px;" href="http://www.ibm.com/privacy/cn/zh/" onclick="document.location.href=this.href;return false;" id="615">隐私条约</a></li><li style="list-style-type:none;padding:0px 0px 3px;"><a style="font-size:11px;color:#666666;line-height:13px;" href="http://www.ibm.com/ibm/accessibility/cn/" onclick="document.location.href=this.href;return false;" id="616">浏览辅助</a></li><li style="list-style-type:none;padding:0px 0px 3px;"><a style="font-size:11px;color:#666666;line-height:13px;" href="http://www.ibm.com/developerworks/cn/academic/" onclick="document.location.href=this.href;return false;" id="617">IBM 教育学院教育培养计划</a></li><li style="list-style-type:none;padding:0px 0px 3px;"><a style="font-size:11px;color:#666666;line-height:13px;" href="http://www.ibm.com/developerworks/cn/gep/" onclick="document.location.href=this.href;return false;" id="618">IBM 创业企业全球扶持计划</a></li><li style="list-style-type:none;padding:0px 0px 3px;"><a style="font-size:11px;color:#666666;line-height:13px;" href="http://www.ibm.com/partnerworld/isv/" onclick="document.location.href=this.href;return false;" id="619">ISV 资源 (英语)</a></li></ul></div><div style="width:160px;float:left;"><ul><li style="list-style-type:none;padding:0px 0px 3px;"><a style="font-size:11px;color:#666666;line-height:13px;" href="http://www.ibm.com/developerworks/cn/newsletter/" onclick="document.location.href=this.href;return false;" id="620">dW 中国每周时事通讯</a><br></li></ul></div><div style="width:270px;float:left;padding:0px 0px 0px 30px;"><img style="width:223px;height:46px;" alt="IBM®" src="./使用脚本编写 Vim 编辑器，第 4 部分 字典_html/15523302.png"></div></div></div></div></div><div></div><object type="application/x-shockwave-flash"></object></body></html>