<!DOCTYPE html><!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]--><!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]--><!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="js video maskImage placeholder" lang="en"><!--<![endif]--><head>
  <meta charset="utf-8">
  <title>w3m, Surfraw and Yanking URLs - jasonwryan.com</title>
  <meta name="author" content="Jason Ryan">

  
  <meta name="description" content="I posted a couple of weeks ago about
how much I was enjoying Surfraw,
to the point of writing a couple of my own elvi. As part of the
ongoing …">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1">

  
  <link rel="canonical" href="./w3m, Surfraw and Yanking URLs - jasonwryan_com_html/1342694">
  <link href="./w3m, Surfraw and Yanking URLs - jasonwryan_com_html/14266978.png" rel="icon">
  <link href="./w3m, Surfraw and Yanking URLs - jasonwryan_com_html/12635133.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script type="text/javascript" async="" src="./w3m, Surfraw and Yanking URLs - jasonwryan_com_html/11786579.js"></script><script src="./w3m, Surfraw and Yanking URLs - jasonwryan_com_html/7615557.0.js"></script>
  <script src="./w3m, Surfraw and Yanking URLs - jasonwryan_com_html/573702.js"></script>
  <script src="./w3m, Surfraw and Yanking URLs - jasonwryan_com_html/6949247.js" type="text/javascript"></script>
  <link href="./w3m, Surfraw and Yanking URLs - jasonwryan_com_html/9466201.xml" rel="alternate" title="jasonwryan.com" type="application/atom+xml">
  <!-- OpenId login -->
<link rel="openid2.provider" href="./w3m, Surfraw and Yanking URLs - jasonwryan_com_html/14811992">
<link rel="openid2.local_id" href="./w3m, Surfraw and Yanking URLs - jasonwryan_com_html/5406583">

<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="./w3m, Surfraw and Yanking URLs - jasonwryan_com_html/15964039" rel="stylesheet" type="text/css">
<link href="./w3m, Surfraw and Yanking URLs - jasonwryan_com_html/1664088" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-907012-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


<script type="text/javascript" async="" src="./w3m, Surfraw and Yanking URLs - jasonwryan_com_html/9043800.js"></script><script type="text/javascript" async="" src="./w3m, Surfraw and Yanking URLs - jasonwryan_com_html/12451483.js"></script><script type="text/javascript" async="" src="./w3m, Surfraw and Yanking URLs - jasonwryan_com_html/4439684"></script></head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="http://jasonwryan.com/">jasonwryan.com</a></h1>
  
    <h2>Miscellaneous ephemera…</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://jasonwryan.com/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://www.duckduckgo.com/" method="get">
  <fieldset role="search">
    <!-- <input type="hidden" name="q" value="site:jasonwryan.com" /> -->
    <input type="hidden" name="sites" value="jasonwryan.com">
    <input class="search" type="text" name="q" results="0" placeholder="Search duckduckgo…">
  </fieldset><fieldset class="mobile-nav"><select><option value="">Navigate…</option><option value="http://jasonwryan.com/">» Home</option><option value="http://jasonwryan.com/blog/archives">» Archives</option><option value="http://jasonwryan.com/contact.html">» Contact</option><option value="http://jasonwryan.com/atom.xml">» RSS</option></select></fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="http://jasonwryan.com/">Home</a></li>
  <li><a href="http://jasonwryan.com/blog/archives">Archives</a></li>
  <li><a href="http://jasonwryan.com/contact.html">Contact</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">w3m, Surfraw and Yanking URLs</h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-05-05T19:57:00+12:00" pubdate="" data-updated="true">May 5<span>th</span>, 2011</time>
        
      </p>
    
  </header>


<div class="entry-content"><p><img src="./w3m, Surfraw and Yanking URLs - jasonwryan_com_html/5847373.png" alt="image"></p>

<p>I posted a couple of weeks ago about
<a href="http://jasonwryan.com/blog/2011/04/13/archwiki-elvis-for-surfraw/" title="My post on the Arch Wiki elvis">how much I was enjoying Surfraw</a>,
to the point of writing a couple of my own <em>elvi</em>. As part of the
ongoing tweaking of my Surfraw experience, I have been experimenting
with different
<a href="http://en.wikipedia.org/wiki/Text-based_web_browser" title="Wikipedia entry: text browsers">text-based browsers</a>,
to see which one best fits my workflow.</p>

<p>I have previously been using both
<a href="http://www.jikos.cz/~mikulas/links/" title="Links homepage (Spartan enough for you?)">links</a>
and it’s homophone,
<a href="http://lynx.browser.org/" title="See you, and raise you...">lynx</a>. While
these have been perfectly acceptable, they weren’t quite providing the
level of functionality —and integration with my vim-oriented workflow—
that I was looking for. Enter
<a href="http://w3m.sourceforge.net/" title="Lavish, by comparison...">w3m</a>.</p>

<blockquote><p>w3m is a text-based web browser as well as a pager like `more’ or
`less’. With w3m you can browse web pages through a terminal emulator
window (xterm, rxvt or something like that). Moreover, w3m can be used
as a text formatting tool which typesets HTML into plain text.</p></blockquote>

<p>w3m is a step up from the other two for a variety of reasons. It
supports tables, frames, SSL connections, color and inline images. It
also renders pages in a form as true to their original layout as
possible. The killer features on top of that are, for me, the above
mentioned rendering of HTML as text (meaning you can save content
easily), and the customizable keybinds.</p>

<p>There was however, one significant sticking point. After countless hours
fruitlessly searching, I was unable to find a way to yank URLs to the
clipboard. As I have been spending a little time of late on
<a href="http://unix.stackexchange.com/" title="Unix &amp; Linux Stack Exchange">Unix &amp; Linux Stack Exchange</a>,
I thought I would ask the good folk there…</p>

<p>Less than fourty hours later, I had an answer so simple and elegant,
that I was literally grinning when I read it. It deserves quoting in
full. It is that ingenious.</p>

<blockquote><p>Set the “External Browser” option to
<code>sh -c 'echo "$0" | xsel'</code></p>

<p>You can use xsel -b to use the clipboard instead of the primary
selection. An alternative to
<a href="http://www.vergenet.net/~conrad/software/xsel/" title="xsel homepage">xsel</a>
is <a href="http://sourceforge.net/projects/xclip/" title="xclip homepage">xclip</a>
(xclip for the primary selection, xclip -selection CLIPBOARD for the
clipboard).</p>

<p>In <span class="file">~/.w3m/config</span>, that’s the extbrowser setting.
Then press M to copy (yank) the URL of the current page, or ESCM to
copy the URL of the link under the cursor.</p>

<p>You can use the second or third external browser for that instead;
then the key combination is 2M or 3M or 2ESCM or 3ESCM.
<a href="http://unix.stackexchange.com/questions/12497/yanking-urls-in-w3m/12572#12572" title="THE answer">Gilles on Unix &amp; Linux Stack Exchange</a></p></blockquote>

<p>This simple hack means that it is now trivial to yank either the URL of
the current page, or of the link under the cursor to primary selection.
It was just a matter then of adding some intuitive keybinds – as the <kbd>M</kbd>
and <kbd>Escape</kbd><kbd>M</kbd> combination are redolent of
<a href="http://en.wikipedia.org/wiki/Editor_war" title="Emacs vs Vi">the unamed editor</a>:</p>

<figure class="code"> <div class="highlight"><pre><code class="vim"><span class="line"><span class="nb">keymap</span> <span class="k">y</span> EXTERN
</span><span class="line"><span class="nb">keymap</span> Y EXTERN_LINK
</span></code></pre></div></figure>


<p>The perfect <a href="http://en.wikipedia.org/wiki/Unix_philosophy" title="The UNIX philosophy on Wikipedia">UNIX solution</a>…</p>

<h4>Updated 8/5/11</h4>

<p>Gilles has edited and updated his answer with a slight change:</p>

<figure class="code"> <div class="highlight"><pre><code class="sh"><span class="line">sh -c <span class="s1">'printf %s "$0" | xsel'</span>
</span></code></pre></div></figure>


<p>This prevents a new line being appended.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Jason Ryan</span></span>

      








  


<time datetime="2011-05-05T19:57:00+12:00" pubdate="" data-updated="true">May 5<span>th</span>, 2011</time>
      

<span class="categories">
  
    <a class="category" href="http://jasonwryan.com/blog/categories/browser/">browser</a>, <a class="category" href="http://jasonwryan.com/blog/categories/hack/">hack</a>, <a class="category" href="http://jasonwryan.com/blog/categories/linux/">linux</a>, <a class="category" href="http://jasonwryan.com/blog/categories/surfraw/">surfraw</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="http://jasonwryan.com/blog/2011/04/13/archwiki-elvis-for-surfraw/" title="Previous Post: Archwiki elvis for Surfraw">« Archwiki elvis for Surfraw</a>
      
      
        <a class="basic-alignment right" href="http://jasonwryan.com/blog/2011/05/24/tyrs-ncurses-twitter-client/" title="Next Post: Tyrs: ncurses Twitter Client">Tyrs: ncurses Twitter Client »</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><iframe id="dsq-2" data-disqus-uid="2" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" style="width: 100% !important; border-top-style: none !important; border-right-style: none !important; border-bottom-style: none !important; border-left-style: none !important; border-width: initial !important; border-color: initial !important; border-image: initial !important; overflow-x: hidden !important; overflow-y: hidden !important; height: 3169px !important; " width="100%" src="./w3m, Surfraw and Yanking URLs - jasonwryan_com_html/4327214.htm" horizontalscrolling="no" verticalscrolling="no"></iframe></div>
  </section>

</div>

<aside class="sidebar thirds">
  
    <section class="first odd">
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="http://jasonwryan.com/blog/2014/10/25/snapclean/">Pruning Tarsnap Archives</a>
      </li>
    
      <li class="post">
        <a href="http://jasonwryan.com/blog/2014/09/20/multiarch/">Multi-arch Packages in AUR</a>
      </li>
    
      <li class="post">
        <a href="http://jasonwryan.com/blog/2014/09/06/reminder/">Simple Reminders</a>
      </li>
    
      <li class="post">
        <a href="http://jasonwryan.com/blog/2014/08/23/asp/">Building from Source</a>
      </li>
    
      <li class="post">
        <a href="http://jasonwryan.com/blog/2014/08/02/password/">pass{,word} manager</a>
      </li>
    
  </ul>
</section>

<section class="even">
  <h1>Pinboard</h1>
  <ul id="pinboard_linkroll"><li class="pin-item"><p><a class="pin-title" href="http://linuxgizmos.com/ringing-in-2015-with-40-linux-friendly-hacker-sbcs/">40 Linux-friendly hacker SBCs</a><span class="pin-description">Post Pi...</span>
 <a class="pin-tag" href="http://pinboard.in/u:jasonwryan/t:linux">linux</a>  <a class="pin-tag" href="http://pinboard.in/u:jasonwryan/t:arm">arm</a>  <a class="pin-tag" href="http://pinboard.in/u:jasonwryan/t:hardware">hardware</a>  <a class="pin-tag" href="http://pinboard.in/u:jasonwryan/t:reference">reference</a> </p></li>

<li class="pin-item"><p><a class="pin-title" href="http://sysdigcloud.com/fascinating-world-linux-system-calls/">The Fascinating World of Linux System Calls</a><span class="pin-description">The system call interface includes a number of functions that the operating system exports to the applications running on top of it. These functions allow actions like opening files, creating network connections, reading and writing from files, and so on.</span>
 <a class="pin-tag" href="http://pinboard.in/u:jasonwryan/t:c">c</a>  <a class="pin-tag" href="http://pinboard.in/u:jasonwryan/t:linux">linux</a>  <a class="pin-tag" href="http://pinboard.in/u:jasonwryan/t:kernel">kernel</a>  <a class="pin-tag" href="http://pinboard.in/u:jasonwryan/t:reference">reference</a> </p></li>

<li class="pin-item"><p><a class="pin-title" href="http://magcius.github.io/xplain/article/">Xplain</a><span class="pin-description">"I want to explain a lot of the more undocumented or harder-to-grasp features built into X11 (the permutations of input grabs, for instance), and I also want to provide an accurate, historical context on why a certain feature was added (COMPOSITE, for instance), and all the clever hacks we've invented along the way (WM_TAKE_FOCUS, for instance)."</span>
 <a class="pin-tag" href="http://pinboard.in/u:jasonwryan/t:graphics">graphics</a>  <a class="pin-tag" href="http://pinboard.in/u:jasonwryan/t:unix">unix</a>  <a class="pin-tag" href="http://pinboard.in/u:jasonwryan/t:xorg">xorg</a>  <a class="pin-tag" href="http://pinboard.in/u:jasonwryan/t:server">server</a>  <a class="pin-tag" href="http://pinboard.in/u:jasonwryan/t:reference">reference</a>  <a class="pin-tag" href="http://pinboard.in/u:jasonwryan/t:linux">linux</a> </p></li>
</ul>
  <p><a href="http://pinboard.in/u:jasonwryan">My Pinboard Bookmarks »</a></p>
</section>
<script type="text/javascript">
  var linkroll = 'pinboard_linkroll'; //id target for pinboard list
  var pinboard_user = "jasonwryan"; //id target for pinboard list
  var pinboard_count = 3; //id target for pinboard list
  (function(){
    var pinboardInit = document.createElement('script');
    pinboardInit.type = 'text/javascript';
    pinboardInit.async = true;
    pinboardInit.src = '/javascripts/pinboard.js';
    document.getElementsByTagName('head')[0].appendChild(pinboardInit);
  })();
</script>


<section class="lastfm odd">
<h1>Recently Scrobbled</h1>
<style type="text/css">
  #lastfmList li{ text-align: left; }
</style>
<ul id="lastfmList"><li id="lastfmItem_0"><a href="http://www.last.fm/music/+noredirect/D%27angelo+and+The+Vanguard/_/Another+Life">Another Life</a> by D'angelo and The Vanguard<span class="date"> 1d ago</span></li><li id="lastfmItem_1"><a href="http://www.last.fm/music/+noredirect/D%27angelo+and+The+Vanguard/_/Back+to+the+Future+(Part+II)">Back to the Future (Part II)</a> by D'angelo and The Vanguard<span class="date"> 1d ago</span></li><li id="lastfmItem_2"><a href="http://www.last.fm/music/+noredirect/D%27angelo+and+The+Vanguard/_/The+Door">The Door</a> by D'angelo and The Vanguard<span class="date"> 1d ago</span></li><li id="lastfmItem_3"><a href="http://www.last.fm/music/+noredirect/D%27angelo+and+The+Vanguard/_/Betray+My+Heart">Betray My Heart</a> by D'angelo and The Vanguard<span class="date"> 1d ago</span></li><li id="lastfmItem_4"><a href="http://www.last.fm/music/+noredirect/D%27angelo+and+The+Vanguard/_/Prayer">Prayer</a> by D'angelo and The Vanguard<span class="date"> 1d ago</span></li></ul>
<p><a href="http://alpha.libre.fm/user/jasonwryan">My tunes on Libre.fm »</a></p>

<script type="text/javascript">
  $.domReady(function(){
    getLastfmFeed("jasonwryan", 5, "3a19a6604d742024a1331bebb7a68d33");
  });
</script>
<script src="./w3m, Surfraw and Yanking URLs - jasonwryan_com_html/14188129.js" type="text/javascript"> </script>

<script lang="Javascript">
function getLastfmFeed(user,count,api_key) {
  count = parseInt(count, 10);
  $.ajax({
      url: "http://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=" + user + "&limit=" + count + "&api_key=" + api_key
    , type: 'xml'
    , error: function (err) { $('#lastfmList li.loading').addClass('error').text("Last.fm's busted"); }
    , success: function(data) { showLastfmFeed(data); }
  });
}

function showLastfmFeed(xml){
  var tracklist = document.getElementById('lastfmList'),
      content = '',
      i=0;
  
  $(xml.responseXML).find("recenttracks").children().each(function(){
    var artist = $(this).find('artist').text(),
        name = $(this).find('name').text(),
        date = $(this).find('date').text(),
        url = $(this).find('url').text();
    content += '<li id="lastfmItem_'+i+'"><a href="'+ url + '">' + name +'</a> by '+ artist + '<span class="date"> ' + prettyDate(date) + ' ago</span></li>';
    i+=1;
  });

  tracklist.innerHTML = content;
}
</script>
</section>

<section class="first even">
<p class="arch"><a href="http://unix.stackexchange.com/users/6761/jasonwryan">
<img src="./w3m, Surfraw and Yanking URLs - jasonwryan_com_html/5897703.png" border="0" width="208" height="58" alt="profile for jasonwryan at Unix and Linux, Q&amp;A for users of Linux, FreeBSD and other Un*x-like operating systems." title="profile for jasonwryan at Unix and Linux, Q&amp;A for users of Linux, FreeBSD and other Un*x-like operating systems.">
</a></p>
</section>
<section class="odd">
<p class="arch"><a href="https://archlinux.org/" title="Arch Linux"><img src="./w3m, Surfraw and Yanking URLs - jasonwryan_com_html/6217114.png"></a></p>
</section>

  
</aside>


    <span class="toggle-sidebar"></span></div>
  </div>
  <footer role="contentinfo"><p>
All content licensed under <a href="http://creativecommons.org/licenses/by/2.5/" title="Creative Commons by Attribution">Creative Commons</a> 2015 - Jason Ryan    
<span class="credit">This site is powered by <a href="http://vim.org/">Vim</a>, <a href="http://octopress.org/">Octopress</a> and <a href="http://github.com/">Github</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'jasonwryan';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://jasonwryan.com/blog/2011/05/05/w3m/';
        var disqus_url = 'http://jasonwryan.com/blog/2011/05/05/w3m/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>













</body></html>